"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[573],{10573:function(e,t,s){s.d(t,{default:function(){return t7}});var r=s(57437),a=s(2265),l=s(10751),n=s(11444),i=s(48185);let o={height:350},c=["Top 5","Top 10","Top 15","Top 20","Top 30","Top 50","All"],d=(e,t)=>"".concat(t," distribution of revenue across ").concat({"Revenue by Vertical":"business verticals","Revenue by LOB":"lines of business","Revenue by Policy Type":"policy types","Revenue by Insurers":"insurance partners","Revenue by Products":"product categories","Cross-Sell Penetration":"cross-sell combinations"}[e]||"categories"),u={container:"bg-card text-card-foreground gap-6 rounded-xl border p-2 flex flex-col",table:{headerRow:"grid gap-4 pb-3 mb-3 border-b border-gray-200",headerCell:"text-sm font-normal text-gray-700 text-center",headerCellCenter:"text-sm font-normal text-gray-700 text-center",headerCellRight:"text-sm font-normal text-gray-700 text-center flex items-center",body:"space-y-2 flex-1 overflow-y-auto min-h-0"},productRow:{container:"grid gap-4 p-3 rounded-lg border border-gray-100 hover:bg-gray-50 transition-colors cursor-pointer items-center",productColumn:"flex items-center gap-3",colorIndicator:"w-3 h-3 rounded-full flex-shrink-0",productInfo:"min-w-0",productName:"font-medium text-gray-900 text-sm",productDescription:"text-xs text-gray-500",centerColumn:"text-center",rightColumn:"text-center",cellValue:"font-medium text-gray-900 text-sm"}},m=(e,t)=>"Cr"===t?"₹".concat((e/1e7).toFixed(2)):"L"===t?"₹".concat((e/1e5).toFixed(2)):"K"===t?"₹".concat((e/1e3).toFixed(2)):"₹".concat(e.toLocaleString("en-IN"));var x=s(2128),h=s(29715);function p(){return null}var g=s(89733),v=s(81622),j=s(13320);function f(e){let{...t}=e;return(0,r.jsx)(v.fC,{"data-slot":"dropdown-menu",...t})}function y(e){let{...t}=e;return(0,r.jsx)(v.xz,{"data-slot":"dropdown-menu-trigger",...t})}function b(e){let{className:t,sideOffset:s=4,...a}=e;return(0,r.jsx)(v.Uv,{children:(0,r.jsx)(v.VY,{"data-slot":"dropdown-menu-content",sideOffset:s,className:(0,j.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...a})})}function N(e){let{className:t,inset:s,variant:a="default",...l}=e;return(0,r.jsx)(v.ck,{"data-slot":"dropdown-menu-item","data-inset":s,"data-variant":a,className:(0,j.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...l})}function w(e){let{className:t,...s}=e;return(0,r.jsx)(v.Z0,{"data-slot":"dropdown-menu-separator",className:(0,j.cn)("bg-border -mx-1 my-1 h-px",t),...s})}var C=s(28138),k=s(93409),R=s(12140),P=s(53225),S=s(92222),T=s(36356),B=s(22023),L=s(37164),F=s(45188),I=s(41326);function M(e){let{currentChartType:t,onChartTypeChange:s,onDownload:l,onPresentationMode:n,className:i="",topFilter:o}=e,[c,d]=(0,a.useState)(!1),u=[{type:"donut",label:"Donut Chart",icon:C.Z,description:"Circular chart with center hole"},{type:"bar",label:"Bar Chart",icon:k.Z,description:"Vertical bars comparison"},{type:"line",label:"Line Chart",icon:R.Z,description:"Trend visualization"},{type:"stackedBar",label:"Stacked Bar",icon:P.Z,description:"Multi-category bars"},{type:"table",label:"Table View",icon:S.Z,description:"Detailed data table"}],m=[{format:"csv",label:"Download as CSV",icon:T.Z,description:"Comma-separated values"},{format:"excel",label:"Download as Excel",icon:T.Z,description:"Microsoft Excel format"},{format:"pdf",label:"Download as PDF",icon:B.Z,description:"Portable document format"},{format:"png",label:"Save as Image",icon:L.Z,description:"High-quality PNG image"}],x=e=>{s(e),d(!1)},h=e=>{l(e),d(!1)};return(0,r.jsxs)(f,{open:c,onOpenChange:d,children:[(0,r.jsx)(y,{asChild:!0,children:(0,r.jsx)(g.z,{variant:"outline",size:"sm",className:"h-9 w-9 p-0 hover:bg-gray-50 border-gray-200 rounded-lg transition-all ".concat(i),children:(0,r.jsx)(F.Z,{className:"w-4 h-4 text-gray-600"})})}),(0,r.jsxs)(b,{align:"end",className:"w-56 p-1 bg-white border border-gray-200 rounded-xl shadow-lg",children:[(0,r.jsxs)("div",{className:"px-3 py-2 border-b border-gray-100",children:[(0,r.jsx)("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-1",children:"Chart Format"}),(0,r.jsx)("div",{className:"text-xs text-gray-400",children:"Version 82 Professional"})]}),u.map(e=>{let s=e.icon,a=t===e.type,l=o?parseInt(o.replace("Top ","")):0,n="donut"===e.type&&l>15;return(0,r.jsx)(N,{onClick:()=>!n&&x(e.type),className:"m-1 p-3 rounded-lg transition-all ".concat(n?"cursor-not-allowed opacity-50 bg-gray-50":a?"bg-indigo-50 text-indigo-700 border border-indigo-200 cursor-pointer":"hover:bg-gray-50 cursor-pointer"),disabled:n,children:(0,r.jsxs)("div",{className:"flex items-center w-full",children:[(0,r.jsx)("div",{className:"p-1.5 rounded-md mr-3 ".concat(n?"bg-gray-200":a?"bg-indigo-100":"bg-gray-100"),children:(0,r.jsx)(s,{className:"w-4 h-4 ".concat(n?"text-gray-400":a?"text-indigo-600":"text-gray-600")})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"text-sm font-medium ".concat(n?"text-gray-400":a?"text-indigo-900":"text-gray-900"),children:[e.label,n&&" (Not available for ".concat(o,")")]}),(0,r.jsx)("div",{className:"text-xs ".concat(n?"text-gray-400":a?"text-indigo-600":"text-gray-500"),children:n?"Switch to Top 15 or lower to use donut chart":e.description})]}),a&&!n&&(0,r.jsx)("div",{className:"w-2 h-2 rounded-full bg-indigo-600 ml-2"})]})},e.type)}),(0,r.jsx)(w,{className:"my-2 bg-gray-100"}),n&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"px-3 py-2 border-b border-gray-100",children:[(0,r.jsx)("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-1",children:"View Mode"}),(0,r.jsx)("div",{className:"text-xs text-gray-400",children:"Full-screen presentation experience"})]}),(0,r.jsx)(N,{onClick:()=>{n&&n(),d(!1)},className:"cursor-pointer m-1 p-3 rounded-lg hover:bg-gradient-to-r hover:from-blue-50 hover:to-indigo-50 transition-all",children:(0,r.jsxs)("div",{className:"flex items-center w-full",children:[(0,r.jsx)("div",{className:"p-1.5 rounded-md bg-gradient-to-r from-blue-100 to-indigo-100 mr-3",children:(0,r.jsx)(I.Z,{className:"w-4 h-4 text-blue-600"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:"Presentation Mode"}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:"Auto-slide with navigation controls"})]})]})}),(0,r.jsx)(w,{className:"my-2 bg-gray-100"})]}),(0,r.jsxs)("div",{className:"px-3 py-2 border-b border-gray-100",children:[(0,r.jsx)("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-1",children:"Export Data"}),(0,r.jsx)("div",{className:"text-xs text-gray-400",children:"Download in various formats"})]}),m.map(e=>{let t=e.icon;return(0,r.jsx)(N,{onClick:()=>h(e.format),className:"cursor-pointer m-1 p-3 rounded-lg hover:bg-gray-50 transition-all",children:(0,r.jsxs)("div",{className:"flex items-center w-full",children:[(0,r.jsx)("div",{className:"p-1.5 rounded-md bg-gray-100 mr-3",children:(0,r.jsx)(t,{className:"w-4 h-4 text-gray-600"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.label}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:e.description})]})]})},e.format)})]})]})}function D(e){let{data:t,valueUnit:s,onItemClick:l}=e,[n,o]=(0,a.useState)(null),[c,d]=(0,a.useState)("none"),x=e=>{let t=[33300,27360,23040,16740,12780,8950,7200,6100,5400,4800,4200,3600,3100,2700,2300];return t[e%t.length]||Math.floor(1e4*Math.random())+1e3},h=e=>{n===e?"none"===c?d("desc"):"desc"===c?d("asc"):(d("none"),o(null)):(o(e),d("desc"))};if(!t||!Array.isArray(t))return(0,r.jsx)(i.Zb,{className:u.container,children:(0,r.jsx)("div",{className:"p-4 text-center text-gray-500",children:"No data available"})});let p=e=>m(e,s),g=(0,a.useMemo)(()=>n&&"none"!==c?[...t].sort((e,s)=>{let r,a;switch(n){case"policies":r=x(t.indexOf(e)),a=x(t.indexOf(s));break;case"amount":case"revenue":r=e.value,a=s.value;break;default:return 0}return"desc"===c?a-r:r-a}):t,[t,n,c]),v=e=>n!==e?"currentColor":"desc"===c?"#22c55e":"asc"===c?"#ef4444":"currentColor",j=e=>n!==e||"none"===c?"":"asc"===c?"rotate-180":"";return(0,r.jsx)(i.Zb,{className:u.container,children:(0,r.jsxs)("div",{className:"overflow-auto relative",style:{height:"26rem"},children:[(0,r.jsxs)("div",{className:"".concat(u.table.headerRow," sticky top-0 z-20 bg-white"),style:{gridTemplateColumns:"1.5fr 1fr 1fr 1fr"},children:[(0,r.jsx)("div",{className:"".concat(u.table.headerCell," sticky flex items-center justify-center"),children:"Product"}),(0,r.jsxs)("div",{className:"".concat(u.table.headerCellCenter," cursor-pointer hover:bg-gray-100 px-2 py-2 rounded transition-colors flex items-center justify-center"),onClick:()=>h("policies"),children:[(0,r.jsx)("span",{className:"mr-1",children:"No.of Policies"}),(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:v("policies"),strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"transition-all duration-200 ".concat(j("policies")),children:[(0,r.jsx)("path",{d:"M12 5v14"}),(0,r.jsx)("path",{d:"m19 12-7 7-7-7"})]})]}),(0,r.jsxs)("div",{className:"".concat(u.table.headerCellRight," cursor-pointer hover:bg-gray-100 px-2 py-2 rounded transition-colors justify-center"),onClick:()=>h("amount"),children:[(0,r.jsx)("span",{className:"mr-1",children:"Amount"}),(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:v("amount"),strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"transition-all duration-200 ".concat(j("amount")),children:[(0,r.jsx)("path",{d:"M12 5v14"}),(0,r.jsx)("path",{d:"m19 12-7 7-7-7"})]})]}),(0,r.jsxs)("div",{className:"".concat(u.table.headerCellRight," cursor-pointer hover:bg-gray-100 px-2 py-2 rounded transition-colors justify-center"),onClick:()=>h("revenue"),children:[(0,r.jsx)("span",{className:"mr-1",children:"Revenue"}),(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:v("revenue"),strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"transition-all duration-200 ".concat(j("revenue")),children:[(0,r.jsx)("path",{d:"M12 5v14"}),(0,r.jsx)("path",{d:"m19 12-7 7-7-7"})]})]})]}),(0,r.jsx)("div",{className:u.table.body,children:g.map(e=>{let s=x(t.findIndex(t=>t.id===e.id));return(0,r.jsxs)("div",{onClick:()=>null==l?void 0:l(e),className:u.productRow.container,style:{gridTemplateColumns:"1.5fr 1fr 1fr 1fr"},children:[(0,r.jsxs)("div",{className:"".concat(u.productRow.productColumn," sticky"),children:[(0,r.jsx)("div",{className:u.productRow.colorIndicator,style:{backgroundColor:e.color}}),(0,r.jsxs)("div",{className:u.productRow.productInfo,children:[(0,r.jsx)("div",{className:u.productRow.productName,children:e.name}),(0,r.jsx)("div",{className:u.productRow.productDescription,children:e.description||"".concat(e.percentage.toFixed(1),"% of total revenue")})]})]}),(0,r.jsx)("div",{className:u.productRow.centerColumn,children:(0,r.jsx)("div",{className:u.productRow.cellValue,children:s.toLocaleString()})}),(0,r.jsx)("div",{className:u.productRow.rightColumn,children:(0,r.jsx)("div",{className:u.productRow.cellValue,children:p(e.value)})}),(0,r.jsx)("div",{className:u.productRow.rightColumn,children:(0,r.jsx)("div",{className:u.productRow.cellValue,children:p(e.value)})})]},e.id)})})]})})}var A=s(79055),Z=s(95137),z=s(67524),K=s(74697),V=s(51077),O=s(21902),U=s(11240),E=s(49321),W=s(74232),H=s(35231),G=s(23909),$=s(85369),_=s(68295),Q=s(85475),q=s(25974),Y=s(54142),J=s(2842),X=s(9542),ee=s(45745);function et(e){let{isOpen:t,onClose:s,product:a,valueUnit:l}=e;if(!a)return null;let n=e=>"Cr"===l?"₹".concat((e/1e7).toFixed(2)):"L"===l?"₹".concat((e/1e5).toFixed(2)):"K"===l?"₹".concat((e/1e3).toFixed(2)):"₹".concat(e.toLocaleString("en-IN")),o=e=>e.toLocaleString("en-IN"),c={softBlue:"#4C9AFF",tealGreen:"#00C7B7",coralOrange:"#FF715B",skyBlue:"#73C2FB",warmYellow:"#FFCE56",lightPurple:"#A480CF",mintGreen:"#5ADBB5",deepLilac:"#8566AA"},d=(()=>{if(a.clientBreakdown&&"object"==typeof a.clientBreakdown)return Object.entries(a.clientBreakdown).map(e=>{let[t,s]=e;return{name:t,premium:s.premium,revenue:s.revenue,policies:s.policies,color:"Corporate"===t?c.softBlue:"Retail"===t?c.tealGreen:c.lightPurple}});let e=a.value||0,t=.15*e,s=Math.floor(e/2e3);return[{name:"Corporate",premium:Math.round(.52*e),revenue:Math.round(.52*t),policies:Math.floor(.52*s),color:c.softBlue},{name:"Retail",premium:Math.round(.35*e),revenue:Math.round(.35*t),policies:Math.floor(.35*s),color:c.tealGreen},{name:"Affinity",premium:Math.round(.13*e),revenue:Math.round(.13*t),policies:Math.floor(.13*s),color:c.lightPurple}]})(),u=a.premium||a.value||0,m=a.revenue||.15*u,x=a.policies||Math.floor(u/2e3),h=[{period:"Q1 2023",premium:.8*u,revenue:.8*m,policies:Math.floor(.8*x)},{period:"Q2 2023",premium:.9*u,revenue:.9*m,policies:Math.floor(.9*x)},{period:"Q3 2023",premium:.95*u,revenue:.95*m,policies:Math.floor(.95*x)},{period:"Q4 2023",premium:u,revenue:m,policies:x}],p=[{region:"Mumbai",premium:.35*u,policies:Math.floor(.35*x)},{region:"Delhi",premium:.25*u,policies:Math.floor(.25*x)},{region:"Bangalore",premium:.15*u,policies:Math.floor(.15*x)},{region:"Chennai",premium:.12*u,policies:Math.floor(.12*x)},{region:"Others",premium:.13*u,policies:Math.floor(.13*x)}],v=[{name:"ICICI Lombard",premium:.3*u,policies:Math.floor(.3*x),commission:15},{name:"HDFC ERGO",premium:.25*u,policies:Math.floor(.25*x),commission:14},{name:"Bajaj Allianz",premium:.2*u,policies:Math.floor(.2*x),commission:13},{name:"Others",premium:.25*u,policies:Math.floor(.25*x),commission:12}];return(0,r.jsxs)(r.Fragment,{children:[t&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-40",onClick:()=>{console.log("Backdrop clicked, calling onClose"),s()},"aria-hidden":"true"}),(0,r.jsxs)("div",{className:"fixed top-0 right-0 h-full bg-white shadow-2xl border-l border-gray-200 z-50 transform ".concat(t?"translate-x-0":"translate-x-full"),style:{width:"100vw",maxWidth:"100vw",transition:"transform 3.5s ease-in-out"},children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-8 pb-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-purple-50",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(g.z,{variant:"ghost",size:"sm",onClick:()=>{console.log("ArrowLeft button clicked, calling onClose"),s()},className:"h-10 w-10 p-0 rounded-lg transition-all duration-200 hover:bg-white/50",title:"Back to dashboard",children:(0,r.jsx)(Z.Z,{className:"w-5 h-5 text-blue-600"})}),(0,r.jsx)("div",{className:"p-3 rounded-xl shadow-sm",style:{backgroundColor:"".concat(a.color,"20")},children:(0,r.jsx)(z.Z,{className:"w-7 h-7",style:{color:a.color}})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-semibold text-gray-900",children:a.name}),(0,r.jsxs)("p",{className:"text-lg text-gray-600 mt-1",children:["Comprehense business records and performance analytics for"," ",a.category||"insurance"," product"]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)(A.C,{className:"text-base px-6 py-2 font-medium",style:{backgroundColor:"".concat(a.color,"20"),color:a.color,border:"1px solid ".concat(a.color,"40")},children:[a.category||"Insurance"," Product"]}),(0,r.jsx)(g.z,{variant:"ghost",size:"sm",onClick:()=>{console.log("X button clicked, calling onClose"),s()},className:"h-10 w-10 p-0 rounded-lg transition-all duration-200 hover:bg-white text-gray-600",children:(0,r.jsx)(K.Z,{className:"w-5 h-5"})})]})]}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto h-full",children:(0,r.jsxs)("div",{className:"p-8 space-y-10 pb-16",children:[(0,r.jsxs)("div",{className:"grid grid-cols-4 gap-8",children:[(0,r.jsxs)(i.Zb,{className:"p-8 border-0 shadow-lg hover:shadow-xl transition-shadow duration-300",style:{backgroundColor:"".concat(c.softBlue,"10")},children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,r.jsx)("div",{className:"p-3 rounded-xl",style:{backgroundColor:"".concat(c.softBlue,"20")},children:(0,r.jsx)(V.Z,{className:"w-6 h-6",style:{color:c.softBlue}})}),(0,r.jsx)("span",{className:"text-lg font-medium text-gray-700",children:"Total Premium"})]}),(0,r.jsx)("p",{className:"text-4xl font-bold text-gray-900 mb-2",children:n(u)}),(0,r.jsxs)("p",{className:"text-base text-gray-600",children:[l,"s"]})]}),(0,r.jsxs)(i.Zb,{className:"p-8 border-0 shadow-lg hover:shadow-xl transition-shadow duration-300",style:{backgroundColor:"".concat(c.tealGreen,"10")},children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,r.jsx)("div",{className:"p-3 rounded-xl",style:{backgroundColor:"".concat(c.tealGreen,"20")},children:(0,r.jsx)(O.Z,{className:"w-6 h-6",style:{color:c.tealGreen}})}),(0,r.jsx)("span",{className:"text-lg font-medium text-gray-700",children:"Total Revenue"})]}),(0,r.jsx)("p",{className:"text-4xl font-bold text-gray-900 mb-2",children:n(m)}),(0,r.jsxs)("p",{className:"text-base text-gray-600",children:[l,"s"]})]}),(0,r.jsxs)(i.Zb,{className:"p-8 border-0 shadow-lg hover:shadow-xl transition-shadow duration-300",style:{backgroundColor:"".concat(c.lightPurple,"10")},children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,r.jsx)("div",{className:"p-3 rounded-xl",style:{backgroundColor:"".concat(c.lightPurple,"20")},children:(0,r.jsx)(U.Z,{className:"w-6 h-6",style:{color:c.lightPurple}})}),(0,r.jsx)("span",{className:"text-lg font-medium text-gray-700",children:"Total Policies"})]}),(0,r.jsx)("p",{className:"text-4xl font-bold text-gray-900 mb-2",children:o(x)}),(0,r.jsx)("p",{className:"text-base text-gray-600",children:"active policies"})]}),(0,r.jsxs)(i.Zb,{className:"p-8 border-0 shadow-lg hover:shadow-xl transition-shadow duration-300",style:{backgroundColor:"".concat(c.warmYellow,"10")},children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,r.jsx)("div",{className:"p-3 rounded-xl",style:{backgroundColor:"".concat(c.warmYellow,"20")},children:(0,r.jsx)(k.Z,{className:"w-6 h-6",style:{color:c.warmYellow}})}),(0,r.jsx)("span",{className:"text-lg font-medium text-gray-700",children:"Avg. Premium"})]}),(0,r.jsx)("p",{className:"text-4xl font-bold text-gray-900 mb-2",children:n(x>0?u/x:0)}),(0,r.jsx)("p",{className:"text-base text-gray-600",children:"per policy"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-10",children:[(0,r.jsxs)(i.Zb,{className:"p-10 shadow-lg",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-8",children:[(0,r.jsx)("div",{className:"p-3 rounded-xl",style:{backgroundColor:"".concat(c.mintGreen,"20")},children:(0,r.jsx)(C.Z,{className:"w-6 h-6",style:{color:c.mintGreen}})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-2xl font-semibold text-gray-900",children:"Client Type Distribution"}),(0,r.jsx)("p",{className:"text-base text-gray-600 mt-1",children:"Premium and policy breakdown by client segments"})]})]}),(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsx)("div",{className:"h-96",children:(0,r.jsx)(H.h,{width:"100%",height:"100%",children:(0,r.jsxs)(G.u,{children:[(0,r.jsx)($.b,{data:d,cx:"50%",cy:"50%",innerRadius:80,outerRadius:150,dataKey:"premium",label:e=>{let t=e.premium/u*100;return t>=10?"".concat(t.toFixed(1),"%"):""},labelLine:!1,strokeWidth:3,stroke:"#ffffff",children:d.map((e,t)=>(0,r.jsx)(_.b,{fill:e.color},"cell-".concat(t)))}),(0,r.jsx)(Q.u,{content:(0,r.jsx)(e=>{let{active:t,payload:s}=e;if(t&&s&&s[0]){let e=s[0].payload;return(0,r.jsxs)("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg backdrop-blur-sm",children:[(0,r.jsx)("p",{className:"font-medium text-gray-700 text-sm",children:e.name}),(0,r.jsxs)("p",{className:"font-medium text-sm",style:{color:e.color||c.softBlue},children:[n(e.premium)," ",l,"s"]}),(0,r.jsxs)("p",{className:"text-gray-500 text-xs",children:[o(e.policies)," policies"]})]})}return null},{})})]})})})}),(0,r.jsx)("div",{className:"space-y-4",children:d.map((e,t)=>(0,r.jsxs)("div",{className:"p-6 bg-gray-50 rounded-xl",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,r.jsx)("div",{className:"w-5 h-5 rounded-full",style:{backgroundColor:e.color}}),(0,r.jsx)("span",{className:"text-xl font-semibold text-gray-900",children:e.name})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-600 mb-1 text-base",children:"Premium"}),(0,r.jsxs)("p",{className:"text-xl font-semibold text-gray-900",children:[n(e.premium)," ",l,"s"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-600 mb-1 text-base",children:"Revenue"}),(0,r.jsxs)("p",{className:"text-xl font-semibold text-gray-900",children:[n(e.revenue)," ",l,"s"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-600 mb-1 text-base",children:"Policies"}),(0,r.jsx)("p",{className:"text-xl font-semibold text-gray-900",children:o(e.policies)})]})]})]},t))})]}),(0,r.jsxs)(i.Zb,{className:"p-10 shadow-lg",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-8",children:[(0,r.jsx)("div",{className:"p-3 rounded-xl",style:{backgroundColor:"".concat(c.skyBlue,"20")},children:(0,r.jsx)(P.Z,{className:"w-6 h-6",style:{color:c.skyBlue}})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-2xl font-semibold text-gray-900",children:"Historical Performance"}),(0,r.jsx)("p",{className:"text-base text-gray-600 mt-1",children:"Quarterly trend analysis"})]})]}),(0,r.jsx)("div",{className:"h-96",children:(0,r.jsx)(H.h,{width:"100%",height:"100%",children:(0,r.jsxs)(q.v,{data:h,children:[(0,r.jsx)(Y.q,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),(0,r.jsx)(J.K,{dataKey:"period",stroke:"#888",fontSize:14}),(0,r.jsx)(X.B,{stroke:"#888",fontSize:14}),(0,r.jsx)(Q.u,{contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"12px",fontSize:"14px",padding:"12px"}}),(0,r.jsx)(ee.$,{dataKey:"premium",fill:c.softBlue,radius:[6,6,0,0]})]})})})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-10",children:[(0,r.jsxs)(i.Zb,{className:"p-10 shadow-lg",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-8",children:[(0,r.jsx)("div",{className:"p-3 rounded-xl",style:{backgroundColor:"".concat(c.coralOrange,"20")},children:(0,r.jsx)(E.Z,{className:"w-6 h-6",style:{color:c.coralOrange}})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-2xl font-semibold text-gray-900",children:"Geographic Distribution"}),(0,r.jsx)("p",{className:"text-base text-gray-600 mt-1",children:"Regional performance breakdown"})]})]}),(0,r.jsx)("div",{className:"space-y-4",children:p.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"w-5 h-5 rounded-full",style:{backgroundColor:c.coralOrange}}),(0,r.jsx)("span",{className:"text-xl font-semibold text-gray-900",children:e.region})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("p",{className:"text-xl font-semibold text-gray-900",children:[n(e.premium)," ",l,"s"]}),(0,r.jsxs)("p",{className:"text-base text-gray-600",children:[o(e.policies)," policies"]})]})]},t))})]}),(0,r.jsxs)(i.Zb,{className:"p-10 shadow-lg",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-8",children:[(0,r.jsx)("div",{className:"p-3 rounded-xl",style:{backgroundColor:"".concat(c.deepLilac,"20")},children:(0,r.jsx)(W.Z,{className:"w-6 h-6",style:{color:c.deepLilac}})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-2xl font-semibold text-gray-900",children:"Insurer Partnerships"}),(0,r.jsx)("p",{className:"text-base text-gray-600 mt-1",children:"Partner performance for this product"})]})]}),(0,r.jsx)("div",{className:"overflow-hidden rounded-xl border border-gray-200",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"text-left py-4 px-6 text-lg font-semibold text-gray-900",children:"Insurer"}),(0,r.jsx)("th",{className:"text-right py-4 px-6 text-lg font-semibold text-gray-900",children:"Premium"}),(0,r.jsx)("th",{className:"text-right py-4 px-6 text-lg font-semibold text-gray-900",children:"Policies"}),(0,r.jsx)("th",{className:"text-right py-4 px-6 text-lg font-semibold text-gray-900",children:"Commission %"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-200",children:v.map((e,t)=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,r.jsx)("td",{className:"py-4 px-6 text-lg font-medium text-gray-900",children:e.name}),(0,r.jsxs)("td",{className:"text-right py-4 px-6 text-lg text-gray-900",children:[n(e.premium)," ",l,"s"]}),(0,r.jsx)("td",{className:"text-right py-4 px-6 text-lg text-gray-900",children:o(e.policies)}),(0,r.jsxs)("td",{className:"text-right py-4 px-6 text-lg font-semibold text-gray-900",children:[e.commission,"%"]})]},t))})]})})]})]})]})})]})]})}let es=e=>{let{active:t,payload:s,valueFormatter:a=e=>"$".concat(e.toLocaleString())}=e;if(t&&s&&s.length){let e=s[0].payload;return(0,r.jsxs)("div",{className:"bg-white p-3 rounded-lg shadow-lg border border-gray-200 z-50 pointer-events-none",children:[(0,r.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[a(e.value)," (",e.percentage,"%)"]}),e.description&&(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.description})]})}return null},er=e=>{let{data:t,size:s={width:630,height:350},isPresentation:l=!1,onSegmentClick:n,valueFormatter:i=e=>"$".concat(e.toLocaleString()),className:o="",autoZoom:c=!0,valueUnit:d="Cr",customTooltip:u}=e,[m,x]=(0,a.useState)(null),[h,p]=(0,a.useState)(!1),[g,v]=(0,a.useState)("1rem"),[j,f]=(0,a.useState)("500"),y=(0,a.useRef)(null),b=(0,a.useRef)(null),N=t.reduce((e,t)=>e+t.value,0),w=()=>{if(!y.current||!b.current)return;let e=y.current,t=b.current,s=.8*t.offsetWidth,r=.6*t.offsetHeight;e.style.fontSize="1rem",e.style.fontWeight="500";let a=e.scrollWidth,l=e.scrollHeight;if(a>s||l>r){let e=Math.min(s/a,r/l),t="500";e<.7?t="400":e<.85&&(t="450"),v("".concat(Math.max(8,Math.min(18,18*e)),"px")),f(t)}else v("1rem"),f("500")};(0,a.useEffect)(()=>{console.log("DonutChart useEffect triggered - valueUnit:",d,"total:",N);let e=setTimeout(()=>{w()},100);return()=>clearTimeout(e)},[N,d,l]);let C=l?.38:.32,k=l?.2:.18,R=l?45:30,P=Math.min(s.width,s.height)*k*.85,S=e=>{let t=e.payload;h||x(t)},T=()=>{h||x(null)};return(0,r.jsxs)("div",{className:"relative ".concat(o),style:{width:s.width,height:s.height},children:[(0,r.jsx)(H.h,{width:"100%",height:"100%",children:(0,r.jsxs)(G.u,{children:[(0,r.jsxs)("defs",{children:[(0,r.jsxs)("filter",{id:"magnifyGlow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[(0,r.jsx)("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),(0,r.jsxs)("feMerge",{children:[(0,r.jsx)("feMergeNode",{in:"coloredBlur"}),(0,r.jsx)("feMergeNode",{in:"SourceGraphic"})]})]}),(0,r.jsx)("filter",{id:"focusHighlight",x:"-20%",y:"-20%",width:"140%",height:"140%",children:(0,r.jsx)("feDropShadow",{dx:"0",dy:"0",stdDeviation:"4",floodColor:"#3B82F6",floodOpacity:"0.6"})})]}),(0,r.jsx)($.b,{data:t,cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{cx:s,cy:a,midAngle:l,outerRadius:n,percent:i,payload:o}=e,c=Math.PI/180,d=R;d=l>=270||l<=90?R+25:l>90&&l<150||l>210&&l<270?R+10:R,t.length>6&&(d+=10);let u=n+d,x=n+5,p=n+.6*d,g=a+p*Math.sin(-l*c),v=s+u*Math.cos(-l*c)>s,j=s+(n+d)*Math.cos(-l*c),f=v?j+40:j-40,y=m&&o.id===m.id,b="".concat((100*i).toFixed(1),"%"),N=b;return b.length>20&&(N=v?b.substring(0,17)+"...":"..."+b.substring(b.length-17)),(0,r.jsxs)("g",{children:[(0,r.jsx)("path",{d:"M ".concat(s+x*Math.cos(-l*c)," ").concat(a+x*Math.sin(-l*c)," L ").concat(s+p*Math.cos(-l*c)," ").concat(g," L ").concat(f," ").concat(g),stroke:y?"#3B82F6":"#9CA3AF",strokeWidth:y?2:1,fill:"none",className:"transition-all duration-300"}),(0,r.jsx)("text",{x:f,y:g,fill:y?"#3B82F6":h&&m?"#9CA3AF":"#374151",textAnchor:v?"start":"end",dominantBaseline:"central",className:y?"transition-all duration-500 font-semibold":"transition-all duration-500 font-medium",style:{fontSize:"0.725rem"},children:N})]})},outerRadius:Math.min(s.width,s.height)*(h&&m?C+.08:C),innerRadius:Math.min(s.width,s.height)*k,paddingAngle:2,cornerRadius:8,dataKey:"value",onClick:e=>{let t=e.payload;c&&(m&&m.id===t.id?(x(null),p(!1)):(x(t),p(!0))),n&&n(t)},stroke:"#ffffff",strokeWidth:2,children:t.map((e,t)=>{let s=m&&e.id===m.id;return(0,r.jsx)(_.b,{fill:e.color,className:s?"cursor-pointer transition-all duration-500 drop-shadow-lg":"cursor-pointer transition-all duration-500 hover:opacity-90",fillOpacity:h&&m?s?1:.2:1,stroke:s?"#3B82F6":"#ffffff",strokeWidth:s?8:2,filter:s?"url(#magnifyGlow)":void 0,onMouseEnter:()=>S(e),onMouseLeave:T},"cell-".concat(t))})}),(0,r.jsx)(Q.u,{content:u||es,cursor:!1,wrapperStyle:{zIndex:1e3,pointerEvents:"none"}})]})}),(0,r.jsx)("div",{ref:b,className:"absolute bg-white rounded-full border border-gray-100 shadow-sm flex items-center justify-center pointer-events-none",style:{width:2*P,height:2*P,left:"50%",top:"50%",transform:"translate(-50%, -50%)"},children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{ref:y,className:"text-gray-900",style:{fontSize:g,fontWeight:j,lineHeight:"1.2"},children:(console.log("getFormattedTotal called with value:",N,"valueUnit:",d),"Cr"===d)?"".concat((N/1e7).toFixed(1)):"L"===d?"".concat((N/1e5).toFixed(1)):"K"===d?"".concat((N/1e3).toFixed(1)):"".concat(N.toLocaleString("en-IN"))}),(0,r.jsx)("div",{className:"".concat(l?"text-lg":"text-sm"," text-gray-600 mt-1"),children:(()=>{switch(console.log("getUnitDisplayName called with valueUnit:",d),d){case"Cr":return"crores";case"L":return"lakhs";case"K":return"thousands";default:return""}})()})]})})]})};var ea=s(92566),el=s(16638);let en={minBarWidth:50,maxVisibleBars:10,scrollThreshold:10,containerHeight:325,marginBottom:80},ei=e=>{let{active:t,payload:s,label:a,valueFormatter:l=e=>"$".concat(e.toLocaleString())}=e;if(t&&s&&s.length){var n;let e=s[0];return(0,r.jsxs)("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[(0,r.jsx)("p",{className:"font-medium text-gray-900 mb-1",children:a}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,r.jsx)("span",{className:"inline-block w-3 h-3 rounded-full mr-2",style:{backgroundColor:e.color||"#3B82F6"}}),l(e.value)]}),(null===(n=e.payload)||void 0===n?void 0:n.percentage)&&(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[e.payload.percentage.toFixed(1),"% of total"]})]})}return null},eo=e=>{let{data:t,dataKey:s,nameKey:a="name",color:l="#3B82F6",config:n={},valueFormatter:i,onBarClick:o,className:c=""}=e,d={...en,...n},u=t.length>d.scrollThreshold,m=u?Math.max(600,t.length*d.minBarWidth+100):"100%",x=t.map((e,t)=>{var s;return{...e,[a]:(null===(s=e[a])||void 0===s?void 0:s.length)>15?"".concat(e[a].substring(0,15),"..."):e[a],fullName:e[a],originalIndex:t}}),h=e=>{o&&o(e.payload,e.originalIndex)};return u?(0,r.jsxs)("div",{className:"w-full ".concat(c," relative"),style:{height:d.containerHeight},children:[(0,r.jsx)("div",{className:"absolute  z-10 bg-white",style:{width:"70px",height:"308px"},children:(0,r.jsx)(H.h,{width:"100%",height:"100%",children:(0,r.jsx)(q.v,{data:[{temp:Math.max(...x.map(e=>e[s]))}],margin:{top:12,right:0,left:19,bottom:d.marginBottom},children:(0,r.jsx)(X.B,{fontSize:12,tick:{fontSize:12},domain:[0,Math.max(...x.map(e=>e[s]))],width:50})})})}),(0,r.jsx)("div",{className:"overflow-x-auto overflow-y-hidden h-full",style:{marginLeft:"70px"},children:(0,r.jsx)("div",{className:"h-full",style:{width:"number"==typeof m?"".concat(m,"px"):m},children:(0,r.jsx)(H.h,{width:"100%",height:"125%",children:(0,r.jsxs)(q.v,{data:x,margin:{top:20,right:30,left:0,bottom:d.marginBottom},barCategoryGap:"15%",children:[(0,r.jsx)(Y.q,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),(0,r.jsx)(J.K,{dataKey:a,fontSize:11,angle:-45,textAnchor:"end",height:d.marginBottom,interval:0,tick:{fontSize:11}}),(0,r.jsx)(X.B,{hide:!0}),(0,r.jsx)(Q.u,{content:(0,r.jsx)(ei,{valueFormatter:i||(e=>"$".concat(e.toLocaleString()))}),cursor:{fill:"rgba(59, 130, 246, 0.1)"}}),(0,r.jsx)(ee.$,{dataKey:s,fill:l,radius:[4,4,0,0],onClick:h,style:{cursor:o?"pointer":"default"}})]})})})})]}):(0,r.jsx)("div",{className:"w-full ".concat(c),style:{height:d.containerHeight},children:(0,r.jsx)(H.h,{width:"100%",height:"100%",children:(0,r.jsxs)(q.v,{data:x,margin:{top:20,right:30,left:20,bottom:60},children:[(0,r.jsx)(Y.q,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),(0,r.jsx)(J.K,{dataKey:a,fontSize:12,angle:-45,textAnchor:"end",height:60,interval:0}),(0,r.jsx)(X.B,{fontSize:12}),(0,r.jsx)(Q.u,{content:(0,r.jsx)(ei,{valueFormatter:i||(e=>"$".concat(e.toLocaleString()))}),cursor:{fill:"rgba(59, 130, 246, 0.1)"}}),(0,r.jsx)(ee.$,{dataKey:s,fill:l,radius:[4,4,0,0],onClick:h,style:{cursor:o?"pointer":"default"}})]})})})},ec=e=>{let{data:t,dataKey:s,nameKey:a="name",color:l="#3B82F6",config:n={},valueFormatter:i,className:o=""}=e,c={...en,...n},d=t.length>c.scrollThreshold,u=d?Math.max(600,60*t.length+100):"100%",m=t.map((e,t)=>{var s;return{...e,[a]:(null===(s=e[a])||void 0===s?void 0:s.length)>15?"".concat(e[a].substring(0,15),"..."):e[a],fullName:e[a],originalIndex:t}});return d?(0,r.jsxs)("div",{className:"w-full ".concat(o," relative"),style:{height:325},children:[(0,r.jsx)("div",{className:"absolute z-10 bg-white",style:{width:"70px",height:"308px"},children:(0,r.jsx)(H.h,{width:"100%",height:"100%",children:(0,r.jsx)(ea.w,{data:[m[0]],margin:{top:0,right:0,left:6,bottom:100},children:(0,r.jsx)(X.B,{fontSize:12,domain:[0,Math.max(...m.map(e=>e[s]))]})})})}),(0,r.jsx)("div",{className:"overflow-x-auto overflow-y-hidden h-full",style:{marginLeft:"70px"},children:(0,r.jsx)("div",{className:"h-full",style:{width:"number"==typeof u?"".concat(u,"px"):u},children:(0,r.jsx)(H.h,{width:"100%",height:"105%",children:(0,r.jsxs)(ea.w,{data:m,margin:{top:10,right:30,left:3,bottom:60},children:[(0,r.jsx)(Y.q,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),(0,r.jsx)(J.K,{dataKey:a,fontSize:12,angle:-45,textAnchor:"end",height:60,interval:0,tick:{fontSize:12}}),(0,r.jsx)(X.B,{hide:!0}),(0,r.jsx)(Q.u,{content:(0,r.jsx)(ei,{valueFormatter:i||(e=>"$".concat(e.toLocaleString()))})}),(0,r.jsx)(el.x,{type:"monotone",dataKey:s,stroke:l,strokeWidth:2,dot:{fill:l,strokeWidth:2,r:4},activeDot:{r:6,stroke:l,strokeWidth:2}})]})})})})]}):(0,r.jsx)("div",{className:"w-full ".concat(o),style:{height:c.containerHeight},children:(0,r.jsx)(H.h,{width:"100%",height:"100%",children:(0,r.jsxs)(ea.w,{data:m,margin:{top:20,right:30,left:20,bottom:60},children:[(0,r.jsx)(Y.q,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),(0,r.jsx)(J.K,{dataKey:a,fontSize:12,angle:-45,textAnchor:"end",height:60,interval:0}),(0,r.jsx)(X.B,{fontSize:12}),(0,r.jsx)(Q.u,{content:(0,r.jsx)(ei,{valueFormatter:i||(e=>"$".concat(e.toLocaleString()))})}),(0,r.jsx)(el.x,{type:"monotone",dataKey:s,stroke:l,strokeWidth:2,dot:{fill:l,strokeWidth:2,r:4},activeDot:{r:6,stroke:l,strokeWidth:2}})]})})})},ed=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=e.match(/\d+/);return(r?parseInt(r[0]):10)>=s||t>=s},eu=e=>{let{active:t,payload:s,label:a,valueFormatter:l=e=>"$".concat(e.toLocaleString())}=e;if(t&&s&&s.length){var n;let e=s[0];return(0,r.jsxs)("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[(0,r.jsx)("p",{className:"font-medium text-gray-900 mb-1",children:a}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,r.jsx)("span",{className:"inline-block w-3 h-3 rounded-full mr-2",style:{backgroundColor:e.color||"#3B82F6"}}),l(e.value)]}),(null===(n=e.payload)||void 0===n?void 0:n.percentage)&&(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[e.payload.percentage.toFixed(1),"% of total"]})]})}return null},em=e=>{let{data:t,dataKey:s="value",nameKey:a="name",color:l="#3B82F6",config:n={},valueFormatter:i,onBarClick:o,className:c="",scrollable:d=!1,topFilter:u="Top 10",customTooltip:m}=e,x={...en,...n};if(d||ed(u,t.length))return(0,r.jsx)(eo,{data:t,dataKey:s,nameKey:a,color:l,config:n,valueFormatter:i||(e=>"$".concat(e.toLocaleString())),onBarClick:o||(()=>{}),className:c});let h=t.map((e,t)=>{var s;return{...e,[a]:(null===(s=e[a])||void 0===s?void 0:s.length)>15?"".concat(e[a].substring(0,15),"..."):e[a],fullName:e[a],originalIndex:t}});return(0,r.jsx)("div",{className:"w-full ".concat(c),style:{height:x.containerHeight},children:(0,r.jsx)(H.h,{width:"100%",height:"100%",children:(0,r.jsxs)(q.v,{data:h,margin:{top:20,right:30,left:20,bottom:60},barCategoryGap:"10%",children:[(0,r.jsx)(Y.q,{strokeDasharray:"3 3"}),(0,r.jsx)(J.K,{dataKey:a,angle:-45,textAnchor:"end",height:80,interval:0,fontSize:12,tick:{fontSize:12}}),(0,r.jsx)(X.B,{fontSize:12}),(0,r.jsx)(Q.u,{content:m||eu,cursor:{fill:"rgba(59, 130, 246, 0.1)"}}),(0,r.jsx)(ee.$,{dataKey:s,fill:l,radius:[4,4,0,0],onClick:e=>{o&&o(e.payload,e.originalIndex)},style:{cursor:o?"pointer":"default"}})]})})})},ex=e=>{let{active:t,payload:s,label:a,valueFormatter:l=e=>"$".concat(e.toLocaleString())}=e;if(t&&s&&s.length){var n;let e=s[0];return(0,r.jsxs)("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[(0,r.jsx)("p",{className:"font-medium text-gray-900 mb-1",children:a}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,r.jsx)("span",{className:"inline-block w-3 h-3 rounded-full mr-2",style:{backgroundColor:e.color||"#3B82F6"}}),l(e.value)]}),(null===(n=e.payload)||void 0===n?void 0:n.percentage)&&(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[e.payload.percentage.toFixed(1),"% of total"]})]})}return null},eh=e=>{let{data:t,dataKey:s="value",nameKey:a="name",color:l="#3B82F6",config:n={},valueFormatter:i,onPointClick:o,className:c="",scrollable:d=!1,strokeWidth:u=2,dotRadius:m=4,activeDotRadius:x=6,topFilter:h="Top 10"}=e,p={...en,...n};if(d||ed(h,t.length))return(0,r.jsx)(ec,{data:t,dataKey:s,nameKey:a,color:l,config:n,valueFormatter:i||(e=>"$".concat(e.toLocaleString())),onPointClick:o||(()=>{}),className:c});let g=t.map((e,t)=>{var s;return{...e,[a]:(null===(s=e[a])||void 0===s?void 0:s.length)>15?"".concat(e[a].substring(0,15),"..."):e[a],fullName:e[a],originalIndex:t}});return(0,r.jsx)("div",{className:"w-full ".concat(c),style:{height:p.containerHeight},children:(0,r.jsx)(H.h,{width:"100%",height:"100%",children:(0,r.jsxs)(ea.w,{data:g,margin:{top:20,right:30,left:20,bottom:60},children:[(0,r.jsx)(Y.q,{strokeDasharray:"3 3"}),(0,r.jsx)(J.K,{dataKey:a,angle:-45,textAnchor:"end",height:80,interval:0,fontSize:12,tick:{fontSize:12}}),(0,r.jsx)(X.B,{fontSize:12}),(0,r.jsx)(Q.u,{content:(0,r.jsx)(ex,{valueFormatter:i})}),(0,r.jsx)(el.x,{type:"monotone",dataKey:s,stroke:l,strokeWidth:u,dot:{fill:l,strokeWidth:2,r:m},activeDot:{r:x,stroke:l,strokeWidth:2}})]})})})},ep=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4","#F97316","#84CC16"],eg=e=>{let{active:t,payload:s,label:a,valueFormatter:l=e=>"$".concat(e.toLocaleString())}=e;if(t&&s&&s.length){let e=s.reduce((e,t)=>e+t.value,0);return(0,r.jsxs)("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[(0,r.jsx)("p",{className:"font-medium text-gray-900 mb-2",children:a}),s.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"inline-block w-3 h-3 rounded-full mr-2",style:{backgroundColor:e.color}}),(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:[e.dataKey,":"]})]}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900 ml-2",children:l(e.value)})]},t)),(0,r.jsx)("div",{className:"border-t border-gray-200 mt-2 pt-2",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Total:"}),(0,r.jsx)("span",{className:"text-sm font-bold text-gray-900",children:l(e)})]})})]})}return null},ev=e=>{let{data:t,dataKeys:s,nameKey:a="name",colors:l=ep,valueFormatter:n,onBarClick:i,className:o="",height:c=400,stackId:d="a",showGrid:u=!0,showTooltip:m=!0,barRadius:x=[4,4,0,0],margin:h={top:20,right:30,left:20,bottom:60}}=e,p=(e,t)=>{i&&i(e,t)},g=e=>l[e%l.length];return(0,r.jsx)("div",{className:"w-full ".concat(o),style:{height:c},children:(0,r.jsx)(H.h,{width:"100%",height:"100%",children:(0,r.jsxs)(q.v,{data:t,margin:h,children:[u&&(0,r.jsx)(Y.q,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),(0,r.jsx)(J.K,{dataKey:a,angle:-45,textAnchor:"end",height:80,interval:0,fontSize:12,tick:{fontSize:12}}),(0,r.jsx)(X.B,{fontSize:12}),m&&(0,r.jsx)(Q.u,{content:(0,r.jsx)(eg,{valueFormatter:n})}),s.map((e,t)=>(0,r.jsx)(ee.$,{dataKey:e,stackId:d,fill:g(t),radius:t===s.length-1?x:[0,0,0,0],onClick:p},e))]})})})},ej=e=>{let{data:t,dataKey:s="value",nameKey:a="name",color:l="#3B82F6",valueFormatter:n,onBarClick:i,className:o="",height:c=400}=e;return(0,r.jsx)(ev,{data:t,dataKeys:[s],nameKey:a,colors:[l],valueFormatter:n||(e=>"$".concat(e.toLocaleString())),onBarClick:i||(()=>{}),className:o,height:c})};function ef(e){let{valueUnit:t,selectedReportType:s="Revenue by Products",chartType:l,baseMetricsData:u,autoZoomActive:g=!1,currentFocusedElement:v=0,onTotalElementsChange:j}=e,f=(0,n.v9)(e=>e.revenue),y=(0,n.v9)(e=>e.filter).valueUnit||t||"K",[b,N]=(0,a.useState)("donut"),[w,C]=(0,a.useState)("Top 10");(0,a.useEffect)(()=>{parseInt(w.replace("Top ",""))>15&&"donut"===b&&N("bar")},[w,b]);let[k]=(0,a.useState)(["Corporate","Retail","Affinity"]),[R,P]=(0,a.useState)(null),[S,T]=(0,a.useState)(!1),B=e=>"Cross-Sell Penetration"===s?e.toLocaleString("en-IN"):m(e,y),L=(()=>{if(u)return u;let e=f.baseMetrics,t="Revenue by Products"===s?1:"Revenue by Insurers"===s?.95:"Revenue by Policy Type"===s?1.08:"Revenue by Vertical"===s?.96:"Revenue by LOB"===s?1.02:.92;return{totalRevenue:e.totalRevenue*t,expenses:e.expenses*t,grossProfit:e.grossProfit*t}})(),F=()=>f.revenueByProducts||[],I=(()=>{let e=F();return"Revenue by Products"===s?e.map(e=>{if(!(null==e?void 0:e.clientTypes))return e;let t=k.reduce((t,s)=>{var r;return t+((null===(r=e.clientTypes)||void 0===r?void 0:r[s])||0)},0);return{...e,value:t,percentage:t/L.totalRevenue*100}}):e})(),A=(()=>{let e=parseInt(w.replace("Top ",""));return I.sort((e,t)=>t.value-e.value).slice(0,e).map((e,t)=>({...e,rank:t+1}))})();(0,a.useEffect)(()=>{j&&j(A.length)},[A.length,j]);let Z=g?!g||v>=A.length?A:[A[v]]:A,z=e=>{P(e),T(!0)};return(0,r.jsxs)("div",{className:"space-y-4",children:[l&&(0,r.jsx)(p,{}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsxs)(i.Zb,{className:"p-2 flex flex-col gap-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between h-16 flex-shrink-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,r.jsx)(h.Z,{className:"h-5 w-5 text-blue-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Product Analysis"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:d(s,w)})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsxs)(x.Ph,{value:w,onValueChange:C,children:[(0,r.jsx)(x.i4,{className:"w-18 h-9 text-xs text-black",children:(0,r.jsx)(x.ki,{})}),(0,r.jsx)(x.Bw,{children:c.map(e=>(0,r.jsx)(x.Ql,{value:e,children:e},e))})]})}),(0,r.jsx)(M,{currentChartType:b,onChartTypeChange:N,onDownload:e=>console.log("Download:",e),topFilter:w})]})]}),(0,r.jsx)("div",{style:{height:"21.9rem"},children:(0,r.jsx)("div",{className:"flex-1 relative min-h-[350px]",children:(0,r.jsx)("div",{className:"w-full h-full",children:(()=>{let e=Z.filter(e=>null!=e).map(e=>({id:e.id||"",name:e.name||"",value:e.value||0,percentage:e.percentage||0,color:e.color||"#3B82F6"}));switch(b){case"donut":return(0,r.jsx)(er,{data:e,onSegmentClick:z,valueFormatter:B,size:{width:621,height:o.height},valueUnit:y});case"bar":return(0,r.jsx)(em,{data:e,onBarClick:z,valueFormatter:B,dataKey:"value",nameKey:"name",color:"#3B82F6"});case"line":return(0,r.jsx)(eh,{data:e,onPointClick:z,valueFormatter:B,dataKey:"value",nameKey:"name",color:"#3B82F6"});case"stackedBar":return(0,r.jsx)(ej,{data:e,onBarClick:z,valueFormatter:B,height:o.height});default:return(0,r.jsx)(er,{data:e,onSegmentClick:z,valueFormatter:B,size:{width:400,height:o.height},valueUnit:y})}})()})})})]})}),(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsx)(D,{data:I,valueUnit:y,onItemClick:z,selectedReportType:s})})]}),(0,r.jsx)(et,{isOpen:S,onClose:()=>{T(!1),P(null)},product:R,valueUnit:t})]})}function ey(){return(0,r.jsx)(ef,{valueUnit:"₹"})}let eb={height:350},eN=["Top 5","Top 10","Top 15","Top 20","Top 30","Top 50","All"],ew=(e,t)=>"".concat(t," distribution of revenue across ").concat({"Revenue by Vertical":"business verticals","Revenue by LOB":"lines of business","Revenue by Policy Type":"policy types","Revenue by Insurers":"insurance partners","Revenue by Products":"product categories","Cross-Sell Penetration":"cross-sell combinations"}[e]||"categories"),eC={container:"bg-card text-card-foreground gap-6 rounded-xl border p-2 flex flex-col",table:{headerRow:"grid gap-4 pb-3 mb-3 border-b border-gray-200",headerCell:"text-sm font-normal text-gray-700 text-center",headerCellCenter:"text-sm font-normal text-gray-700 text-center",headerCellRight:"text-sm font-normal text-gray-700 text-center flex items-center",body:"space-y-2 flex-1 overflow-y-auto min-h-0"},productRow:{container:"grid gap-4 p-3 rounded-lg border border-gray-100 hover:bg-gray-50 transition-colors cursor-pointer items-center",productColumn:"flex items-center gap-3",colorIndicator:"w-3 h-3 rounded-full flex-shrink-0",productInfo:"min-w-0",productName:"font-medium text-gray-900 text-sm",productDescription:"text-xs text-gray-500",centerColumn:"text-center",rightColumn:"text-center",cellValue:"font-medium text-gray-900 text-sm"}};var ek=s(36141);function eR(e){let{data:t,valueUnit:s,onItemClick:l}=e,[n,o]=(0,a.useState)(null),[c,d]=(0,a.useState)("none"),u=e=>{let t=[33300,27360,23040,16740,12780,8950,7200,6100,5400,4800,4200,3600,3100,2700,2300];return t[e%t.length]||Math.floor(1e4*Math.random())+1e3},x=e=>{n===e?"none"===c?d("desc"):"desc"===c?d("asc"):(d("none"),o(null)):(o(e),d("desc"))};if(!t||!Array.isArray(t))return(0,r.jsx)(i.Zb,{className:eC.container,children:(0,r.jsx)("div",{className:"p-4 text-center text-gray-500",children:"No data available"})});let h=e=>m(e,s),p=(0,a.useMemo)(()=>n&&"none"!==c?[...t].sort((e,s)=>{let r,a;switch(n){case"policies":r=u(t.indexOf(e)),a=u(t.indexOf(s));break;case"amount":case"revenue":r=e.value,a=s.value;break;default:return 0}return"desc"===c?a-r:r-a}):t,[t,n,c]),g=e=>n!==e?"currentColor":"desc"===c?"#22c55e":"asc"===c?"#ef4444":"currentColor",v=e=>n!==e||"none"===c?"":"asc"===c?"rotate-180":"";return(0,r.jsx)(i.Zb,{className:eC.container,children:(0,r.jsxs)("div",{className:"overflow-auto relative",style:{height:"26rem"},children:[(0,r.jsxs)("div",{className:"".concat(eC.table.headerRow," sticky top-0 z-20 bg-white"),style:{gridTemplateColumns:"1.5fr 1fr 1fr 1fr"},children:[(0,r.jsx)("div",{className:"".concat(eC.table.headerCell," sticky flex items-center justify-center"),children:"Product"}),(0,r.jsxs)("div",{className:"".concat(eC.table.headerCellCenter," cursor-pointer hover:bg-gray-100 px-2 py-2 rounded transition-colors flex items-center justify-center"),onClick:()=>x("policies"),children:[(0,r.jsx)("span",{className:"mr-1",children:"No.of Policies"}),(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:g("policies"),strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"transition-all duration-200 ".concat(v("policies")),children:[(0,r.jsx)("path",{d:"M12 5v14"}),(0,r.jsx)("path",{d:"m19 12-7 7-7-7"})]})]}),(0,r.jsxs)("div",{className:"".concat(eC.table.headerCellRight," cursor-pointer hover:bg-gray-100 px-2 py-2 rounded transition-colors justify-center"),onClick:()=>x("amount"),children:[(0,r.jsx)("span",{className:"mr-1",children:"Amount"}),(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:g("amount"),strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"transition-all duration-200 ".concat(v("amount")),children:[(0,r.jsx)("path",{d:"M12 5v14"}),(0,r.jsx)("path",{d:"m19 12-7 7-7-7"})]})]}),(0,r.jsxs)("div",{className:"".concat(eC.table.headerCellRight," cursor-pointer hover:bg-gray-100 px-2 py-2 rounded transition-colors justify-center"),onClick:()=>x("revenue"),children:[(0,r.jsx)("span",{className:"mr-1",children:"Revenue"}),(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:g("revenue"),strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"transition-all duration-200 ".concat(v("revenue")),children:[(0,r.jsx)("path",{d:"M12 5v14"}),(0,r.jsx)("path",{d:"m19 12-7 7-7-7"})]})]})]}),(0,r.jsx)("div",{className:eC.table.body,children:p.map(e=>{let s=u(t.findIndex(t=>t.id===e.id));return(0,r.jsxs)("div",{onClick:()=>null==l?void 0:l(e),className:eC.productRow.container,style:{gridTemplateColumns:"1.5fr 1fr 1fr 1fr"},children:[(0,r.jsxs)("div",{className:"".concat(eC.productRow.productColumn," sticky"),children:[(0,r.jsx)("div",{className:eC.productRow.colorIndicator,style:{backgroundColor:e.color}}),(0,r.jsxs)("div",{className:eC.productRow.productInfo,children:[(0,r.jsx)("div",{className:eC.productRow.productName,children:e.name}),(0,r.jsx)("div",{className:eC.productRow.productDescription,children:e.description})]})]}),(0,r.jsx)("div",{className:eC.productRow.centerColumn,children:(0,r.jsx)("div",{className:eC.productRow.cellValue,children:s.toLocaleString()})}),(0,r.jsx)("div",{className:eC.productRow.rightColumn,children:(0,r.jsx)("div",{className:eC.productRow.cellValue,children:h(e.value)})}),(0,r.jsx)("div",{className:eC.productRow.rightColumn,children:(0,r.jsx)("div",{className:eC.productRow.cellValue,children:h(e.value)})})]},e.id)})})]})})}function eP(e){let{valueUnit:t,selectedReportType:s="Revenue by Products",chartType:l,baseMetricsData:o,autoZoomActive:c=!1,currentFocusedElement:d=0,onTotalElementsChange:u}=e,h=(0,n.v9)(e=>e.revenue),g=(0,n.v9)(e=>e.filter).valueUnit||t||"K",[v,j]=(0,a.useState)("donut"),[f,y]=(0,a.useState)("Top 10");(0,a.useEffect)(()=>{parseInt(f.replace("Top ",""))>15&&"donut"===v&&j("bar")},[f,v]);let[b]=(0,a.useState)(["Corporate","Retail","Affinity"]),[N,w]=(0,a.useState)(null),[C,k]=(0,a.useState)(!1),R=e=>"Cross-Sell Penetration"===s?e.toLocaleString("en-IN"):m(e,g),P=(()=>{if(o)return o;let e=h.baseMetrics,t="Revenue by Products"===s?1:"Revenue by Insurers"===s?.95:"Revenue by Policy Type"===s?1.08:"Revenue by Vertical"===s?.96:"Revenue by LOB"===s?1.02:.92;return{totalRevenue:e.totalRevenue*t,expenses:e.expenses*t,grossProfit:e.grossProfit*t}})(),S=()=>h.revenueByInsurers||[],T=(()=>{let e=S();return"Revenue by Products"===s?e.map(e=>{if(!(null==e?void 0:e.clientTypes))return e;let t=b.reduce((t,s)=>{var r;return t+((null===(r=e.clientTypes)||void 0===r?void 0:r[s])||0)},0);return{...e,value:t,percentage:t/P.totalRevenue*100}}):e})(),B=(()=>{let e=parseInt(f.replace("Top ",""));return T.sort((e,t)=>t.value-e.value).slice(0,e).map((e,t)=>({...e,rank:t+1}))})();(0,a.useEffect)(()=>{u&&u(B.length)},[B.length,u]);let L=c?!c||d>=B.length?B:[B[d]]:B,F=e=>{console.log("handleItemClick called with:",e),w(e),k(!0),console.log("handleItemClick - state should now be true")};return(0,r.jsxs)("div",{className:"space-y-4",children:[l&&(0,r.jsx)(p,{}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsxs)(i.Zb,{className:"p-2 flex flex-col gap-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between h-16 flex-shrink-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,r.jsx)(ek.Z,{className:"h-5 w-5 text-purple-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Insurer Analysis"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:ew(s,f)})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsxs)(x.Ph,{value:f,onValueChange:y,children:[(0,r.jsx)(x.i4,{className:"w-18 h-9 text-xs text-black",children:(0,r.jsx)(x.ki,{})}),(0,r.jsx)(x.Bw,{children:eN.map(e=>(0,r.jsx)(x.Ql,{value:e,children:e},e))})]})}),(0,r.jsx)(M,{currentChartType:v,onChartTypeChange:j,onDownload:e=>console.log("Download:",e),topFilter:f})]})]}),(0,r.jsx)("div",{style:{height:"21.9rem"},children:(0,r.jsx)("div",{className:"flex-1 relative min-h-[350px]",children:(0,r.jsx)("div",{className:"w-full h-full",children:(()=>{let e=L.filter(e=>null!=e).map(e=>({id:e.id||"",name:e.name||"",value:e.value||0,percentage:e.percentage||0,color:e.color||"#3B82F6"}));switch(v){case"donut":return(0,r.jsx)(er,{data:e,onSegmentClick:F,valueFormatter:R,size:{width:621,height:eb.height},valueUnit:g});case"bar":return(0,r.jsx)(em,{data:e,onBarClick:F,valueFormatter:R,dataKey:"value",nameKey:"name",color:"#3B82F6"});case"line":return(0,r.jsx)(eh,{data:e,onPointClick:F,valueFormatter:R,dataKey:"value",nameKey:"name",color:"#3B82F6"});case"stackedBar":return(0,r.jsx)(ej,{data:e,onBarClick:F,valueFormatter:R,height:eb.height});default:return(0,r.jsx)(er,{data:e,onSegmentClick:F,valueFormatter:R,size:{width:400,height:eb.height},valueUnit:g})}})()})})})]})}),(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsx)(eR,{data:T,valueUnit:g,onItemClick:F,selectedReportType:s})})]}),(0,r.jsx)(et,{isOpen:C,onClose:()=>{console.log("handleClosePanel called - current state:",C),k(!1),w(null),console.log("handleClosePanel - state should now be false")},product:N,valueUnit:t})]})}function eS(){return(0,r.jsx)(eP,{valueUnit:"₹"})}let eT={height:350},eB=["Top 5","Top 10","Top 15","Top 20","Top 30","Top 50","All"],eL=(e,t)=>"".concat(t," distribution of revenue across ").concat({"Revenue by Vertical":"business verticals","Revenue by LOB":"lines of business","Revenue by Policy Type":"policy types","Revenue by Insurers":"insurance partners","Revenue by Products":"product categories","Cross-Sell Penetration":"cross-sell combinations"}[e]||"categories"),eF={container:"bg-card text-card-foreground gap-6 rounded-xl border p-2 flex flex-col",table:{headerRow:"grid gap-4 pb-3 mb-3 border-b border-gray-200",headerCell:"text-sm font-normal text-gray-700 text-center",headerCellCenter:"text-sm font-normal text-gray-700 text-center",headerCellRight:"text-sm font-normal text-gray-700 text-center flex items-center",body:"space-y-2 flex-1 overflow-y-auto min-h-0"},productRow:{container:"grid gap-4 p-3 rounded-lg border border-gray-100 hover:bg-gray-50 transition-colors cursor-pointer items-center",productColumn:"flex items-center gap-3",colorIndicator:"w-3 h-3 rounded-full flex-shrink-0",productInfo:"min-w-0",productName:"font-medium text-gray-900 text-sm",productDescription:"text-xs text-gray-500",centerColumn:"text-center",rightColumn:"text-center",cellValue:"font-medium text-gray-900 text-sm"}};function eI(e){let{data:t,valueUnit:s,onItemClick:l,selectedReportType:n,className:o=""}=e,[c,d]=(0,a.useState)(null),[u,x]=(0,a.useState)("none"),h=e=>{let t=[33300,27360,23040,16740,12780,8950,7200,6100,5400,4800,4200,3600,3100,2700,2300];return t[e%t.length]||Math.floor(1e4*Math.random())+1e3},p=e=>{c===e?"none"===u?x("desc"):"desc"===u?x("asc"):(x("none"),d(null)):(d(e),x("desc"))};if(!t||!Array.isArray(t))return(0,r.jsx)(i.Zb,{className:eF.container,children:(0,r.jsx)("div",{className:"p-4 text-center text-gray-500",children:"No data available"})});let g=e=>m(e,s),v=(0,a.useMemo)(()=>c&&"none"!==u?[...t].sort((e,s)=>{let r,a;switch(c){case"policies":r=h(t.indexOf(e)),a=h(t.indexOf(s));break;case"amount":case"revenue":r=e.value,a=s.value;break;default:return 0}return"desc"===u?a-r:r-a}):t,[t,c,u]),j=e=>c!==e?"currentColor":"desc"===u?"#22c55e":"asc"===u?"#ef4444":"currentColor",f=e=>c!==e||"none"===u?"":"asc"===u?"rotate-180":"";return(0,r.jsx)(i.Zb,{className:eF.container,children:(0,r.jsxs)("div",{className:"overflow-auto relative",style:{height:"26rem"},children:[(0,r.jsxs)("div",{className:"".concat(eF.table.headerRow," sticky top-0 z-20 bg-white"),style:{gridTemplateColumns:"1.5fr 1fr 1fr 1fr"},children:[(0,r.jsx)("div",{className:"".concat(eF.table.headerCell," sticky flex items-center justify-center"),children:"Product"}),(0,r.jsxs)("div",{className:"".concat(eF.table.headerCellCenter," cursor-pointer hover:bg-gray-100 px-2 py-2 rounded transition-colors flex items-center justify-center"),onClick:()=>p("policies"),children:[(0,r.jsx)("span",{className:"mr-1",children:"No.of Policies"}),(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:j("policies"),strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"transition-all duration-200 ".concat(f("policies")),children:[(0,r.jsx)("path",{d:"M12 5v14"}),(0,r.jsx)("path",{d:"m19 12-7 7-7-7"})]})]}),(0,r.jsxs)("div",{className:"".concat(eF.table.headerCellRight," cursor-pointer hover:bg-gray-100 px-2 py-2 rounded transition-colors justify-center"),onClick:()=>p("amount"),children:[(0,r.jsx)("span",{className:"mr-1",children:"Amount"}),(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:j("amount"),strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"transition-all duration-200 ".concat(f("amount")),children:[(0,r.jsx)("path",{d:"M12 5v14"}),(0,r.jsx)("path",{d:"m19 12-7 7-7-7"})]})]}),(0,r.jsxs)("div",{className:"".concat(eF.table.headerCellRight," cursor-pointer hover:bg-gray-100 px-2 py-2 rounded transition-colors justify-center"),onClick:()=>p("revenue"),children:[(0,r.jsx)("span",{className:"mr-1",children:"Revenue"}),(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:j("revenue"),strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"transition-all duration-200 ".concat(f("revenue")),children:[(0,r.jsx)("path",{d:"M12 5v14"}),(0,r.jsx)("path",{d:"m19 12-7 7-7-7"})]})]})]}),(0,r.jsx)("div",{className:eF.table.body,children:v.map((e,s)=>{let a=h(t.findIndex(t=>t.id===e.id));return(0,r.jsxs)("div",{onClick:()=>null==l?void 0:l(e),className:eF.productRow.container,style:{gridTemplateColumns:"1.5fr 1fr 1fr 1fr"},children:[(0,r.jsxs)("div",{className:"".concat(eF.productRow.productColumn," sticky"),children:[(0,r.jsx)("div",{className:eF.productRow.colorIndicator,style:{backgroundColor:e.color}}),(0,r.jsxs)("div",{className:eF.productRow.productInfo,children:[(0,r.jsx)("div",{className:eF.productRow.productName,children:e.name}),(0,r.jsx)("div",{className:eF.productRow.productDescription,children:e.description})]})]}),(0,r.jsx)("div",{className:eF.productRow.centerColumn,children:(0,r.jsx)("div",{className:eF.productRow.cellValue,children:a.toLocaleString()})}),(0,r.jsx)("div",{className:eF.productRow.rightColumn,children:(0,r.jsx)("div",{className:eF.productRow.cellValue,children:g(e.value)})}),(0,r.jsx)("div",{className:eF.productRow.rightColumn,children:(0,r.jsx)("div",{className:eF.productRow.cellValue,children:g(e.value)})})]},e.id)})})]})})}function eM(e){let{valueUnit:t,selectedReportType:s="Revenue by Products",chartType:l,baseMetricsData:o,autoZoomActive:c=!1,currentFocusedElement:d=0,onTotalElementsChange:u}=e,h=(0,n.v9)(e=>e.revenue),g=(0,n.v9)(e=>e.filter).valueUnit||t||"K",[v,j]=(0,a.useState)("donut"),[f,y]=(0,a.useState)("Top 10");(0,a.useEffect)(()=>{parseInt(f.replace("Top ",""))>15&&"donut"===v&&j("bar")},[f,v]);let[b]=(0,a.useState)(["Corporate","Retail","Affinity"]),[N,w]=(0,a.useState)(null),[C,k]=(0,a.useState)(!1),R=e=>"Cross-Sell Penetration"===s?e.toLocaleString("en-IN"):m(e,g),S=(()=>{if(o)return o;let e=h.baseMetrics,t="Revenue by Products"===s?1:"Revenue by Insurers"===s?.95:"Revenue by Policy Type"===s?1.08:"Revenue by Vertical"===s?.96:"Revenue by LOB"===s?1.02:.92;return{totalRevenue:e.totalRevenue*t,expenses:e.expenses*t,grossProfit:e.grossProfit*t}})(),T=()=>h.revenueByLOB||[],B=(()=>{let e=T();return"Revenue by Products"===s?e.map(e=>{if(!(null==e?void 0:e.clientTypes))return e;let t=b.reduce((t,s)=>{var r;return t+((null===(r=e.clientTypes)||void 0===r?void 0:r[s])||0)},0);return{...e,value:t,percentage:t/S.totalRevenue*100}}):e})(),L=(()=>{let e=parseInt(f.replace("Top ",""));return B.sort((e,t)=>t.value-e.value).slice(0,e).map((e,t)=>({...e,rank:t+1}))})();(0,a.useEffect)(()=>{u&&u(L.length)},[L.length,u]);let F=c?!c||d>=L.length?L:[L[d]]:L,I=e=>{w(e),k(!0)};return(0,r.jsxs)("div",{className:"space-y-4",children:[l&&(0,r.jsx)(p,{}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsxs)(i.Zb,{className:"p-2 flex flex-col gap-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between h-16 flex-shrink-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,r.jsx)(P.Z,{className:"h-5 w-5 text-green-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"LOB Analysis"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:eL(s,f)})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsxs)(x.Ph,{value:f,onValueChange:y,children:[(0,r.jsx)(x.i4,{className:"w-18 h-9 text-xs text-black",children:(0,r.jsx)(x.ki,{})}),(0,r.jsx)(x.Bw,{children:eB.map(e=>(0,r.jsx)(x.Ql,{value:e,children:e},e))})]})}),(0,r.jsx)(M,{currentChartType:v,onChartTypeChange:j,onDownload:e=>console.log("Download:",e),topFilter:f})]})]}),(0,r.jsx)("div",{style:{height:"21.9rem"},children:(0,r.jsx)("div",{className:"flex-1 relative min-h-[350px]",children:(0,r.jsx)("div",{className:"w-full h-full",children:(()=>{let e=F.filter(e=>null!=e).map(e=>({id:e.id||"",name:e.name||"",value:e.value||0,percentage:e.percentage||0,color:e.color||"#3B82F6"}));switch(v){case"donut":return(0,r.jsx)(er,{data:e,onSegmentClick:I,valueFormatter:R,size:{width:621,height:eT.height},valueUnit:g});case"bar":return(0,r.jsx)(em,{data:e,onBarClick:I,valueFormatter:R,dataKey:"value",nameKey:"name",color:"#3B82F6"});case"line":return(0,r.jsx)(eh,{data:e,onPointClick:I,valueFormatter:R,dataKey:"value",nameKey:"name",color:"#3B82F6"});case"stackedBar":return(0,r.jsx)(ej,{data:e,onBarClick:I,valueFormatter:R,height:eT.height});default:return(0,r.jsx)(er,{data:e,onSegmentClick:I,valueFormatter:R,size:{width:400,height:eT.height},valueUnit:g})}})()})})})]})}),(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsx)(eI,{data:B,valueUnit:g,onItemClick:I,selectedReportType:s})})]}),(0,r.jsx)(et,{isOpen:C,onClose:()=>{console.log("handleClosePanel called - current state:",C),k(!1),w(null),console.log("handleClosePanel - state should now be false")},product:N,valueUnit:t})]})}function eD(){return(0,r.jsx)(eM,{valueUnit:"₹"})}let eA={height:350},eZ=["Top 5","Top 10","Top 15","Top 20","Top 30","Top 50","All"],ez=(e,t)=>"".concat(t," distribution of revenue across ").concat({"Revenue by Vertical":"business verticals","Revenue by LOB":"lines of business","Revenue by Policy Type":"policy types","Revenue by Insurers":"insurance partners","Revenue by Products":"product categories","Cross-Sell Penetration":"cross-sell combinations"}[e]||"categories"),eK={container:"bg-card text-card-foreground gap-6 rounded-xl border p-2 flex flex-col",table:{headerRow:"grid gap-4 pb-3 mb-3 border-b border-gray-200",headerCell:"text-sm font-normal text-gray-700 text-center",headerCellCenter:"text-sm font-normal text-gray-700 text-center",headerCellRight:"text-sm font-normal text-gray-700 text-center flex items-center",body:"space-y-2 flex-1 overflow-y-auto min-h-0"},productRow:{container:"grid gap-4 p-3 rounded-lg border border-gray-100 hover:bg-gray-50 transition-colors cursor-pointer items-center",productColumn:"flex items-center gap-3",colorIndicator:"w-3 h-3 rounded-full flex-shrink-0",productInfo:"min-w-0",productName:"font-medium text-gray-900 text-sm",productDescription:"text-xs text-gray-500",centerColumn:"text-center",rightColumn:"text-center",cellValue:"font-medium text-gray-900 text-sm"}};var eV=s(12402);function eO(e){let{data:t,valueUnit:s,onItemClick:l}=e,[n,o]=(0,a.useState)(null),[c,d]=(0,a.useState)("none"),u=e=>{let t=[33300,27360,23040,16740,12780,8950,7200,6100,5400,4800,4200,3600,3100,2700,2300];return t[e%t.length]||Math.floor(1e4*Math.random())+1e3},x=e=>{n===e?"none"===c?d("desc"):"desc"===c?d("asc"):(d("none"),o(null)):(o(e),d("desc"))};if(!t||!Array.isArray(t))return(0,r.jsx)(i.Zb,{className:eK.container,children:(0,r.jsx)("div",{className:"p-4 text-center text-gray-500",children:"No data available"})});let h=e=>m(e,s),p=(0,a.useMemo)(()=>n&&"none"!==c?[...t].sort((e,s)=>{let r,a;switch(n){case"policies":r=u(t.indexOf(e)),a=u(t.indexOf(s));break;case"amount":case"revenue":r=e.value,a=s.value;break;default:return 0}return"desc"===c?a-r:r-a}):t,[t,n,c]),g=e=>n!==e?"currentColor":"desc"===c?"#22c55e":"asc"===c?"#ef4444":"currentColor",v=e=>n!==e||"none"===c?"":"asc"===c?"rotate-180":"";return(0,r.jsx)(i.Zb,{className:eK.container,children:(0,r.jsxs)("div",{className:"overflow-auto relative",style:{height:"26rem"},children:[(0,r.jsxs)("div",{className:"".concat(eK.table.headerRow," sticky top-0 z-20 bg-white"),style:{gridTemplateColumns:"1.5fr 1fr 1fr 1fr"},children:[(0,r.jsx)("div",{className:"".concat(eK.table.headerCell," sticky flex items-center justify-center"),children:"Product"}),(0,r.jsxs)("div",{className:"".concat(eK.table.headerCellCenter," cursor-pointer hover:bg-gray-100 px-2 py-2 rounded transition-colors flex items-center justify-center"),onClick:()=>x("policies"),children:[(0,r.jsx)("span",{className:"mr-1",children:"No.of Policies"}),(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:g("policies"),strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"transition-all duration-200 ".concat(v("policies")),children:[(0,r.jsx)("path",{d:"M12 5v14"}),(0,r.jsx)("path",{d:"m19 12-7 7-7-7"})]})]}),(0,r.jsxs)("div",{className:"".concat(eK.table.headerCellRight," cursor-pointer hover:bg-gray-100 px-2 py-2 rounded transition-colors justify-center"),onClick:()=>x("amount"),children:[(0,r.jsx)("span",{className:"mr-1",children:"Amount"}),(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:g("amount"),strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"transition-all duration-200 ".concat(v("amount")),children:[(0,r.jsx)("path",{d:"M12 5v14"}),(0,r.jsx)("path",{d:"m19 12-7 7-7-7"})]})]}),(0,r.jsxs)("div",{className:"".concat(eK.table.headerCellRight," cursor-pointer hover:bg-gray-100 px-2 py-2 rounded transition-colors justify-center"),onClick:()=>x("revenue"),children:[(0,r.jsx)("span",{className:"mr-1",children:"Revenue"}),(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:g("revenue"),strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"transition-all duration-200 ".concat(v("revenue")),children:[(0,r.jsx)("path",{d:"M12 5v14"}),(0,r.jsx)("path",{d:"m19 12-7 7-7-7"})]})]})]}),(0,r.jsx)("div",{className:eK.table.body,children:p.map(e=>{let s=u(t.findIndex(t=>t.id===e.id));return(0,r.jsxs)("div",{onClick:()=>null==l?void 0:l(e),className:eK.productRow.container,style:{gridTemplateColumns:"1.5fr 1fr 1fr 1fr"},children:[(0,r.jsxs)("div",{className:"".concat(eK.productRow.productColumn," sticky"),children:[(0,r.jsx)("div",{className:eK.productRow.colorIndicator,style:{backgroundColor:e.color}}),(0,r.jsxs)("div",{className:eK.productRow.productInfo,children:[(0,r.jsx)("div",{className:eK.productRow.productName,children:e.name}),(0,r.jsx)("div",{className:eK.productRow.productDescription,children:e.description})]})]}),(0,r.jsx)("div",{className:eK.productRow.centerColumn,children:(0,r.jsx)("div",{className:eK.productRow.cellValue,children:s.toLocaleString()})}),(0,r.jsx)("div",{className:eK.productRow.rightColumn,children:(0,r.jsx)("div",{className:eK.productRow.cellValue,children:h(e.value)})}),(0,r.jsx)("div",{className:eK.productRow.rightColumn,children:(0,r.jsx)("div",{className:eK.productRow.cellValue,children:h(e.value)})})]},e.id)})})]})})}function eU(e){let{valueUnit:t,selectedReportType:s="Revenue by Products",chartType:l,baseMetricsData:o,autoZoomActive:c=!1,currentFocusedElement:d=0,onTotalElementsChange:u}=e,h=(0,n.v9)(e=>e.revenue),g=(0,n.v9)(e=>e.filter),v=g.valueUnit||t||"K";console.log("ChartsSection render - filterState.valueUnit:",g.valueUnit,"final valueUnit:",v);let[j,f]=(0,a.useState)("donut"),[y,b]=(0,a.useState)("Top 10");(0,a.useEffect)(()=>{parseInt(y.replace("Top ",""))>15&&"donut"===j&&f("bar")},[y,j]);let[N]=(0,a.useState)(["Corporate","Retail","Affinity"]),[w,C]=(0,a.useState)(null),[k,R]=(0,a.useState)(!1),P=e=>"Cross-Sell Penetration"===s?e.toLocaleString("en-IN"):m(e,v),S=(()=>{if(o)return o;let e=h.baseMetrics,t="Revenue by Products"===s?1:"Revenue by Insurers"===s?.95:"Revenue by Policy Type"===s?1.08:"Revenue by Vertical"===s?.96:"Revenue by LOB"===s?1.02:.92;return{totalRevenue:e.totalRevenue*t,expenses:e.expenses*t,grossProfit:e.grossProfit*t}})(),T=()=>h.revenueByVertical||[],B=(()=>{let e=T();return"Revenue by Products"===s?e.map(e=>{if(!(null==e?void 0:e.clientTypes))return e;let t=N.reduce((t,s)=>{var r;return t+((null===(r=e.clientTypes)||void 0===r?void 0:r[s])||0)},0);return{...e,value:t,percentage:t/S.totalRevenue*100}}):e})(),L=(()=>{let e=parseInt(y.replace("Top ",""));return B.sort((e,t)=>t.value-e.value).slice(0,e).map((e,t)=>({...e,rank:t+1}))})();(0,a.useEffect)(()=>{u&&u(L.length)},[L.length,u]);let F=c?!c||d>=L.length?L:[L[d]]:L,I=e=>{C(e),R(!0)};return(0,r.jsxs)("div",{className:"space-y-4",children:[l&&(0,r.jsx)(p,{}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsxs)(i.Zb,{className:"p-2 flex flex-col gap-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between h-16 flex-shrink-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-2 bg-indigo-100 rounded-lg",children:(0,r.jsx)(eV.Z,{className:"h-5 w-5 text-indigo-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Vertical Analysis"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:ez(s,y)})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsxs)(x.Ph,{value:y,onValueChange:b,children:[(0,r.jsx)(x.i4,{className:"w-18 h-9 text-xs text-black",children:(0,r.jsx)(x.ki,{})}),(0,r.jsx)(x.Bw,{children:eZ.map(e=>(0,r.jsx)(x.Ql,{value:e,children:e},e))})]})}),(0,r.jsx)(M,{currentChartType:j,onChartTypeChange:f,onDownload:e=>console.log("Download:",e),topFilter:y})]})]}),(0,r.jsx)("div",{style:{height:"21.9rem"},children:(0,r.jsx)("div",{className:"flex-1 relative min-h-[350px]",children:(0,r.jsx)("div",{className:"w-full h-full",children:(()=>{let e=F.filter(e=>null!=e).map(e=>({id:e.id||"",name:e.name||"",value:e.value||0,percentage:e.percentage||0,color:e.color||"#3B82F6"}));switch(j){case"donut":return(0,r.jsx)(er,{data:e,onSegmentClick:I,valueFormatter:P,size:{width:621,height:eA.height},valueUnit:v});case"bar":return(0,r.jsx)(em,{data:e,onBarClick:I,valueFormatter:P,dataKey:"value",nameKey:"name",color:"#3B82F6"});case"line":return(0,r.jsx)(eh,{data:e,onPointClick:I,valueFormatter:P,dataKey:"value",nameKey:"name",color:"#3B82F6"});case"stackedBar":return(0,r.jsx)(ej,{data:e,onBarClick:I,valueFormatter:P,height:eA.height});default:return(0,r.jsx)(er,{data:e,onSegmentClick:I,valueFormatter:P,size:{width:400,height:eA.height},valueUnit:v})}})()})})})]})}),(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsx)(eO,{data:B,valueUnit:v,onItemClick:I,selectedReportType:s})})]}),(0,r.jsx)(et,{isOpen:k,onClose:()=>{console.log("handleClosePanel called - current state:",k),R(!1),C(null),console.log("handleClosePanel - state should now be false")},product:w,valueUnit:t})]})}function eE(){return(0,r.jsx)(eU,{valueUnit:"₹"})}let eW={height:350},eH=["Top 5","Top 10","Top 15","Top 20","Top 30","Top 50","All"],eG=(e,t)=>"".concat(t," distribution of revenue across ").concat({"Revenue by Vertical":"business verticals","Revenue by LOB":"lines of business","Revenue by Policy Type":"policy types","Revenue by Insurers":"insurance partners","Revenue by Products":"product categories","Cross-Sell Penetration":"cross-sell combinations"}[e]||"categories"),e$={container:"bg-card text-card-foreground gap-6 rounded-xl border p-2 flex flex-col",table:{headerRow:"grid gap-4 pb-3 mb-3 border-b border-gray-200",headerCell:"text-sm font-normal text-gray-700 text-center",headerCellCenter:"text-sm font-normal text-gray-700 text-center",headerCellRight:"text-sm font-normal text-gray-700 text-center flex items-center",body:"space-y-2 flex-1 overflow-y-auto min-h-0"},productRow:{container:"grid gap-4 p-3 rounded-lg border border-gray-100 hover:bg-gray-50 transition-colors cursor-pointer items-center",productColumn:"flex items-center gap-3",colorIndicator:"w-3 h-3 rounded-full flex-shrink-0",productInfo:"min-w-0",productName:"font-medium text-gray-900 text-sm",productDescription:"text-xs text-gray-500",centerColumn:"text-center",rightColumn:"text-center",cellValue:"font-medium text-gray-900 text-sm"}};function e_(e){let{data:t,valueUnit:s,onItemClick:l}=e,[n,o]=(0,a.useState)(null),[c,d]=(0,a.useState)("none"),u=e=>{let t=[33300,27360,23040,16740,12780,8950,7200,6100,5400,4800,4200,3600,3100,2700,2300];return t[e%t.length]||Math.floor(1e4*Math.random())+1e3},x=e=>{n===e?"none"===c?d("desc"):"desc"===c?d("asc"):(d("none"),o(null)):(o(e),d("desc"))};if(!t||!Array.isArray(t))return(0,r.jsx)(i.Zb,{className:e$.container,children:(0,r.jsx)("div",{className:"p-4 text-center text-gray-500",children:"No data available"})});let h=e=>m(e,s),p=(0,a.useMemo)(()=>n&&"none"!==c?[...t].sort((e,s)=>{let r,a;switch(n){case"policies":r=u(t.indexOf(e)),a=u(t.indexOf(s));break;case"amount":case"revenue":r=e.value,a=s.value;break;default:return 0}return"desc"===c?a-r:r-a}):t,[t,n,c]),g=e=>n!==e?"currentColor":"desc"===c?"#22c55e":"asc"===c?"#ef4444":"currentColor",v=e=>n!==e||"none"===c?"":"asc"===c?"rotate-180":"";return(0,r.jsx)(i.Zb,{className:e$.container,children:(0,r.jsxs)("div",{className:"overflow-auto relative",style:{height:"26rem"},children:[(0,r.jsxs)("div",{className:"".concat(e$.table.headerRow," sticky top-0 z-20 bg-white"),style:{gridTemplateColumns:"1.5fr 1fr 1fr 1fr"},children:[(0,r.jsx)("div",{className:"".concat(e$.table.headerCell," sticky flex items-center justify-center"),children:"Product"}),(0,r.jsxs)("div",{className:"".concat(e$.table.headerCellCenter," cursor-pointer hover:bg-gray-100 px-2 py-2 rounded transition-colors flex items-center justify-center"),onClick:()=>x("policies"),children:[(0,r.jsx)("span",{className:"mr-1",children:"No.of Policies"}),(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:g("policies"),strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"transition-all duration-200 ".concat(v("policies")),children:[(0,r.jsx)("path",{d:"M12 5v14"}),(0,r.jsx)("path",{d:"m19 12-7 7-7-7"})]})]}),(0,r.jsxs)("div",{className:"".concat(e$.table.headerCellRight," cursor-pointer hover:bg-gray-100 px-2 py-2 rounded transition-colors justify-center"),onClick:()=>x("amount"),children:[(0,r.jsx)("span",{className:"mr-1",children:"Amount"}),(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:g("amount"),strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"transition-all duration-200 ".concat(v("amount")),children:[(0,r.jsx)("path",{d:"M12 5v14"}),(0,r.jsx)("path",{d:"m19 12-7 7-7-7"})]})]}),(0,r.jsxs)("div",{className:"".concat(e$.table.headerCellRight," cursor-pointer hover:bg-gray-100 px-2 py-2 rounded transition-colors justify-center"),onClick:()=>x("revenue"),children:[(0,r.jsx)("span",{className:"mr-1",children:"Revenue"}),(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:g("revenue"),strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"transition-all duration-200 ".concat(v("revenue")),children:[(0,r.jsx)("path",{d:"M12 5v14"}),(0,r.jsx)("path",{d:"m19 12-7 7-7-7"})]})]})]}),(0,r.jsx)("div",{className:e$.table.body,children:p.map(e=>{let s=u(t.findIndex(t=>t.id===e.id));return(0,r.jsxs)("div",{onClick:()=>null==l?void 0:l(e),className:e$.productRow.container,style:{gridTemplateColumns:"1.5fr 1fr 1fr 1fr"},children:[(0,r.jsxs)("div",{className:"".concat(e$.productRow.productColumn," sticky"),children:[(0,r.jsx)("div",{className:e$.productRow.colorIndicator,style:{backgroundColor:e.color}}),(0,r.jsxs)("div",{className:e$.productRow.productInfo,children:[(0,r.jsx)("div",{className:e$.productRow.productName,children:e.name}),(0,r.jsx)("div",{className:e$.productRow.productDescription,children:e.description})]})]}),(0,r.jsx)("div",{className:e$.productRow.centerColumn,children:(0,r.jsx)("div",{className:e$.productRow.cellValue,children:s.toLocaleString()})}),(0,r.jsx)("div",{className:e$.productRow.rightColumn,children:(0,r.jsx)("div",{className:e$.productRow.cellValue,children:h(e.value)})}),(0,r.jsx)("div",{className:e$.productRow.rightColumn,children:(0,r.jsx)("div",{className:e$.productRow.cellValue,children:h(e.value)})})]},e.id)})})]})})}function eQ(e){let{valueUnit:t,selectedReportType:s="Revenue by Products",chartType:l,baseMetricsData:o,autoZoomActive:c=!1,currentFocusedElement:d=0,onTotalElementsChange:u}=e,h=(0,n.v9)(e=>e.revenue),g=(0,n.v9)(e=>e.filter).valueUnit||t||"K",[v,j]=(0,a.useState)("donut"),[f,y]=(0,a.useState)("Top 10");(0,a.useEffect)(()=>{parseInt(f.replace("Top ",""))>15&&"donut"===v&&j("bar")},[f,v]);let[b]=(0,a.useState)(["Corporate","Retail","Affinity"]),[N,w]=(0,a.useState)(null),[C,k]=(0,a.useState)(!1),R=e=>"Cross-Sell Penetration"===s?e.toLocaleString("en-IN"):m(e,g),P=(()=>{if(o)return o;let e=h.baseMetrics,t="Revenue by Products"===s?1:"Revenue by Insurers"===s?.95:"Revenue by Policy Type"===s?1.08:"Revenue by Vertical"===s?.96:"Revenue by LOB"===s?1.02:.92;return{totalRevenue:e.totalRevenue*t,expenses:e.expenses*t,grossProfit:e.grossProfit*t}})(),S=()=>h.revenueByPolicyType||[],T=(()=>{let e=S();return"Revenue by Products"===s?e.map(e=>{if(!(null==e?void 0:e.clientTypes))return e;let t=b.reduce((t,s)=>{var r;return t+((null===(r=e.clientTypes)||void 0===r?void 0:r[s])||0)},0);return{...e,value:t,percentage:t/P.totalRevenue*100}}):e})(),L=(()=>{let e=parseInt(f.replace("Top ",""));return T.sort((e,t)=>t.value-e.value).slice(0,e).map((e,t)=>({...e,rank:t+1}))})();(0,a.useEffect)(()=>{u&&u(L.length)},[L.length,u]);let F=c?!c||d>=L.length?L:[L[d]]:L,I=e=>{w(e),k(!0)};return(0,r.jsxs)("div",{className:"space-y-4",children:[l&&(0,r.jsx)(p,{}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsxs)(i.Zb,{className:"p-2 flex flex-col gap-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between h-16 flex-shrink-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,r.jsx)(B.Z,{className:"h-5 w-5 text-green-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Policy Analysis"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:eG(s,f)})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsxs)(x.Ph,{value:f,onValueChange:y,children:[(0,r.jsx)(x.i4,{className:"w-18 h-9 text-xs text-black",children:(0,r.jsx)(x.ki,{})}),(0,r.jsx)(x.Bw,{children:eH.map(e=>(0,r.jsx)(x.Ql,{value:e,children:e},e))})]})}),(0,r.jsx)(M,{currentChartType:v,onChartTypeChange:j,onDownload:e=>console.log("Download:",e),topFilter:f})]})]}),(0,r.jsx)("div",{style:{height:"21.9rem"},children:(0,r.jsx)("div",{className:"flex-1 relative min-h-[350px]",children:(0,r.jsx)("div",{className:"w-full h-full",children:(()=>{let e=F.filter(e=>null!=e).map(e=>({id:e.id||"",name:e.name||"",value:e.value||0,percentage:e.percentage||0,color:e.color||"#3B82F6"}));switch(v){case"donut":return(0,r.jsx)(er,{data:e,onSegmentClick:I,valueFormatter:R,size:{width:621,height:eW.height},valueUnit:g});case"bar":return(0,r.jsx)(em,{data:e,onBarClick:I,valueFormatter:R,dataKey:"value",nameKey:"name",color:"#3B82F6"});case"line":return(0,r.jsx)(eh,{data:e,onPointClick:I,valueFormatter:R,dataKey:"value",nameKey:"name",color:"#3B82F6"});case"stackedBar":return(0,r.jsx)(ej,{data:e,onBarClick:I,valueFormatter:R,height:eW.height});default:return(0,r.jsx)(er,{data:e,onSegmentClick:I,valueFormatter:R,size:{width:400,height:eW.height},valueUnit:g})}})()})})})]})}),(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsx)(e_,{data:T,valueUnit:g,onItemClick:I,selectedReportType:s})})]}),(0,r.jsx)(et,{isOpen:C,onClose:()=>{console.log("handleClosePanel called - current state:",C),k(!1),w(null),console.log("handleClosePanel - state should now be false")},product:N,valueUnit:t})]})}function eq(){return(0,r.jsx)(eQ,{valueUnit:"₹"})}let eY={height:350},eJ=["Top 5","Top 10","Top 15","Top 20","Top 30","Top 50","All"],eX=(e,t)=>"".concat(t," distribution of revenue across ").concat({"Revenue by Vertical":"business verticals","Revenue by LOB":"lines of business","Revenue by Policy Type":"policy types","Revenue by Insurers":"insurance partners","Revenue by Products":"product categories","Cross-Sell Penetration":"cross-sell combinations"}[e]||"categories"),e0={container:"bg-card text-card-foreground gap-6 rounded-xl border p-2 flex flex-col",table:{headerRow:"grid gap-4 pb-3 mb-3 border-b border-gray-200",headerCell:"text-sm font-normal text-gray-700 text-center",headerCellCenter:"text-sm font-normal text-gray-700 text-center",headerCellRight:"text-sm font-normal text-gray-700 text-center flex items-center",body:"space-y-2 flex-1 overflow-y-auto min-h-0"},productRow:{container:"grid gap-4 p-3 rounded-lg border border-gray-100 hover:bg-gray-50 transition-colors cursor-pointer items-center",productColumn:"flex items-center gap-3",colorIndicator:"w-3 h-3 rounded-full flex-shrink-0",productInfo:"min-w-0",productName:"font-medium text-gray-900 text-sm",productDescription:"text-xs text-gray-500",centerColumn:"text-center",rightColumn:"text-center",cellValue:"font-medium text-gray-900 text-sm"}};function e1(e){let{data:t,valueUnit:s,onItemClick:l}=e,[n,o]=(0,a.useState)(null),[c,d]=(0,a.useState)("none"),u=e=>{let t=[33300,27360,23040,16740,12780,8950,7200,6100,5400,4800,4200,3600,3100,2700,2300];return t[e%t.length]||Math.floor(1e4*Math.random())+1e3},x=e=>{n===e?"none"===c?d("desc"):"desc"===c?d("asc"):(d("none"),o(null)):(o(e),d("desc"))};if(!t||!Array.isArray(t))return(0,r.jsx)(i.Zb,{className:e0.container,children:(0,r.jsx)("div",{className:"p-4 text-center text-gray-500",children:"No data available"})});let h=e=>m(e,s),p=(0,a.useMemo)(()=>n&&"none"!==c?[...t].sort((e,s)=>{let r,a;switch(n){case"policies":r=u(t.indexOf(e)),a=u(t.indexOf(s));break;case"amount":case"revenue":r=e.value,a=s.value;break;default:return 0}return"desc"===c?a-r:r-a}):t,[t,n,c]),g=e=>n!==e?"currentColor":"desc"===c?"#22c55e":"asc"===c?"#ef4444":"currentColor",v=e=>n!==e||"none"===c?"":"asc"===c?"rotate-180":"";return(0,r.jsx)(i.Zb,{className:e0.container,children:(0,r.jsxs)("div",{className:"overflow-auto relative",style:{height:"26rem"},children:[(0,r.jsxs)("div",{className:"".concat(e0.table.headerRow," sticky top-0 z-20 bg-white"),style:{gridTemplateColumns:"1.5fr 1fr 1fr 1fr"},children:[(0,r.jsx)("div",{className:"".concat(e0.table.headerCell," sticky flex items-center justify-center"),children:"Product"}),(0,r.jsxs)("div",{className:"".concat(e0.table.headerCellCenter," cursor-pointer hover:bg-gray-100 px-2 py-2 rounded transition-colors flex items-center justify-center"),onClick:()=>x("policies"),children:[(0,r.jsx)("span",{className:"mr-1",children:"No.of Policies"}),(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:g("policies"),strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"transition-all duration-200 ".concat(v("policies")),children:[(0,r.jsx)("path",{d:"M12 5v14"}),(0,r.jsx)("path",{d:"m19 12-7 7-7-7"})]})]}),(0,r.jsxs)("div",{className:"".concat(e0.table.headerCellRight," cursor-pointer hover:bg-gray-100 px-2 py-2 rounded transition-colors justify-center"),onClick:()=>x("amount"),children:[(0,r.jsx)("span",{className:"mr-1",children:"Amount"}),(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:g("amount"),strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"transition-all duration-200 ".concat(v("amount")),children:[(0,r.jsx)("path",{d:"M12 5v14"}),(0,r.jsx)("path",{d:"m19 12-7 7-7-7"})]})]}),(0,r.jsxs)("div",{className:"".concat(e0.table.headerCellRight," cursor-pointer hover:bg-gray-100 px-2 py-2 rounded transition-colors justify-center"),onClick:()=>x("revenue"),children:[(0,r.jsx)("span",{className:"mr-1",children:"Revenue"}),(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:g("revenue"),strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"transition-all duration-200 ".concat(v("revenue")),children:[(0,r.jsx)("path",{d:"M12 5v14"}),(0,r.jsx)("path",{d:"m19 12-7 7-7-7"})]})]})]}),(0,r.jsx)("div",{className:e0.table.body,children:p.map(e=>{let s=u(t.findIndex(t=>t.id===e.id));return(0,r.jsxs)("div",{onClick:()=>null==l?void 0:l(e),className:e0.productRow.container,style:{gridTemplateColumns:"1.5fr 1fr 1fr 1fr"},children:[(0,r.jsxs)("div",{className:"".concat(e0.productRow.productColumn," sticky"),children:[(0,r.jsx)("div",{className:e0.productRow.colorIndicator,style:{backgroundColor:e.color}}),(0,r.jsxs)("div",{className:e0.productRow.productInfo,children:[(0,r.jsx)("div",{className:e0.productRow.productName,children:e.name}),(0,r.jsx)("div",{className:e0.productRow.productDescription,children:e.description||"".concat(e.percentage.toFixed(1),"% of total revenue")})]})]}),(0,r.jsx)("div",{className:e0.productRow.centerColumn,children:(0,r.jsx)("div",{className:e0.productRow.cellValue,children:s.toLocaleString()})}),(0,r.jsx)("div",{className:e0.productRow.rightColumn,children:(0,r.jsx)("div",{className:e0.productRow.cellValue,children:h(e.value)})}),(0,r.jsx)("div",{className:e0.productRow.rightColumn,children:(0,r.jsx)("div",{className:e0.productRow.cellValue,children:h(e.value)})})]},e.id)})})]})})}function e2(e){let{valueUnit:t,selectedReportType:s="Revenue by Products",chartType:l,baseMetricsData:o,autoZoomActive:c=!1,currentFocusedElement:d=0,onTotalElementsChange:u}=e,h=(0,n.v9)(e=>e.revenue),g=(0,n.v9)(e=>e.filter),v=g.valueUnit||t||"K",j=g.valueUnit||v||"K",[f,y]=(0,a.useState)("donut"),[b,N]=(0,a.useState)("Top 10");(0,a.useEffect)(()=>{parseInt(b.replace("Top ",""))>15&&"donut"===f&&y("bar")},[b,f]);let[w]=(0,a.useState)(["Corporate","Retail","Affinity"]),[C,k]=(0,a.useState)(null),[R,P]=(0,a.useState)(!1),S=e=>"Cross-Sell Penetration"===s?e.toLocaleString("en-IN"):m(e,j),T=(()=>{if(o)return o;let e=h.baseMetrics,t="Revenue by Products"===s?1:"Revenue by Insurers"===s?.95:"Revenue by Policy Type"===s?1.08:"Revenue by Vertical"===s?.96:"Revenue by LOB"===s?1.02:.92;return{totalRevenue:e.totalRevenue*t,expenses:e.expenses*t,grossProfit:e.grossProfit*t}})(),B=()=>h.crossSellPenetration||[],L=(()=>{let e=B();return"Cross-Sell Penetration"===s?e:"Revenue by Products"===s?e.map(e=>{if(!("clientTypes"in e)||!e.clientTypes)return e;let t=w.reduce((t,s)=>{var r;return t+((null===(r=e.clientTypes)||void 0===r?void 0:r[s])||0)},0);return{...e,value:t,percentage:t/T.totalRevenue*100}}):e})(),F=(()=>{let e=parseInt(b.replace("Top ",""));return L.sort((e,t)=>t.value-e.value).slice(0,e).map((e,t)=>({...e,rank:t+1}))})();(0,a.useEffect)(()=>{u&&u(F.length)},[F.length,u]);let I=c?!c||d>=F.length?F:[F[d]]:F,D=e=>{k(e),P(!0)};return(0,r.jsxs)("div",{className:"space-y-4",children:[l&&(0,r.jsx)(p,{}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsxs)(i.Zb,{className:"p-2 flex flex-col gap-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between h-16 flex-shrink-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-2 bg-red-100 rounded-lg",children:(0,r.jsx)(K.Z,{className:"h-5 w-5 text-red-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Cross-Cell Analysis"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:eX(s,b)})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsxs)(x.Ph,{value:b,onValueChange:N,children:[(0,r.jsx)(x.i4,{className:"w-18 h-9 text-xs text-black",children:(0,r.jsx)(x.ki,{})}),(0,r.jsx)(x.Bw,{children:eJ.map(e=>(0,r.jsx)(x.Ql,{value:e,children:e},e))})]})}),(0,r.jsx)(M,{currentChartType:f,onChartTypeChange:y,onDownload:e=>console.log("Download:",e),topFilter:b})]})]}),(0,r.jsx)("div",{style:{height:"21.9rem"},children:(0,r.jsx)("div",{className:"flex-1 relative min-h-[350px]",children:(0,r.jsx)("div",{className:"w-full h-full",children:(()=>{let e=I.filter(e=>null!=e).map(e=>({id:e.id||"",name:e.name||"",value:e.value||0,percentage:e.percentage||0,color:e.color||"#3B82F6"}));switch(f){case"donut":return(0,r.jsx)(er,{data:e,onSegmentClick:D,valueFormatter:S,size:{width:621,height:eY.height},valueUnit:v});case"bar":return(0,r.jsx)(em,{data:e,onBarClick:D,valueFormatter:S,dataKey:"value",nameKey:"name",color:"#3B82F6"});case"line":return(0,r.jsx)(eh,{data:e,onPointClick:D,valueFormatter:S,dataKey:"value",nameKey:"name",color:"#3B82F6"});case"stackedBar":return(0,r.jsx)(ej,{data:e,onBarClick:D,valueFormatter:S,height:eY.height});default:return(0,r.jsx)(er,{data:e,onSegmentClick:D,valueFormatter:S,size:{width:400,height:eY.height},valueUnit:v})}})()})})})]})}),(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsx)(e1,{data:L,valueUnit:v,onItemClick:D,selectedReportType:s})})]}),(0,r.jsx)(et,{isOpen:R,onClose:()=>{console.log("handleClosePanel called - current state:",R),P(!1),k(null),console.log("handleClosePanel - state should now be false")},product:C,valueUnit:t})]})}function e4(){return(0,r.jsx)(e2,{valueUnit:"₹"})}let e3="grid grid-cols-1 lg:grid-cols-2 gap-6",e5="lg:col-span-1",e6="p-2 flex flex-col gap-1",e7="flex items-center justify-between h-16 flex-shrink-0",e9="w-18 h-9 text-xs text-black",e8="flex-1 relative min-h-[350px]",te="w-full h-full",tt={height:350},ts=["Top 5","Top 10","Top 15","Top 20","Top 30","Top 50","All"],tr=(e,t)=>"".concat(t," distribution of revenue across ").concat({"Revenue by Vertical":"business verticals","Revenue by LOB":"lines of business","Revenue by Policy Type":"policy types","Revenue by Insurers":"insurance partners","Revenue by Products":"product categories","Cross-Sell Penetration":"cross-sell combinations"}[e]||"categories"),ta={container:"bg-card text-card-foreground gap-6 rounded-xl border p-2 flex flex-col",table:{headerRow:"grid gap-4 pb-3 mb-3 border-b border-gray-200",headerCell:"text-sm font-normal text-gray-700 text-center",headerCellCenter:"text-sm font-normal text-gray-700 text-center",headerCellRight:"text-sm font-normal text-gray-700 text-center flex items-center",body:"space-y-2 flex-1 overflow-y-auto min-h-0"},productRow:{container:"grid gap-4 p-3 rounded-lg border border-gray-100 hover:bg-gray-50 transition-colors cursor-pointer items-center",productColumn:"flex items-center gap-3",colorIndicator:"w-3 h-3 rounded-full flex-shrink-0",productInfo:"min-w-0",productName:"font-medium text-gray-900 text-sm",productDescription:"text-xs text-gray-500",centerColumn:"text-center",rightColumn:"text-center",cellValue:"font-medium text-gray-900 text-sm"}};function tl(e){let{data:t,valueUnit:s,onItemClick:l}=e,[n,o]=(0,a.useState)(null),[c,d]=(0,a.useState)("none"),u=e=>{let t=[33300,27360,23040,16740,12780,8950,7200,6100,5400,4800,4200,3600,3100,2700,2300];return t[e%t.length]||Math.floor(1e4*Math.random())+1e3},x=e=>{n===e?"none"===c?d("desc"):"desc"===c?d("asc"):(d("none"),o(null)):(o(e),d("desc"))};if(!t||!Array.isArray(t))return(0,r.jsx)(i.Zb,{className:ta.container,children:(0,r.jsx)("div",{className:"p-4 text-center text-gray-500",children:"No data available"})});let h=e=>m(e,s),p=(0,a.useMemo)(()=>n&&"none"!==c?[...t].sort((e,s)=>{let r,a;switch(n){case"policies":r=u(t.indexOf(e)),a=u(t.indexOf(s));break;case"amount":case"revenue":r=e.value,a=s.value;break;default:return 0}return"desc"===c?a-r:r-a}):t,[t,n,c]),g=e=>n!==e?"currentColor":"desc"===c?"#22c55e":"asc"===c?"#ef4444":"currentColor",v=e=>n!==e||"none"===c?"":"asc"===c?"rotate-180":"";return(0,r.jsx)(i.Zb,{className:ta.container,children:(0,r.jsxs)("div",{className:"overflow-auto relative",style:{height:"26rem"},children:[(0,r.jsxs)("div",{className:"".concat(ta.table.headerRow," sticky top-0 z-20 bg-white"),style:{gridTemplateColumns:"1.5fr 1fr 1fr 1fr"},children:[(0,r.jsx)("div",{className:"".concat(ta.table.headerCell," sticky flex items-center justify-center"),children:"Product"}),(0,r.jsxs)("div",{className:"".concat(ta.table.headerCellCenter," cursor-pointer hover:bg-gray-100 px-2 py-2 rounded transition-colors flex items-center justify-center"),onClick:()=>x("policies"),children:[(0,r.jsx)("span",{className:"mr-1",children:"No.of Policies"}),(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:g("policies"),strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"transition-all duration-200 ".concat(v("policies")),children:[(0,r.jsx)("path",{d:"M12 5v14"}),(0,r.jsx)("path",{d:"m19 12-7 7-7-7"})]})]}),(0,r.jsxs)("div",{className:"".concat(ta.table.headerCellRight," cursor-pointer hover:bg-gray-100 px-2 py-2 rounded transition-colors justify-center"),onClick:()=>x("amount"),children:[(0,r.jsx)("span",{className:"mr-1",children:"Amount"}),(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:g("amount"),strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"transition-all duration-200 ".concat(v("amount")),children:[(0,r.jsx)("path",{d:"M12 5v14"}),(0,r.jsx)("path",{d:"m19 12-7 7-7-7"})]})]}),(0,r.jsxs)("div",{className:"".concat(ta.table.headerCellRight," cursor-pointer hover:bg-gray-100 px-2 py-2 rounded transition-colors justify-center"),onClick:()=>x("revenue"),children:[(0,r.jsx)("span",{className:"mr-1",children:"Revenue"}),(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:g("revenue"),strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"transition-all duration-200 ".concat(v("revenue")),children:[(0,r.jsx)("path",{d:"M12 5v14"}),(0,r.jsx)("path",{d:"m19 12-7 7-7-7"})]})]})]}),(0,r.jsx)("div",{className:ta.table.body,children:p.map(e=>{let s=u(t.findIndex(t=>t.id===e.id));return(0,r.jsxs)("div",{onClick:()=>null==l?void 0:l(e),className:ta.productRow.container,style:{gridTemplateColumns:"1.5fr 1fr 1fr 1fr"},children:[(0,r.jsxs)("div",{className:"".concat(ta.productRow.productColumn," sticky"),children:[(0,r.jsx)("div",{className:ta.productRow.colorIndicator,style:{backgroundColor:e.color}}),(0,r.jsxs)("div",{className:ta.productRow.productInfo,children:[(0,r.jsx)("div",{className:ta.productRow.productName,children:e.name}),(0,r.jsx)("div",{className:ta.productRow.productDescription,children:e.description||"".concat(e.percentage.toFixed(1),"% of total revenue")})]})]}),(0,r.jsx)("div",{className:ta.productRow.centerColumn,children:(0,r.jsx)("div",{className:ta.productRow.cellValue,children:s.toLocaleString()})}),(0,r.jsx)("div",{className:ta.productRow.rightColumn,children:(0,r.jsx)("div",{className:ta.productRow.cellValue,children:h(e.value)})}),(0,r.jsx)("div",{className:ta.productRow.rightColumn,children:(0,r.jsx)("div",{className:ta.productRow.cellValue,children:h(e.value)})})]},e.id)})})]})})}function tn(e){let{valueUnit:t,selectedReportType:s="Revenue by Products",chartType:l,baseMetricsData:o,autoZoomActive:c=!1,currentFocusedElement:d=0,onTotalElementsChange:u}=e,h=(0,n.v9)(e=>e.revenue),g=(0,n.v9)(e=>e.filter).valueUnit||t||"K",[v,j]=(0,a.useState)("donut"),[f,y]=(0,a.useState)("Top 10"),[b,N]=(0,a.useState)("donut"),[w,C]=(0,a.useState)("Top 10");(0,a.useEffect)(()=>{parseInt(f.replace("Top ",""))>15&&"donut"===v&&j("bar")},[f,v]),(0,a.useEffect)(()=>{parseInt(w.replace("Top ",""))>15&&"donut"===b&&N("bar")},[w,b]);let[k]=(0,a.useState)(["Corporate","Retail","Affinity"]),[R,S]=(0,a.useState)(null),[T,B]=(0,a.useState)(!1),L=e=>"Cross-Sell Penetration"===s?e.toLocaleString("en-IN"):m(e,g),F=(()=>{if(o)return o;let e=h.baseMetrics,t="Revenue by Products"===s?1:"Revenue by Insurers"===s?.95:"Revenue by Policy Type"===s?1.08:"Revenue by Vertical"===s?.96:"Revenue by LOB"===s?1.02:.92;return{totalRevenue:e.totalRevenue*t,expenses:e.expenses*t,grossProfit:e.grossProfit*t}})(),I=()=>h.revenueByProducts||[],D=()=>h.expenseData||[],A=(()=>{let e=I(),t=parseInt(f.replace("Top ",""));return"Revenue by Products"===s?[...e.map(e=>{if(!e.clientTypes)return{...e};let t=k.reduce((t,s)=>{var r;return t+((null===(r=e.clientTypes)||void 0===r?void 0:r[s])||0)},0);return{...e,value:t,percentage:t/F.totalRevenue*100}})].sort((e,t)=>t.value-e.value).slice(0,t).map((e,t)=>({...e,rank:t+1})):[...e].sort((e,t)=>t.value-e.value).slice(0,t).map((e,t)=>({...e,rank:t+1}))})(),Z=(()=>{let e=D(),t=parseInt(w.replace("Top ",""));return[...e].sort((e,t)=>t.value-e.value).slice(0,t).map((e,t)=>({...e,rank:t+1}))})();(0,a.useEffect)(()=>{u&&u(A.length)},[A.length,u]);let z=c?!c||d>=A.length?A:[A[d]]:A,K=c?!c||d>=Z.length?Z:[Z[d]]:Z,O=e=>{S(e),B(!0)};return(0,r.jsxs)("div",{className:"space-y-4",children:[l&&(0,r.jsx)(p,{}),(0,r.jsxs)("div",{className:e3,children:[(0,r.jsx)("div",{className:e5,children:(0,r.jsxs)(i.Zb,{className:e6,children:[(0,r.jsxs)("div",{className:e7,children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,r.jsx)(P.Z,{className:"h-5 w-5 text-green-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Revenue Analysis"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:tr(s,f)})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsxs)(x.Ph,{value:f,onValueChange:y,children:[(0,r.jsx)(x.i4,{className:e9,children:(0,r.jsx)(x.ki,{})}),(0,r.jsx)(x.Bw,{children:ts.map(e=>(0,r.jsx)(x.Ql,{value:e,children:e},e))})]})}),(0,r.jsx)(M,{currentChartType:v,onChartTypeChange:j,onDownload:e=>console.log("Download Revenue:",e),topFilter:f})]})]}),(0,r.jsx)("div",{style:{height:"21.9rem"},children:(0,r.jsx)("div",{className:e8,children:(0,r.jsx)("div",{className:te,children:(()=>{let e=z.filter(e=>null!=e).map(e=>({id:e.id||"",name:e.name||"",value:e.value||0,percentage:e.percentage||0,color:e.color||"#3B82F6"}));switch(v){case"donut":return(0,r.jsx)(er,{data:e,onSegmentClick:O,valueFormatter:L,size:{width:621,height:tt.height},valueUnit:g});case"bar":return(0,r.jsx)(em,{data:e,onBarClick:O,valueFormatter:L,dataKey:"value",nameKey:"name",color:"#3B82F6"});case"line":return(0,r.jsx)(eh,{data:e,onPointClick:O,valueFormatter:L,dataKey:"value",nameKey:"name",color:"#3B82F6"});case"stackedBar":return(0,r.jsx)(ej,{data:e,onBarClick:O,valueFormatter:L,height:tt.height});default:return(0,r.jsx)(er,{data:e,onSegmentClick:O,valueFormatter:L,size:{width:400,height:tt.height},valueUnit:g})}})()})})})]})}),(0,r.jsx)("div",{className:e5,children:(0,r.jsxs)(i.Zb,{className:e6,children:[(0,r.jsxs)("div",{className:e7,children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-2 bg-red-100 rounded-lg",children:(0,r.jsx)(V.Z,{className:"h-5 w-5 text-red-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Expenses Analysis"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Top expense categories breakdown"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsxs)(x.Ph,{value:w,onValueChange:C,children:[(0,r.jsx)(x.i4,{className:e9,children:(0,r.jsx)(x.ki,{})}),(0,r.jsx)(x.Bw,{children:ts.map(e=>(0,r.jsx)(x.Ql,{value:e,children:e},e))})]})}),(0,r.jsx)(M,{currentChartType:b,onChartTypeChange:N,onDownload:e=>console.log("Download Expenses:",e),topFilter:w})]})]}),(0,r.jsx)("div",{style:{height:"21.9rem"},children:(0,r.jsx)("div",{className:e8,children:(0,r.jsx)("div",{className:te,children:(()=>{let e=K.filter(e=>null!=e).map(e=>({id:e.id||"",name:e.name||"",value:e.value||0,percentage:e.percentage||0,color:e.color||"#3B82F6"}));switch(b){case"donut":default:return(0,r.jsx)(er,{data:e,onSegmentClick:O,valueFormatter:L,size:{width:621,height:tt.height},valueUnit:g});case"bar":return(0,r.jsx)(em,{data:e,onBarClick:O,valueFormatter:L,dataKey:"value",nameKey:"name",color:"#3B82F6"});case"line":return(0,r.jsx)(eh,{data:e,onPointClick:O,valueFormatter:L,dataKey:"value",nameKey:"name",color:"#3B82F6"});case"stackedBar":return(0,r.jsx)(ej,{data:e,onBarClick:O,valueFormatter:L,height:tt.height})}})()})})})]})})]}),(0,r.jsxs)("div",{className:e3,children:[(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsx)(tl,{data:A,valueUnit:g,onItemClick:O,selectedReportType:s,containerType:"revenue"})}),(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsx)(tl,{data:Z,valueUnit:g,onItemClick:O,selectedReportType:"Expense Categories",containerType:"expense"})})]}),(0,r.jsx)(et,{isOpen:T,onClose:()=>{B(!1),S(null)},product:R,valueUnit:t})]})}function ti(){return(0,r.jsx)(tn,{valueUnit:"₹"})}var to=s(66862);let tc=[{id:"pricing-issues",name:"Pricing Issues",value:285e4,premium:285e4,policies:1250,color:"#3B82F6",percentage:23},{id:"price-competitiveness",name:"Price Competitiveness",value:285e4,premium:285e4,policies:1250,color:"#6B7280",percentage:35.2},{id:"poor-service",name:"Poor Service",value:2356e3,premium:2356e3,policies:980,color:"#10B981",percentage:19},{id:"better-offers",name:"Better Offers Elsewhere",value:1982e3,premium:1982e3,policies:820,color:"#F59E0B",percentage:16},{id:"claims-experience",name:"Claims Experience",value:1368e3,premium:1368e3,policies:650,color:"#EF4444",percentage:11},{id:"policy-cancelled",name:"Policy Cancelled",value:1116e3,premium:1116e3,policies:520,color:"#8B5CF6",percentage:9},{id:"coverage-gaps",name:"Coverage Gaps",value:868e3,premium:868e3,policies:410,color:"#06B6D4",percentage:7},{id:"communication-issues",name:"Communication Issues",value:62e4,premium:62e4,policies:290,color:"#84CC16",percentage:5},{id:"regulatory-changes",name:"Regulatory Changes",value:62e4,premium:62e4,policies:290,color:"#F97316",percentage:5},{id:"business-closure",name:"Business Closure",value:372e3,premium:372e3,policies:175,color:"#EC4899",percentage:3},{id:"other-reasons",name:"Other Reasons",value:248e3,premium:248e3,policies:115,color:"#6B7280",percentage:2}],td={retentionRate:73.2,lostBusinessRate:26.8,premiumRetained:3850,premiumLost:1416,revenueEarned:577.5,potentialLoss:212.4};(0,to.oM)({name:"retention",initialState:{lossReasonData:tc,brokerRetentionData:[{id:"marsh-mclennan",name:"Marsh & McLennan",retentionRate:94.2,totalPolicies:15420,renewedPolicies:14526,lostPolicies:894,totalPremium:1256e5,color:"#3B82F6"},{id:"aon-plc",name:"Aon plc",retentionRate:91.8,totalPolicies:12850,renewedPolicies:11796,lostPolicies:1054,totalPremium:9875e4,color:"#10B981"},{id:"willis-towers",name:"Willis Towers Watson",retentionRate:89.5,totalPolicies:10200,renewedPolicies:9129,lostPolicies:1071,totalPremium:873e5,color:"#F59E0B"},{id:"arthur-gallagher",name:"Arthur J. Gallagher",retentionRate:87.3,totalPolicies:8950,renewedPolicies:7813,lostPolicies:1137,totalPremium:724e5,color:"#EF4444"},{id:"brown-brown",name:"Brown & Brown",retentionRate:85.1,totalPolicies:7600,renewedPolicies:6468,lostPolicies:1132,totalPremium:612e5,color:"#8B5CF6"}],insurerRetentionData:[{company:"ICICI Lombard General Insurance",totalPremium:1200,retainedPremium:912,lostPremium:288,retainedPolicies:456,lostPolicies:144,avgTicketSizeRetained:2,avgTicketSizeLost:2,retentionPercentage:76,lostPercentage:24},{company:"HDFC ERGO General Insurance",totalPremium:980,retainedPremium:725,lostPremium:255,retainedPolicies:362,lostPolicies:98,avgTicketSizeRetained:2,avgTicketSizeLost:2.6,retentionPercentage:74,lostPercentage:26},{company:"Bajaj Allianz General Insurance",totalPremium:750,retainedPremium:540,lostPremium:210,retainedPolicies:270,lostPolicies:105,avgTicketSizeRetained:2,avgTicketSizeLost:2,retentionPercentage:72,lostPercentage:28},{company:"Tata AIG General Insurance",totalPremium:650,retainedPremium:468,lostPremium:182,retainedPolicies:234,lostPolicies:91,avgTicketSizeRetained:2,avgTicketSizeLost:2,retentionPercentage:72,lostPercentage:28},{company:"New India Assurance",totalPremium:520,retainedPremium:364,lostPremium:156,retainedPolicies:182,lostPolicies:78,avgTicketSizeRetained:2,avgTicketSizeLost:2,retentionPercentage:70,lostPercentage:30},{company:"Oriental Insurance Company",totalPremium:480,retainedPremium:326,lostPremium:154,retainedPolicies:163,lostPolicies:77,avgTicketSizeRetained:2,avgTicketSizeLost:2,retentionPercentage:68,lostPercentage:32}],retentionMetrics:td},reducers:{}}).reducer;let tu=e=>{var t;return(null===(t=e.retention)||void 0===t?void 0:t.lossReasonData)||tc},tm=e=>{var t;return(null===(t=e.retention)||void 0===t?void 0:t.retentionMetrics)||td},tx={height:350},th=["Top 5","Top 10","Top 15","Top 20","Top 30","Top 50","All"],tp=(e,t)=>"".concat(t," distribution of revenue across ").concat({"Revenue by Vertical":"business verticals","Revenue by LOB":"lines of business","Revenue by Policy Type":"policy types","Revenue by Insurers":"insurance partners","Revenue by Products":"product categories","Cross-Sell Penetration":"cross-sell combinations"}[e]||"categories"),tg={container:"bg-card text-card-foreground gap-6 rounded-xl border p-2 flex flex-col",table:{headerRow:"grid gap-4 pb-3 mb-3 border-b border-gray-200",headerCell:"text-sm font-normal text-gray-700 text-center",headerCellCenter:"text-sm font-normal text-gray-700 text-center",headerCellRight:"text-sm font-normal text-gray-700 text-center flex items-center",body:"space-y-2 flex-1 overflow-y-auto min-h-0"},productRow:{container:"grid gap-4 p-3 rounded-lg border border-gray-100 hover:bg-gray-50 transition-colors cursor-pointer items-center",productColumn:"flex items-center gap-3",colorIndicator:"w-3 h-3 rounded-full flex-shrink-0",productInfo:"min-w-0",productName:"font-medium text-gray-900 text-sm",productDescription:"text-xs text-gray-500",centerColumn:"text-center",rightColumn:"text-center",cellValue:"font-medium text-gray-900 text-sm"}};var tv=s(20500),tj=s(26895),tf=s(36127);function ty(e){let{data:t,valueUnit:s,onItemClick:l}=e,[n,o]=(0,a.useState)(null),[c,d]=(0,a.useState)("none"),u=e=>{let t=[33300,27360,23040,16740,12780,8950,7200,6100,5400,4800,4200,3600,3100,2700,2300];return t[e%t.length]||Math.floor(1e4*Math.random())+1e3},x=e=>{n===e?"none"===c?d("desc"):"desc"===c?d("asc"):(d("none"),o(null)):(o(e),d("desc"))};if(!t||!Array.isArray(t))return(0,r.jsx)(i.Zb,{className:tg.container,children:(0,r.jsx)("div",{className:"p-4 text-center text-gray-500",children:"No data available"})});let h=e=>m(e,s),p=(0,a.useMemo)(()=>n&&"none"!==c?[...t].sort((e,s)=>{let r,a;switch(n){case"policies":r=u(t.indexOf(e)),a=u(t.indexOf(s));break;case"amount":case"revenue":r=e.value,a=s.value;break;default:return 0}return"desc"===c?a-r:r-a}):t,[t,n,c]),g=e=>n!==e?"currentColor":"desc"===c?"#22c55e":"asc"===c?"#ef4444":"currentColor",v=e=>n!==e||"none"===c?"":"asc"===c?"rotate-180":"";return(0,r.jsx)(i.Zb,{className:tg.container,children:(0,r.jsxs)("div",{className:"overflow-auto relative",style:{height:"26rem"},children:[(0,r.jsxs)("div",{className:"".concat(tg.table.headerRow," sticky top-0 z-20 bg-white"),style:{gridTemplateColumns:"1.5fr 1fr 1fr 1fr"},children:[(0,r.jsx)("div",{className:"".concat(tg.table.headerCell," sticky flex items-center justify-center"),children:"Product"}),(0,r.jsxs)("div",{className:"".concat(tg.table.headerCellCenter," cursor-pointer hover:bg-gray-100 px-2 py-2 rounded transition-colors flex items-center justify-center"),onClick:()=>x("policies"),children:[(0,r.jsx)("span",{className:"mr-1",children:"No.of Policies"}),(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:g("policies"),strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"transition-all duration-200 ".concat(v("policies")),children:[(0,r.jsx)("path",{d:"M12 5v14"}),(0,r.jsx)("path",{d:"m19 12-7 7-7-7"})]})]}),(0,r.jsxs)("div",{className:"".concat(tg.table.headerCellRight," cursor-pointer hover:bg-gray-100 px-2 py-2 rounded transition-colors justify-center"),onClick:()=>x("amount"),children:[(0,r.jsx)("span",{className:"mr-1",children:"Amount"}),(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:g("amount"),strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"transition-all duration-200 ".concat(v("amount")),children:[(0,r.jsx)("path",{d:"M12 5v14"}),(0,r.jsx)("path",{d:"m19 12-7 7-7-7"})]})]}),(0,r.jsxs)("div",{className:"".concat(tg.table.headerCellRight," cursor-pointer hover:bg-gray-100 px-2 py-2 rounded transition-colors justify-center"),onClick:()=>x("revenue"),children:[(0,r.jsx)("span",{className:"mr-1",children:"Revenue"}),(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:g("revenue"),strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"transition-all duration-200 ".concat(v("revenue")),children:[(0,r.jsx)("path",{d:"M12 5v14"}),(0,r.jsx)("path",{d:"m19 12-7 7-7-7"})]})]})]}),(0,r.jsx)("div",{className:tg.table.body,children:p.map(e=>{let s=u(t.findIndex(t=>t.id===e.id));return(0,r.jsxs)("div",{onClick:()=>null==l?void 0:l(e),className:tg.productRow.container,style:{gridTemplateColumns:"1.5fr 1fr 1fr 1fr"},children:[(0,r.jsxs)("div",{className:"".concat(tg.productRow.productColumn," sticky"),children:[(0,r.jsx)("div",{className:tg.productRow.colorIndicator,style:{backgroundColor:e.color}}),(0,r.jsxs)("div",{className:tg.productRow.productInfo,children:[(0,r.jsx)("div",{className:tg.productRow.productName,children:e.name}),(0,r.jsx)("div",{className:tg.productRow.productDescription,children:e.description||"".concat(e.percentage.toFixed(1),"% of total revenue")})]})]}),(0,r.jsx)("div",{className:tg.productRow.centerColumn,children:(0,r.jsx)("div",{className:tg.productRow.cellValue,children:s.toLocaleString()})}),(0,r.jsx)("div",{className:tg.productRow.rightColumn,children:(0,r.jsx)("div",{className:tg.productRow.cellValue,children:h(e.value)})}),(0,r.jsx)("div",{className:tg.productRow.rightColumn,children:(0,r.jsx)("div",{className:tg.productRow.cellValue,children:h(e.value)})})]},e.id)})})]})})}function tb(e){let{valueUnit:t,selectedReportType:s="Revenue by Products",chartType:l,baseMetricsData:o,autoZoomActive:c=!1,currentFocusedElement:d=0,onTotalElementsChange:u}=e,g=(0,n.v9)(e=>e.revenue),v=(0,n.v9)(e=>e.filter),j=(0,n.v9)(tm),f=(0,n.v9)(tu),y=v.valueUnit||t||"K",[b,N]=(0,a.useState)("donut"),[w,C]=(0,a.useState)("Top 10");(0,a.useEffect)(()=>{parseInt(w.replace("Top ",""))>15&&"donut"===b&&N("bar")},[w,b]);let[k]=(0,a.useState)(["Corporate","Retail","Affinity"]),[R,P]=(0,a.useState)(null),[S,T]=(0,a.useState)(!1),B=e=>"Cross-Sell Penetration"===s?e.toLocaleString("en-IN"):m(e,y),L=(()=>{if(o)return o;let e=g.baseMetrics,t="Revenue by Products"===s?1:"Revenue by Insurers"===s?.95:"Revenue by Policy Type"===s?1.08:"Revenue by Vertical"===s?.96:"Revenue by LOB"===s?1.02:.92;return{totalRevenue:e.totalRevenue*t,expenses:e.expenses*t,grossProfit:e.grossProfit*t}})(),F=()=>g.insurerRetentionData||[],I=(()=>{let e=F();return"Revenue by Products"===s?e.map(e=>{if(!(null==e?void 0:e.clientTypes))return e;let t=k.reduce((t,s)=>{var r;return t+((null===(r=e.clientTypes)||void 0===r?void 0:r[s])||0)},0);return{...e,value:t,percentage:t/L.totalRevenue*100}}):e})(),D=(()=>{let e=parseInt(w.replace("Top ",""));return[...I].sort((e,t)=>t.value-e.value).slice(0,e).map((e,t)=>({...e,rank:t+1}))})();(0,a.useEffect)(()=>{u&&u(D.length)},[D.length,u]);let A=c?!c||d>=D.length?D:[D[d]]:D,Z=e=>{P(e),T(!0)};return(0,r.jsxs)("div",{className:"space-y-4",children:[l&&(0,r.jsx)(p,{}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsxs)(i.Zb,{className:"p-2 flex flex-col gap-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between h-16 flex-shrink-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,r.jsx)(h.Z,{className:"h-5 w-5 text-blue-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Product Analysis"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:tp(s,w)})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsxs)(x.Ph,{value:w,onValueChange:C,children:[(0,r.jsx)(x.i4,{className:"w-18 h-9 text-xs text-black",children:(0,r.jsx)(x.ki,{})}),(0,r.jsx)(x.Bw,{children:th.map(e=>(0,r.jsx)(x.Ql,{value:e,children:e},e))})]})}),(0,r.jsx)(M,{currentChartType:b,onChartTypeChange:N,onDownload:e=>console.log("Download:",e),topFilter:w})]})]}),(0,r.jsx)("div",{style:{height:"21.9rem"},children:(0,r.jsx)("div",{className:"flex-1 relative min-h-[350px]",children:(0,r.jsx)("div",{className:"w-full h-full",children:(()=>{let e=A.filter(e=>null!=e).map(e=>({id:e.id||"",name:e.name||"",value:e.value||0,percentage:e.percentage||0,color:e.color||"#3B82F6"}));switch(b){case"donut":return(0,r.jsx)(er,{data:e,onSegmentClick:Z,valueFormatter:B,size:{width:621,height:tx.height},valueUnit:y});case"bar":return(0,r.jsx)(em,{data:e,onBarClick:Z,valueFormatter:B,dataKey:"value",nameKey:"name",color:"#3B82F6"});case"line":return(0,r.jsx)(eh,{data:e,onPointClick:Z,valueFormatter:B,dataKey:"value",nameKey:"name",color:"#3B82F6"});case"stackedBar":return(0,r.jsx)(ej,{data:e,onBarClick:Z,valueFormatter:B,height:tx.height});default:return(0,r.jsx)(er,{data:e,onSegmentClick:Z,valueFormatter:B,size:{width:400,height:tx.height},valueUnit:y})}})()})})})]})}),(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsx)(ty,{data:I,valueUnit:y,onItemClick:Z,selectedReportType:s})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,r.jsxs)(i.Zb,{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"p-2 bg-emerald-100 rounded-lg",children:(0,r.jsx)(tv.Z,{className:"w-6 text-emerald-800 h-6"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Retention Card"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Current retention performance"})]})]}),(0,r.jsx)(tj.Z,{variant:"secondary",className:"bg-emerald-100 text-emerald-800",children:"Active"})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Overall Retention"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Policies successfully retained"})]}),(0,r.jsx)("div",{className:"text-right",children:(0,r.jsxs)("span",{className:"text-xl font-bold text-gray-900",children:[j.retentionRate,"%"]})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Premium Retained"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Premium from retained policies"})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("span",{className:"text-lg font-bold text-gray-900",children:B(j.premiumRetained)}),(0,r.jsxs)("span",{className:"text-xs text-gray-500 ml-1",children:[y,"s"]})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Revenue Earned"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Commission from retained premium"})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("span",{className:"text-lg font-bold text-gray-900",children:B(j.revenueEarned)}),(0,r.jsxs)("span",{className:"text-xs text-gray-500 ml-1",children:[y,"s"]})]})]})]})]}),(0,r.jsxs)(i.Zb,{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"p-2 bg-red-100 rounded-lg",children:(0,r.jsx)(tf.Z,{className:"w-6 text-red-800 h-6"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Business Lost Card"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Lost business analysis"})]})]}),(0,r.jsx)(tj.Z,{className:"bg-red-100 text-red-800",children:"Alert"})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Business Lost"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Policies not renewed"})]}),(0,r.jsx)("div",{className:"text-right",children:(0,r.jsxs)("span",{className:"text-xl font-bold text-gray-900",children:[j.lostBusinessRate,"%"]})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Premium Lost"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Premium from lost policies"})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("span",{className:"text-lg font-bold text-gray-900",children:B(j.premiumLost)}),(0,r.jsxs)("span",{className:"text-xs text-gray-500 ml-1",children:[y,"s"]})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Potential Loss"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Revenue at risk"})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("span",{className:"text-lg font-bold text-gray-900",children:B(j.potentialLoss)}),(0,r.jsxs)("span",{className:"text-xs text-gray-500 ml-1",children:[y,"s"]})]})]})]})]})]}),(0,r.jsxs)(i.Zb,{className:"p-6 mb-6",children:[(0,r.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Complete Retention Analysis Table"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Comprehensive retention metrics by insurer"})]})}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full border-collapse",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,r.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-900",children:"Company"}),(0,r.jsx)("th",{className:"text-center py-3 px-4 font-semibold text-gray-900",children:"Retention %"}),(0,r.jsxs)("th",{className:"text-center py-3 px-4 font-semibold text-gray-900",children:["Total Premium (",y,"s)"]}),(0,r.jsxs)("th",{className:"text-center py-3 px-4 font-semibold text-gray-900",children:["Retained Premium (",y,"s)"]}),(0,r.jsxs)("th",{className:"text-center py-3 px-4 font-semibold text-gray-900",children:["Lost Premium (",y,"s)"]}),(0,r.jsx)("th",{className:"text-center py-3 px-4 font-semibold text-gray-900",children:"Retained Policies"}),(0,r.jsx)("th",{className:"text-center py-3 px-4 font-semibold text-gray-900",children:"Lost Policies"}),(0,r.jsx)("th",{className:"text-center py-3 px-4 font-semibold text-gray-900",children:"Avg Ticket (Retained)"}),(0,r.jsx)("th",{className:"text-center py-3 px-4 font-semibold text-gray-900",children:"Avg Ticket (Lost)"})]})}),(0,r.jsx)("tbody",{children:f.map(e=>(0,r.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"py-3 px-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),(0,r.jsx)("span",{className:"font-medium text-gray-900",children:e.name})]})}),(0,r.jsx)("td",{className:"text-center py-3 px-4",children:(0,r.jsxs)("span",{className:"font-semibold text-emerald-600",children:[e.percentage,"%"]})}),(0,r.jsx)("td",{className:"text-center py-3 px-4 text-black font-medium",children:B(e.premium)}),(0,r.jsx)("td",{className:"text-center py-3 px-4 text-emerald-600 font-medium",children:B(.76*e.premium)}),(0,r.jsx)("td",{className:"text-center py-3 px-4 text-red-600 font-medium",children:B(.24*e.premium)}),(0,r.jsx)("td",{className:"text-center py-3 px-4 text-emerald-600 font-medium",children:Math.round(.76*e.policies)}),(0,r.jsx)("td",{className:"text-center py-3 px-4 text-red-600 font-medium",children:Math.round(.24*e.policies)}),(0,r.jsx)("td",{className:"text-center py-3 text-black px-4 font-medium",children:"2.0"}),(0,r.jsx)("td",{className:"text-center py-3 text-black px-4 font-medium",children:"2.0"})]},e.id))})]})})]}),(0,r.jsx)(et,{isOpen:S,onClose:()=>{T(!1),P(null)},product:R,valueUnit:t})]})}function tN(){return(0,r.jsx)(tb,{valueUnit:"₹"})}let tw={height:350},tC=["Top 5","Top 10","Top 15","Top 20","Top 30","Top 50","All"],tk=(e,t)=>"".concat(t," distribution of revenue across ").concat({"Revenue by Vertical":"business verticals","Revenue by LOB":"lines of business","Revenue by Policy Type":"policy types","Revenue by Insurers":"insurance partners","Revenue by Products":"product categories","Cross-Sell Penetration":"cross-sell combinations"}[e]||"categories"),tR={container:"bg-card text-card-foreground gap-6 rounded-xl border p-2 flex flex-col",table:{headerRow:"grid gap-4 pb-3 mb-3 border-b border-gray-200",headerCell:"text-sm font-normal text-gray-700 text-center",headerCellCenter:"text-sm font-normal text-gray-700 text-center",headerCellRight:"text-sm font-normal text-gray-700 text-center flex items-center",body:"space-y-2 flex-1 overflow-y-auto min-h-0"}};function tP(e){let{data:t,valueUnit:s,onItemClick:l}=e,[n,o]=(0,a.useState)(null),[c,d]=(0,a.useState)("none"),u=e=>{let t=[33300,27360,23040,16740,12780,8950,7200,6100,5400,4800,4200,3600,3100,2700,2300];return t[e%t.length]||Math.floor(1e4*Math.random())+1e3},x=e=>{n===e?"none"===c?d("desc"):"desc"===c?d("asc"):(d("none"),o(null)):(o(e),d("desc"))},h=e=>m(e,s);if(!t||!Array.isArray(t))return(0,r.jsx)(i.Zb,{className:tR.container,children:(0,r.jsx)("div",{className:"p-4 text-center text-gray-500",children:"No data available"})});let p=(0,a.useMemo)(()=>n&&"none"!==c?[...t].sort((e,s)=>{let r,a;switch(n){case"policies":r=u(t.indexOf(e)),a=u(t.indexOf(s));break;case"amount":case"revenue":r=e.value,a=s.value;break;default:return 0}return"desc"===c?a-r:r-a}):t,[t,n,c]);return(0,r.jsx)(i.Zb,{className:tR.container,children:(0,r.jsxs)("div",{className:"overflow-auto relative",style:{height:"26rem"},children:[(0,r.jsxs)("div",{className:"".concat(tR.table.headerRow," sticky top-0 z-20 bg-white"),style:{gridTemplateColumns:"2fr 1fr"},children:[(0,r.jsx)("div",{className:"".concat(tR.table.headerCell," sticky flex items-center justify-center"),children:"Category"}),(0,r.jsxs)("div",{className:"".concat(tR.table.headerCellRight," cursor-pointer hover:bg-gray-100 px-2 py-2 rounded transition-colors justify-center"),onClick:()=>x("percentage"),children:[(0,r.jsx)("span",{className:"mr-1",children:"Percentage"}),(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"percentage"!==n?"currentColor":"desc"===c?"#22c55e":"asc"===c?"#ef4444":"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"transition-all duration-200 ".concat("percentage"!==n||"none"===c?"":"asc"===c?"rotate-180":""),children:[(0,r.jsx)("path",{d:"M12 5v14"}),(0,r.jsx)("path",{d:"m19 12-7 7-7-7"})]})]})]}),(0,r.jsx)("div",{className:tR.table.body,children:p.map(e=>(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 p-3 hover:bg-gray-50 transition-colors border-b border-gray-100",children:[(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full flex-shrink-0 mt-1",style:{backgroundColor:e.color}}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),(0,r.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[e.policies," policies"]})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("div",{className:"text-sm font-semibold text-gray-900",children:[e.percentage,"%"]}),(0,r.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:h(e.premium||e.value)})]})]},e.id))})]})})}function tS(e){let{valueUnit:t,selectedReportType:s="Retention by Broker",chartType:l,baseMetricsData:o,autoZoomActive:c=!1,currentFocusedElement:d=0,onTotalElementsChange:u}=e,g=(0,n.v9)(e=>e.revenue),v=(0,n.v9)(e=>e.filter).valueUnit||t||"K",[j,f]=(0,a.useState)("donut"),[y,b]=(0,a.useState)("Top 10");(0,a.useEffect)(()=>{parseInt(y.replace("Top ",""))>15&&"donut"===j&&f("bar")},[y,j]);let[N]=(0,a.useState)(["Corporate","Retail","Affinity"]),[w,C]=(0,a.useState)(null),[k,R]=(0,a.useState)(!1),P=e=>"Cross-Sell Penetration"===s?e.toLocaleString("en-IN"):m(e,v),S=(()=>{if(o)return o;let e=g.baseMetrics,t="Revenue by Products"===s?1:"Revenue by Insurers"===s?.95:"Revenue by Policy Type"===s?1.08:"Revenue by Vertical"===s?.96:"Revenue by LOB"===s?1.02:.92;return{totalRevenue:e.totalRevenue*t,expenses:e.expenses*t,grossProfit:e.grossProfit*t}})(),T=()=>g.brokerRetentionData||[],B=(()=>{let e=T();return"Revenue by Products"===s?e.map(e=>{if(!(null==e?void 0:e.clientTypes))return e;let t=N.reduce((t,s)=>{var r;return t+((null===(r=e.clientTypes)||void 0===r?void 0:r[s])||0)},0);return{...e,value:t,percentage:t/S.totalRevenue*100}}):e})(),L=(()=>{let e=parseInt(y.replace("Top ",""));return[...B].sort((e,t)=>t.value-e.value).slice(0,e).map((e,t)=>({...e,rank:t+1}))})();(0,a.useEffect)(()=>{u&&u(L.length)},[L.length,u]);let F=c?!c||d>=L.length?L:[L[d]]:L,I=e=>{C(e),R(!0)};return(0,r.jsxs)("div",{className:"space-y-4",children:[l&&(0,r.jsx)(p,{}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsxs)(i.Zb,{className:"p-2 flex flex-col gap-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between h-16 flex-shrink-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,r.jsx)(h.Z,{className:"h-5 w-5 text-blue-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Product Analysis"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:tk(s,y)})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsxs)(x.Ph,{value:y,onValueChange:b,children:[(0,r.jsx)(x.i4,{className:"w-18 h-9 text-xs text-black",children:(0,r.jsx)(x.ki,{})}),(0,r.jsx)(x.Bw,{children:tC.map(e=>(0,r.jsx)(x.Ql,{value:e,children:e},e))})]})}),(0,r.jsx)(M,{currentChartType:j,onChartTypeChange:f,onDownload:e=>console.log("Download:",e),topFilter:y})]})]}),(0,r.jsx)("div",{style:{height:"21.9rem"},children:(0,r.jsx)("div",{className:"flex-1 relative min-h-[350px]",children:(0,r.jsx)("div",{className:"w-full h-full",children:(()=>{let e=F.filter(e=>null!=e).map(e=>({id:e.id||"",name:e.name||"",value:e.value||0,percentage:e.percentage||0,color:e.color||"#3B82F6"}));switch(j){case"donut":return(0,r.jsx)(er,{data:e,onSegmentClick:I,valueFormatter:P,size:{width:621,height:tw.height},valueUnit:v});case"bar":return(0,r.jsx)(em,{data:e,onBarClick:I,valueFormatter:P,dataKey:"value",nameKey:"name",color:"#3B82F6"});case"line":return(0,r.jsx)(eh,{data:e,onPointClick:I,valueFormatter:P,dataKey:"value",nameKey:"name",color:"#3B82F6"});case"stackedBar":return(0,r.jsx)(ej,{data:e,onBarClick:I,valueFormatter:P,height:tw.height});default:return(0,r.jsx)(er,{data:e,onSegmentClick:I,valueFormatter:P,size:{width:400,height:tw.height},valueUnit:v})}})()})})})]})}),(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsx)(tP,{data:B,valueUnit:v,onItemClick:I,selectedReportType:s})})]}),(0,r.jsx)(et,{isOpen:k,onClose:()=>{R(!1),C(null)},product:w,valueUnit:t})]})}function tT(){return(0,r.jsx)(tS,{valueUnit:"₹"})}var tB=s(49590),tL=s(40933),tF=s(98960),tI=s(69324),tM=s(22468);function tD(e){let{className:t,...s}=e;return(0,r.jsx)(tI.fC,{"data-slot":"checkbox",className:(0,j.cn)("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground  data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:(0,r.jsx)(tI.z$,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,r.jsx)(tM.Z,{className:"size-3.5"})})})}let tA={primary:"#3B82F6",secondary:"#10B981",tertiary:"#F59E0B"},tZ={summaryMetrics:"grid grid-cols-4 lg:grid-cols-4 gap-4",metricCard:{blue:"bg-blue-50 p-4 rounded-lg border border-blue-200",green:"bg-green-50 p-4 rounded-lg border border-green-200",purple:"bg-purple-50 p-4 rounded-lg border border-purple-200",amber:"bg-amber-50 p-4 rounded-lg border border-amber-200"},metricIcon:"w-4 h-4",metricLabel:"text-sm font-medium",metricValue:"text-2xl font-semibold",metricSubtext:"text-xs mt-1",headerSection:"bg-white border border-gray-200 rounded-lg p-6",headerTitle:"text-base font-semibold text-gray-900",headerSubtitle:"text-sm text-gray-600 mt-1",chartContainer:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-4",chartCard:"bg-white border border-gray-200 rounded-lg p-6",chartTitle:"text-base font-medium text-gray-900",productPenetrationCard:"bg-white border border-gray-200 rounded-lg p-6 h-[85vh] overflow-auto relative",productItem:"space-y-2",productHeader:"flex items-center justify-between",productTitle:"font-medium text-gray-900",productAvg:"text-sm text-blue-600 font-medium",productDetails:"space-y-1",productRow:"flex justify-between text-sm",productLabel:"text-gray-600",productPercentage:"text-gray-500",progressBar:"w-full bg-gray-200 rounded-full h-2",progressFill:"h-2 rounded-full bg-gradient-to-r from-blue-400 to-blue-600",legend:"flex items-center justify-center gap-6 mt-4 pt-4 border-t border-gray-100",legendItem:"flex items-center gap-2",legendColor:"w-3 h-3 rounded-sm",legendText:"text-sm text-gray-600",insightsSection:"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-lg p-6",insightsTitle:"text-base font-medium text-gray-900 mb-4",insightsGrid:"grid grid-cols-1 lg:grid-cols-3 gap-6",insightCategory:"space-y-3",insightHeader:"font-medium",insightList:"text-sm space-y-1",insightItem:"text-gray-600",tooltip:"bg-white p-4 border border-gray-200 rounded-lg shadow-lg",tooltipTitle:"font-medium text-gray-900 mb-3",tooltipContent:"space-y-2 text-sm",tooltipRow:"flex justify-between",tooltipLabel:"text-gray-600",tooltipValue:"font-medium",tooltipDivider:"border-t border-gray-200 pt-2",tooltipProductHeader:"font-medium text-gray-700 mb-2",tooltipProductRow:"space-y-1",tooltipProductItem:"flex justify-between",tooltipProductColor:"w-3 h-3 rounded-sm",tooltipHighlight:"text-blue-600 font-medium"},tz={margin:{top:20,right:30,left:20,bottom:5},height:380,barRadius:[4,4,0,0],stackedBarRadius:[0,0,0,0],topStackedBarRadius:[4,4,0,0]};function tK(e){let{durationData:t}=e;return(0,r.jsxs)("div",{className:tZ.productPenetrationCard,children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,r.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,r.jsx)(h.Z,{className:"h-5 w-5 text-green-600"})}),(0,r.jsx)("h4",{className:tZ.chartTitle,children:"Product Penetration by Duration"})]}),(0,r.jsx)("div",{className:"space-y-4",children:t.map((e,t)=>(0,r.jsxs)("div",{className:tZ.productItem,children:[(0,r.jsxs)("div",{className:tZ.productHeader,children:[(0,r.jsx)("span",{className:tZ.productTitle,children:e.duration}),(0,r.jsxs)("span",{className:tZ.productAvg,children:[e.avgProducts," avg products"]})]}),(0,r.jsxs)("div",{className:tZ.productDetails,children:[(0,r.jsxs)("div",{className:tZ.productRow,children:[(0,r.jsxs)("span",{className:tZ.productLabel,children:["1 Product: ",e.productDistribution.oneProduct]}),(0,r.jsxs)("span",{className:tZ.productPercentage,children:[(e.productDistribution.oneProduct/e.customers*100).toFixed(1),"%"]})]}),(0,r.jsxs)("div",{className:tZ.productRow,children:[(0,r.jsxs)("span",{className:tZ.productLabel,children:["2 Products: ",e.productDistribution.twoProducts]}),(0,r.jsxs)("span",{className:tZ.productPercentage,children:[(e.productDistribution.twoProducts/e.customers*100).toFixed(1),"%"]})]}),(0,r.jsxs)("div",{className:tZ.productRow,children:[(0,r.jsxs)("span",{className:tZ.productLabel,children:["3+ Products: ",e.productDistribution.threeOrMore]}),(0,r.jsxs)("span",{className:tZ.productPercentage,children:[(e.productDistribution.threeOrMore/e.customers*100).toFixed(1),"%"]})]})]}),(0,r.jsx)("div",{className:tZ.progressBar,children:(0,r.jsx)("div",{className:tZ.progressFill,style:{width:"".concat((e.productDistribution.twoProducts+e.productDistribution.threeOrMore)/e.customers*100,"%")}})})]},t))})]})}var tV=s(53669),tO=s(8077);function tU(e){let{valueUnit:t}=e,[s,l]=(0,a.useState)(!0),i=(0,n.v9)(tO.cb),o=(0,n.v9)(tO.dV),c=(0,n.v9)(tO.ly),d=e=>t===tV.rL.CRORE?"₹".concat((e/1e7).toFixed(2)):t===tV.rL.LAKH?"₹".concat((e/1e5).toFixed(2)):t===tV.rL.THOUSANDS?"₹".concat((e/1e3).toFixed(2)):"₹".concat(e.toLocaleString("en-IN"));return(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:tZ.summaryMetrics,children:[(0,r.jsxs)("div",{className:tZ.metricCard.blue,children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)(U.Z,{className:"".concat(tZ.metricIcon," text-blue-600")}),(0,r.jsx)("span",{className:"".concat(tZ.metricLabel," text-blue-900"),children:"Total Customers"})]}),(0,r.jsx)("div",{className:"".concat(tZ.metricValue," text-blue-600"),children:o.totalCustomers.toLocaleString()}),(0,r.jsx)("div",{className:"".concat(tZ.metricSubtext," text-blue-700"),children:"Across all durations"})]}),(0,r.jsxs)("div",{className:tZ.metricCard.green,children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)(tB.Z,{className:"".concat(tZ.metricIcon," text-green-600")}),(0,r.jsx)("span",{className:"".concat(tZ.metricLabel," text-green-900"),children:"Retention Rate"})]}),(0,r.jsxs)("div",{className:"".concat(tZ.metricValue," text-green-600"),children:[o.retentionRate,"%"]}),(0,r.jsx)("div",{className:"".concat(tZ.metricSubtext," text-green-700"),children:"Overall retention"})]}),(0,r.jsxs)("div",{className:tZ.metricCard.purple,children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)(V.Z,{className:"".concat(tZ.metricIcon," text-purple-600")}),(0,r.jsx)("span",{className:"".concat(tZ.metricLabel," text-purple-900"),children:"Avg Premium"})]}),(0,r.jsx)("div",{className:"".concat(tZ.metricValue," text-purple-600"),children:d(o.avgPremium)}),(0,r.jsx)("div",{className:"".concat(tZ.metricSubtext," text-purple-700"),children:"Per customer"})]}),(0,r.jsxs)("div",{className:tZ.metricCard.amber,children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)(z.Z,{className:"".concat(tZ.metricIcon," text-amber-600")}),(0,r.jsx)("span",{className:"".concat(tZ.metricLabel," text-amber-900"),children:"Cross-sell Success"})]}),(0,r.jsxs)("div",{className:"".concat(tZ.metricValue," text-amber-600"),children:[o.crossSellSuccess,"%"]}),(0,r.jsx)("div",{className:"".concat(tZ.metricSubtext," text-amber-700"),children:"Multi-product rate"})]})]}),(0,r.jsxs)("div",{className:tZ.headerSection,children:[(0,r.jsxs)("div",{className:"flex items-center justify-between ",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:tZ.headerTitle,children:"Customer Relationship Duration & Product Analysis"}),(0,r.jsx)("p",{className:tZ.headerSubtitle,children:"Distribution of customers by relationship length with product penetration insights"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(tD,{id:"show-products",checked:s,onCheckedChange:l,className:"data-[state=checked]:bg-blue-600 data-[state=checked]:border-blue-600"}),(0,r.jsx)("label",{htmlFor:"show-products",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Number of Products"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(tL.Z,{className:"w-5 h-5 text-blue-600"}),(0,r.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["Avg: ",o.avgRelationshipDuration," years"]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(tF.Z,{className:"w-5 h-5 text-green-600"}),(0,r.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["Avg: ",o.avgProductsPerCustomer," products"]})]})]})]}),(0,r.jsxs)("div",{className:tZ.chartContainer,children:[(0,r.jsxs)("div",{className:tZ.chartCard,children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,r.jsx)("div",{className:"p-2 bg-orange-100 rounded-lg",children:s?(0,r.jsx)(tF.Z,{className:"w-5 h-5 text-orange-600"}):(0,r.jsx)(U.Z,{className:"w-5 h-5 text-orange-600"})}),(0,r.jsx)("h4",{className:tZ.chartTitle,children:s?"Customer Distribution by Relationship Duration & Product Holdings":"Customer Distribution by Relationship Duration"})]}),(0,r.jsx)(H.h,{width:"100%",height:tz.height,children:(0,r.jsxs)(q.v,{data:i,margin:tz.margin,children:[(0,r.jsx)(Y.q,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),(0,r.jsx)(J.K,{dataKey:"duration"}),(0,r.jsx)(X.B,{}),(0,r.jsx)(Q.u,{content:e=>{let{active:t,payload:a,label:l}=e;if(t&&a&&a.length){let e=a[0].payload;if(!s)return(0,r.jsxs)("div",{className:"".concat(tZ.tooltip," min-w-64"),children:[(0,r.jsx)("p",{className:tZ.tooltipTitle,children:l}),(0,r.jsxs)("div",{className:tZ.tooltipContent,children:[(0,r.jsxs)("div",{className:tZ.tooltipRow,children:[(0,r.jsx)("span",{className:tZ.tooltipLabel,children:"Customers:"}),(0,r.jsx)("span",{className:tZ.tooltipValue,children:e.customers.toLocaleString()})]}),(0,r.jsxs)("div",{className:tZ.tooltipRow,children:[(0,r.jsx)("span",{className:tZ.tooltipLabel,children:"Percentage:"}),(0,r.jsxs)("span",{className:tZ.tooltipValue,children:[e.percentage,"%"]})]}),(0,r.jsxs)("div",{className:tZ.tooltipRow,children:[(0,r.jsx)("span",{className:tZ.tooltipLabel,children:"Avg Premium:"}),(0,r.jsx)("span",{className:tZ.tooltipValue,children:d(e.avgPremium)})]})]})]});{let t=e.productDistribution.oneProduct+e.productDistribution.twoProducts+e.productDistribution.threeOrMore;return(0,r.jsxs)("div",{className:"".concat(tZ.tooltip," min-w-72"),children:[(0,r.jsx)("p",{className:tZ.tooltipTitle,children:l}),(0,r.jsxs)("div",{className:tZ.tooltipContent,children:[(0,r.jsxs)("div",{className:tZ.tooltipRow,children:[(0,r.jsx)("span",{className:tZ.tooltipLabel,children:"Total Customers:"}),(0,r.jsx)("span",{className:tZ.tooltipValue,children:e.customers.toLocaleString()})]}),(0,r.jsxs)("div",{className:tZ.tooltipRow,children:[(0,r.jsx)("span",{className:tZ.tooltipLabel,children:"Avg Premium:"}),(0,r.jsx)("span",{className:tZ.tooltipValue,children:d(e.avgPremium)})]}),(0,r.jsxs)("div",{className:tZ.tooltipDivider,children:[(0,r.jsx)("p",{className:tZ.tooltipProductHeader,children:"Product Distribution:"}),(0,r.jsxs)("div",{className:tZ.tooltipProductRow,children:[(0,r.jsxs)("div",{className:tZ.tooltipProductItem,children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"".concat(tZ.tooltipProductColor," bg-blue-500")}),(0,r.jsx)("span",{className:tZ.tooltipLabel,children:"1 Product:"})]}),(0,r.jsxs)("span",{className:tZ.tooltipValue,children:[e.productDistribution.oneProduct," (",(e.productDistribution.oneProduct/t*100).toFixed(1),"%)"]})]}),(0,r.jsxs)("div",{className:tZ.tooltipProductItem,children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"".concat(tZ.tooltipProductColor," bg-green-500")}),(0,r.jsx)("span",{className:tZ.tooltipLabel,children:"2 Products:"})]}),(0,r.jsxs)("span",{className:tZ.tooltipValue,children:[e.productDistribution.twoProducts," (",(e.productDistribution.twoProducts/t*100).toFixed(1),"%)"]})]}),(0,r.jsxs)("div",{className:tZ.tooltipProductItem,children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"".concat(tZ.tooltipProductColor," bg-amber-500")}),(0,r.jsx)("span",{className:tZ.tooltipLabel,children:"3+ Products:"})]}),(0,r.jsxs)("span",{className:tZ.tooltipValue,children:[e.productDistribution.threeOrMore," (",(e.productDistribution.threeOrMore/t*100).toFixed(1),"%)"]})]})]})]}),(0,r.jsx)("div",{className:tZ.tooltipDivider,children:(0,r.jsxs)("div",{className:tZ.tooltipRow,children:[(0,r.jsx)("span",{className:tZ.tooltipHighlight,children:"Avg Products:"}),(0,r.jsx)("span",{className:tZ.tooltipHighlight,children:e.avgProducts})]})})]})]})}}return null}}),s?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ee.$,{dataKey:"productDistribution.oneProduct",stackId:"products",fill:tA.primary,name:"1 Product",radius:tz.stackedBarRadius}),(0,r.jsx)(ee.$,{dataKey:"productDistribution.twoProducts",stackId:"products",fill:tA.secondary,name:"2 Products",radius:tz.stackedBarRadius}),(0,r.jsx)(ee.$,{dataKey:"productDistribution.threeOrMore",stackId:"products",fill:tA.tertiary,name:"3+ Products",radius:tz.topStackedBarRadius})]}):(0,r.jsx)(ee.$,{dataKey:"customers",fill:tA.primary,radius:tz.barRadius})]})}),s&&(0,r.jsxs)("div",{className:tZ.legend,children:[(0,r.jsxs)("div",{className:tZ.legendItem,children:[(0,r.jsx)("div",{className:tZ.legendColor,style:{backgroundColor:tA.primary}}),(0,r.jsx)("span",{className:tZ.legendText,children:"1 Product"})]}),(0,r.jsxs)("div",{className:tZ.legendItem,children:[(0,r.jsx)("div",{className:tZ.legendColor,style:{backgroundColor:tA.secondary}}),(0,r.jsx)("span",{className:tZ.legendText,children:"2 Products"})]}),(0,r.jsxs)("div",{className:tZ.legendItem,children:[(0,r.jsx)("div",{className:tZ.legendColor,style:{backgroundColor:tA.tertiary}}),(0,r.jsx)("span",{className:tZ.legendText,children:"3+ Products"})]})]})]}),(0,r.jsx)(tK,{durationData:i})]})]}),(0,r.jsxs)("div",{className:tZ.insightsSection,children:[(0,r.jsx)("h4",{className:tZ.insightsTitle,children:"Key Relationship & Product Insights"}),(0,r.jsx)("div",{className:tZ.insightsGrid,children:c.map((e,t)=>(0,r.jsxs)("div",{className:tZ.insightCategory,children:[(0,r.jsx)("h5",{className:"".concat(tZ.insightHeader," text-").concat(e.color,"-800"),children:e.title}),(0,r.jsx)("ul",{className:tZ.insightList,children:e.insights.map((e,t)=>(0,r.jsx)("li",{className:tZ.insightItem,children:e},t))})]},t))})]})]})}var tE=s(19947);let tW={height:350},tH=["Top 5","Top 10","Top 15","Top 20","Top 30","Top 50","All"],tG=(e,t)=>"".concat(t," distribution of revenue across ").concat({"Revenue by Vertical":"business verticals","Revenue by LOB":"lines of business","Revenue by Policy Type":"policy types","Revenue by Insurers":"insurance partners","Revenue by Products":"product categories","Cross-Sell Penetration":"cross-sell combinations"}[e]||"categories"),t$={container:"bg-card text-card-foreground gap-6 rounded-xl border p-2 flex flex-col",table:{headerRow:"grid gap-4 pb-3 mb-3 border-b border-gray-200",headerCell:"text-sm font-normal text-gray-700 text-center",headerCellCenter:"text-sm font-normal text-gray-700 text-center",headerCellRight:"text-sm font-normal text-gray-700 text-center flex items-center",body:"space-y-2 flex-1 overflow-y-auto min-h-0"},productRow:{container:"grid gap-4 p-3 rounded-lg border border-gray-100 hover:bg-gray-50 transition-colors cursor-pointer items-center",productColumn:"flex items-center gap-3",colorIndicator:"w-3 h-3 rounded-full flex-shrink-0",productInfo:"min-w-0",productName:"font-medium text-gray-900 text-sm",productDescription:"text-xs text-gray-500",centerColumn:"text-center",rightColumn:"text-center",cellValue:"font-medium text-gray-900 text-sm"}};function t_(e){let{data:t,valueUnit:s,onItemClick:l}=e,[n,o]=(0,a.useState)(null),[c,d]=(0,a.useState)("none"),u=e=>{let t=[33300,27360,23040,16740,12780,8950,7200,6100,5400,4800,4200,3600,3100,2700,2300];return t[e%t.length]||Math.floor(1e4*Math.random())+1e3},m=e=>{n===e?"none"===c?d("desc"):"desc"===c?d("asc"):(d("none"),o(null)):(o(e),d("desc"))};if(!t||!Array.isArray(t))return(0,r.jsx)(i.Zb,{className:t$.container,children:(0,r.jsx)("div",{className:"p-4 text-center text-gray-500",children:"No data available"})});let x=(0,a.useMemo)(()=>n&&"none"!==c?[...t].sort((e,s)=>{let r,a;switch(n){case"policies":r=u(t.indexOf(e)),a=u(t.indexOf(s));break;case"amount":case"revenue":r=e.value,a=s.value;break;default:return 0}return"desc"===c?a-r:r-a}):t,[t,n,c]),h=e=>n!==e?"currentColor":"desc"===c?"#22c55e":"asc"===c?"#ef4444":"currentColor",p=e=>n!==e||"none"===c?"":"asc"===c?"rotate-180":"";return(0,r.jsx)(i.Zb,{className:t$.container,children:(0,r.jsxs)("div",{className:"overflow-auto relative",style:{height:"26rem"},children:[(0,r.jsxs)("div",{className:"".concat(t$.table.headerRow," sticky top-0 z-20 bg-white"),style:{gridTemplateColumns:"1.5fr 1fr 1fr 1fr"},children:[(0,r.jsx)("div",{className:"".concat(t$.table.headerCell," sticky flex items-center justify-center"),children:"Product"}),(0,r.jsxs)("div",{className:"".concat(t$.table.headerCellCenter," cursor-pointer hover:bg-gray-100 px-2 py-2 rounded transition-colors flex items-center justify-center"),onClick:()=>m("policies"),children:[(0,r.jsx)("span",{className:"mr-1",children:"Customers"}),(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:h("policies"),strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"transition-all duration-200 ".concat(p("policies")),children:[(0,r.jsx)("path",{d:"M12 5v14"}),(0,r.jsx)("path",{d:"m19 12-7 7-7-7"})]})]}),(0,r.jsxs)("div",{className:"".concat(t$.table.headerCellRight," cursor-pointer hover:bg-gray-100 px-2 py-2 rounded transition-colors justify-center"),onClick:()=>m("amount"),children:[(0,r.jsx)("span",{className:"mr-1",children:"Premium"}),(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:h("amount"),strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"transition-all duration-200 ".concat(p("amount")),children:[(0,r.jsx)("path",{d:"M12 5v14"}),(0,r.jsx)("path",{d:"m19 12-7 7-7-7"})]})]}),(0,r.jsxs)("div",{className:"".concat(t$.table.headerCellRight," cursor-pointer hover:bg-gray-100 px-2 py-2 rounded transition-colors justify-center"),onClick:()=>m("revenue"),children:[(0,r.jsx)("span",{className:"mr-1",children:"Percentage"}),(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:h("revenue"),strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"transition-all duration-200 ".concat(p("revenue")),children:[(0,r.jsx)("path",{d:"M12 5v14"}),(0,r.jsx)("path",{d:"m19 12-7 7-7-7"})]})]})]}),(0,r.jsx)("div",{className:t$.table.body,children:x.map(e=>(u(t.findIndex(t=>t.id===e.id)),(0,r.jsxs)("div",{onClick:()=>null==l?void 0:l(e),className:t$.productRow.container,style:{gridTemplateColumns:"1.5fr 1fr 1fr 1fr"},children:[(0,r.jsxs)("div",{className:"".concat(t$.productRow.productColumn," sticky"),children:[(0,r.jsx)("div",{className:t$.productRow.colorIndicator,style:{backgroundColor:e.color}}),(0,r.jsxs)("div",{className:t$.productRow.productInfo,children:[(0,r.jsx)("div",{className:t$.productRow.productName,children:e.name}),(0,r.jsx)("div",{className:t$.productRow.productDescription,children:e.description||"".concat(e.percentage.toFixed(1),"% of total revenue")})]})]}),(0,r.jsx)("div",{className:t$.productRow.centerColumn,children:(0,r.jsx)("div",{className:t$.productRow.cellValue,children:e.value.toLocaleString("en-IN")})}),(0,r.jsx)("div",{className:t$.productRow.rightColumn,children:(0,r.jsx)("div",{className:t$.productRow.cellValue,children:e.avgPremium?"₹".concat((e.avgPremium/1e3).toFixed(0),"K"):"N/A"})}),(0,r.jsx)("div",{className:t$.productRow.rightColumn,children:(0,r.jsxs)("div",{className:t$.productRow.cellValue,children:[e.percentage.toFixed(1),"%"]})})]},e.id)))})]})})}function tQ(e){let{valueUnit:t,selectedReportType:s="Number of Products",chartType:l,baseMetricsData:o,autoZoomActive:c=!1,currentFocusedElement:d=0,onTotalElementsChange:u}=e,m=(0,n.v9)(e=>e.revenue),g=(0,n.v9)(e=>e.filter),v=(0,n.v9)(tE.bp),j=g.valueUnit||t||"K",[f,y]=(0,a.useState)("donut"),[b,N]=(0,a.useState)("Top 10");(0,a.useEffect)(()=>{parseInt(b.replace("Top ",""))>15&&"donut"===f&&y("bar")},[b,f]);let[w]=(0,a.useState)(["Corporate","Retail","Affinity"]),[C,k]=(0,a.useState)(null),[R,P]=(0,a.useState)(!1),S=e=>e.toLocaleString("en-IN");(()=>{if(o)return;let e=m.baseMetrics;return e.totalRevenue,e.expenses,e.grossProfit})();let T=v||[],B=(()=>{let e=parseInt(b.replace("Top ",""));return[...T].sort((e,t)=>t.value-e.value).slice(0,e).map((e,t)=>({...e,rank:t+1}))})();(0,a.useEffect)(()=>{u&&u(B.length)},[B.length,u]);let L=c?!c||d>=B.length?B:[B[d]]:B,F=e=>{k(e),P(!0)};return(0,r.jsxs)("div",{className:"space-y-4",children:[l&&(0,r.jsx)(p,{}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsxs)(i.Zb,{className:"p-2 flex flex-col gap-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between h-16 flex-shrink-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,r.jsx)(h.Z,{className:"h-5 w-5 text-blue-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Number of Products Analysis"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:tG(s,b)})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsxs)(x.Ph,{value:b,onValueChange:N,children:[(0,r.jsx)(x.i4,{className:"w-18 h-9 text-xs text-black",children:(0,r.jsx)(x.ki,{})}),(0,r.jsx)(x.Bw,{children:tH.map(e=>(0,r.jsx)(x.Ql,{value:e,children:e},e))})]})}),(0,r.jsx)(M,{currentChartType:f,onChartTypeChange:y,onDownload:e=>console.log("Download:",e),topFilter:b})]})]}),(0,r.jsx)("div",{style:{height:"21.9rem"},children:(0,r.jsx)("div",{className:"flex-1 relative min-h-[350px]",children:(0,r.jsx)("div",{className:"w-full h-full",children:(()=>{let e=L.filter(e=>null!=e).map(e=>({id:e.id||"",name:e.name||"",value:e.value||0,percentage:e.percentage||0,color:e.color||"#3B82F6"}));switch(f){case"donut":return(0,r.jsx)(er,{data:e,onSegmentClick:F,valueFormatter:S,size:{width:621,height:tW.height},valueUnit:j});case"bar":return(0,r.jsx)(em,{data:e,onBarClick:F,valueFormatter:S,dataKey:"value",nameKey:"name",color:"#3B82F6"});case"line":return(0,r.jsx)(eh,{data:e,onPointClick:F,valueFormatter:S,dataKey:"value",nameKey:"name",color:"#3B82F6"});case"stackedBar":return(0,r.jsx)(ej,{data:e,onBarClick:F,valueFormatter:S,height:tW.height});default:return(0,r.jsx)(er,{data:e,onSegmentClick:F,valueFormatter:S,size:{width:400,height:tW.height},valueUnit:j})}})()})})})]})}),(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsx)(t_,{data:T,valueUnit:j,onItemClick:F,selectedReportType:s})})]}),(0,r.jsx)(et,{isOpen:R,onClose:()=>{P(!1),k(null)},product:C,valueUnit:t})]})}function tq(){return(0,r.jsx)(tQ,{valueUnit:"₹"})}var tY=s(48281);function tJ(e){let{valueUnit:t}=e,s=e=>"Crore"===t?"₹".concat((e/1e7).toFixed(2)):"Lakh"===t?"₹".concat((e/1e5).toFixed(2)):"Thousands"===t?"₹".concat((e/1e3).toFixed(2)):"₹".concat(e.toLocaleString("en-IN")),a="#3B82F6",l=[{tier:"High Value",customers:400,percentage:5,avgPremium:25e5,totalPremium:1e10,contributionPercentage:15.2,growthRate:8.5,retentionRate:95.2,color:"#EF4444"},{tier:"Mid Value",customers:1200,percentage:15,avgPremium:125e4,totalPremium:15e9,contributionPercentage:22.7,growthRate:12.3,retentionRate:89.4,color:"#8B5CF6"},{tier:"Standard",customers:2400,percentage:30,avgPremium:75e4,totalPremium:18e9,contributionPercentage:27.3,growthRate:15.7,retentionRate:82.1,color:"#F59E0B"},{tier:"Basic",customers:4e3,percentage:50,avgPremium:575e3,totalPremium:23e9,contributionPercentage:34.8,growthRate:18.9,retentionRate:76.8,color:a}];return(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsx)("div",{className:"grid grid-cols-4 lg:grid-cols-4 gap-4",children:l.map((e,t)=>(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),(0,r.jsx)("span",{className:"font-medium text-gray-900",children:e.tier})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"text-2xl font-semibold",style:{color:e.color},children:e.customers.toLocaleString()}),(0,r.jsxs)("div",{className:"text-xs text-gray-600",children:[e.percentage,"% of customers"]}),(0,r.jsxs)("div",{className:"text-sm font-medium text-gray-700",children:[s(e.avgPremium)," avg premium"]}),e.contributionPercentage>0&&(0,r.jsxs)("div",{className:"text-xs text-green-600 font-medium",children:[e.contributionPercentage,"% of total premium"]})]})]},t))}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Premium Contribution by Customer Analysis"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Customer value segmentation with premium contribution insights and growth opportunities"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(U.Z,{className:"w-5 h-5 text-blue-600"}),(0,r.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[8e3.toLocaleString()," Total Customers"]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(V.Z,{className:"w-5 h-5 text-green-600"}),(0,r.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[s(66e9)," Total Premium"]})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6",children:[(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-2 bg-red-100 rounded-lg",children:(0,r.jsx)(tY.Z,{className:"h-5 w-5 text-red-600"})}),(0,r.jsx)("h4",{className:"text-lg font-medium text-gray-900",children:"Customer Distribution by Value Tier"})]}),(0,r.jsx)("div",{style:{height:"300px"},children:(0,r.jsx)(er,{data:l.map(e=>({id:e.tier.toLowerCase().replace(" ","-"),name:e.tier,value:e.customers,color:e.color,percentage:e.percentage,description:"Avg Premium: ".concat(s(e.avgPremium),", Growth: ").concat(e.growthRate,"%, Retention: ").concat(e.retentionRate,"%")})),valueFormatter:e=>"".concat(e.toLocaleString()," customers"),valueUnit:"Crore"===t?"Cr":"Lakh"===t?"L":"K",onSegmentClick:e=>console.log("Clicked segment:",e)})})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,r.jsx)(P.Z,{className:"h-5 w-5 text-blue-600"})}),(0,r.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Premium Contribution vs Customer Count"})]}),(0,r.jsx)("div",{style:{height:"300px"},children:(0,r.jsx)(em,{data:l.map(e=>({name:e.tier,value:e.contributionPercentage,fullName:"".concat(e.tier," (").concat(e.customers.toLocaleString()," customers)"),totalPremium:e.totalPremium,percentage:e.percentage,customers:e.customers})),dataKey:"value",nameKey:"name",color:a,valueFormatter:e=>"".concat(e.toFixed(1),"%"),onBarClick:(e,t)=>console.log("Clicked bar:",e,t)})})]})]})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,r.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Top 10 Premium Contributors"}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,r.jsx)("th",{className:"text-left py-2 text-sm font-medium text-gray-600",children:"Rank"}),(0,r.jsx)("th",{className:"text-left py-2 text-sm font-medium text-gray-600",children:"Customer Name"}),(0,r.jsx)("th",{className:"text-left py-2 text-sm font-medium text-gray-600",children:"Annual Premium"}),(0,r.jsx)("th",{className:"text-left py-2 text-sm font-medium text-gray-600",children:"Segment"}),(0,r.jsx)("th",{className:"text-left py-2 text-sm font-medium text-gray-600",children:"Products"}),(0,r.jsx)("th",{className:"text-left py-2 text-sm font-medium text-gray-600",children:"Tenure"}),(0,r.jsx)("th",{className:"text-left py-2 text-sm font-medium text-gray-600",children:"Contribution"})]})}),(0,r.jsx)("tbody",{children:[{name:"Reliance Industries Ltd.",premium:45e6,segment:"Corporate",products:8,tenure:"12 years"},{name:"Tata Steel Limited",premium:38e6,segment:"Corporate",products:6,tenure:"15 years"},{name:"HDFC Bank Ltd.",premium:32e6,segment:"Corporate",products:7,tenure:"10 years"},{name:"Infosys Limited",premium:28e6,segment:"Corporate",products:5,tenure:"8 years"},{name:"Wipro Limited",premium:25e6,segment:"Corporate",products:4,tenure:"11 years"},{name:"Bajaj Auto Ltd.",premium:22e6,segment:"Corporate",products:6,tenure:"9 years"},{name:"Mahindra Group",premium:2e7,segment:"Corporate",products:5,tenure:"7 years"},{name:"Asian Paints Ltd.",premium:18e6,segment:"Corporate",products:4,tenure:"6 years"},{name:"Dr. Reddy's Labs",premium:16e6,segment:"Corporate",products:3,tenure:"5 years"},{name:"Godrej Industries",premium:15e6,segment:"Corporate",products:4,tenure:"8 years"}].map((e,t)=>(0,r.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"py-3 text-sm font-medium text-gray-900",children:t+1}),(0,r.jsx)("td",{className:"py-3 text-sm text-gray-900",children:e.name}),(0,r.jsx)("td",{className:"py-3 text-sm font-medium text-green-600",children:s(e.premium)}),(0,r.jsx)("td",{className:"py-3 text-sm text-gray-600",children:e.segment}),(0,r.jsx)("td",{className:"py-3 text-sm text-red-600",children:e.products}),(0,r.jsx)("td",{className:"py-3 text-sm text-gray-600",children:e.tenure}),(0,r.jsxs)("td",{className:"py-3 text-sm font-medium text-blue-600",children:[(e.premium/66e9*100).toFixed(1),"%"]})]},t))})]})})]})]})}var tX=s(29338),t0=s(64042),t1=s(29162),t2=s(12092);function t4(e){let{valueUnit:t,currentFilters:s,onPlayFullView:a}=e,l=e=>"Crore"===t?"₹".concat((e/1e7).toFixed(2)):"Lakh"===t?"₹".concat((e/1e5).toFixed(2)):"Thousands"===t?"₹".concat((e/1e3).toFixed(2)):"₹".concat(e.toLocaleString("en-IN")),n=[{stars:5,satisfaction:"Excellent",customers:3200,percentage:40,avgSpend:125e3,retentionRate:96.5,color:"#10B981",label:"5 Stars"},{stars:4,satisfaction:"Good",customers:2e3,percentage:25,avgSpend:95e3,retentionRate:88.2,color:"#F59E0B",label:"4 Stars"},{stars:3,satisfaction:"Average",customers:1800,percentage:22.5,avgSpend:75e3,retentionRate:72.8,color:"#3B82F6",label:"3 Stars"},{stars:2,satisfaction:"Poor",customers:600,percentage:7.5,avgSpend:55e3,retentionRate:45.3,color:"#8B5CF6",label:"2 Stars"},{stars:1,satisfaction:"Very Poor",customers:400,percentage:5,avgSpend:35e3,retentionRate:12.5,color:"#EF4444",label:"1 Star"}];return(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"grid grid-cols-4 lg:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)(t0.Z,{className:"w-4 h-4 text-green-600"}),(0,r.jsx)("span",{className:"text-sm font-medium text-green-900",children:"Promoters"})]}),(0,r.jsx)("div",{className:"text-2xl font-semibold text-green-600",children:5200..toLocaleString()}),(0,r.jsx)("div",{className:"text-xs text-green-700 mt-1",children:"5-star customers"})]}),(0,r.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)(U.Z,{className:"w-4 h-4 text-yellow-600"}),(0,r.jsx)("span",{className:"text-sm font-medium text-yellow-900",children:"Passives"})]}),(0,r.jsx)("div",{className:"text-2xl font-semibold text-yellow-600",children:1800..toLocaleString()}),(0,r.jsx)("div",{className:"text-xs text-yellow-700 mt-1",children:"4-star customers"})]}),(0,r.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg border border-red-200",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)(t1.Z,{className:"w-4 h-4 text-red-600"}),(0,r.jsx)("span",{className:"text-sm font-medium text-red-900",children:"Detractors"})]}),(0,r.jsx)("div",{className:"text-2xl font-semibold text-red-600",children:1e3.toLocaleString()}),(0,r.jsx)("div",{className:"text-xs text-red-700 mt-1",children:"1-3 star customers"})]}),(0,r.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)(P.Z,{className:"w-4 h-4 text-blue-600"}),(0,r.jsx)("span",{className:"text-sm font-medium text-blue-900",children:"Trend"})]}),(0,r.jsx)("div",{className:"text-2xl font-semibold text-blue-600",children:"+8.5%"}),(0,r.jsx)("div",{className:"text-xs text-blue-700 mt-1",children:"YoY improvement"})]})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Customer Satisfaction & Net Promoter Score Analysis"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Comprehensive customer satisfaction ratings with NPS insights and retention correlation"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(tX.Z,{className:"w-5 h-5 text-yellow-500 fill-current"}),(0,r.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[4.2,"/5.0 Average"]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(O.Z,{className:"w-5 h-5 text-green-600"}),(0,r.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["NPS: +",42]})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6",children:[(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,r.jsx)(t2.Z,{className:"h-5 w-5 text-purple-600"})}),(0,r.jsx)("h4",{className:"text-lg font-medium text-gray-900",children:"Customer Satisfaction Distribution"})]}),(0,r.jsx)("div",{style:{height:"300px"},children:(0,r.jsx)(er,{data:n.map(e=>({id:e.label.toLowerCase().replace(" ","-"),name:e.label,value:e.customers,color:e.color,percentage:e.percentage,stars:e.stars,satisfaction:e.satisfaction,customers:e.customers,avgSpend:e.avgSpend,retentionRate:e.retentionRate,description:"".concat(e.satisfaction," - Avg Spend: ").concat(l(e.avgSpend),", Retention: ").concat(e.retentionRate,"%")})),valueFormatter:e=>"".concat(e.toLocaleString()," customers"),valueUnit:"Crore"===t?"Cr":"Lakh"===t?"L":"K",customTooltip:e=>{let{active:t,payload:s}=e;if(t&&s&&s.length){let e=s[0].payload;return(0,r.jsxs)("div",{className:"bg-white p-4 border border-gray-200 rounded-lg shadow-lg",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)("div",{className:"flex",children:[...Array(e.stars)].map((e,t)=>(0,r.jsx)(tX.Z,{className:"w-4 h-4 text-yellow-400 fill-current"},t))}),(0,r.jsx)("span",{className:"font-medium text-gray-900",children:e.satisfaction})]}),(0,r.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Customers:"}),(0,r.jsx)("span",{className:"font-medium text-gray-600",children:e.customers.toLocaleString()})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Percentage:"}),(0,r.jsxs)("span",{className:"font-medium text-gray-600",children:[e.percentage,"%"]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Avg Spend:"}),(0,r.jsx)("span",{className:"font-medium text-gray-600",children:l(e.avgSpend)})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Retention:"}),(0,r.jsxs)("span",{className:"font-medium text-gray-600",children:[e.retentionRate,"%"]})]})]})]})}return null},onSegmentClick:e=>console.log("Clicked segment:",e)})}),(0,r.jsx)("div",{className:"space-y-2 mt-4",children:n.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[[...Array(e.stars)].map((e,t)=>(0,r.jsx)(tX.Z,{className:"w-3 h-3 text-yellow-400 fill-current"},t)),(0,r.jsx)("span",{className:"text-sm text-gray-600 ml-1",children:e.satisfaction})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.customers.toLocaleString()}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:[e.percentage,"%"]})]})]},t))})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,r.jsx)(P.Z,{className:"h-5 w-5 text-blue-600"})}),(0,r.jsx)("h4",{className:"text-lg font-medium text-gray-900",children:"Satisfaction vs Retention Correlation"})]}),(0,r.jsx)("div",{style:{height:"300px"},children:(0,r.jsx)(em,{data:n.map(e=>({name:e.label,value:e.retentionRate,color:e.color,customers:e.customers,avgSpend:e.avgSpend,retentionRate:e.retentionRate})),valueFormatter:e=>"".concat(e,"% retention"),valueUnit:"%",customTooltip:e=>{let{active:t,payload:s,label:a}=e;if(t&&s&&s.length){let e=s[0].payload;return(0,r.jsxs)("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[(0,r.jsx)("p",{className:"font-medium text-gray-900",children:a}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Retention Rate: ",e.retentionRate,"%"]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Customers: ",e.customers.toLocaleString()]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Avg Spend: ",l(e.avgSpend)]})]})}return null},onBarClick:e=>console.log("Clicked bar:",e)})}),(0,r.jsx)("div",{className:"space-y-2 mt-4",children:n.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[[...Array(e.stars)].map((e,t)=>(0,r.jsx)(tX.Z,{className:"w-3 h-3 text-yellow-400 fill-current"},t)),(0,r.jsx)("span",{className:"text-sm text-gray-600 ml-1",children:e.label})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.avgSpend.toLocaleString()}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:[e.retentionRate,"%"]})]})]},t))})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,r.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Top Satisfaction Drivers"}),(0,r.jsx)("div",{className:"space-y-4",children:[{factor:"Claims Settlement Speed",impact:92,customers:7500},{factor:"Customer Service Quality",impact:85,customers:6800},{factor:"Policy Transparency",impact:78,customers:6200},{factor:"Premium Competitiveness",impact:72,customers:5800},{factor:"Digital Experience",impact:65,customers:5200}].map((e,t)=>(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"font-medium text-gray-900",children:e.factor}),(0,r.jsxs)("span",{className:"text-sm text-green-600 font-medium",children:[e.impact,"% impact"]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"h-2 rounded-full bg-gradient-to-r from-green-400 to-green-600",style:{width:"".concat(e.impact,"%")}})}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:[e.customers.toLocaleString()," customers affected"]})]},t))})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,r.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Key Improvement Areas"}),(0,r.jsx)("div",{className:"space-y-4",children:[{area:"Mobile App Experience",currentScore:3.2,targetScore:4.5,impact:"High"},{area:"Response Time",currentScore:3.6,targetScore:4.2,impact:"Medium"},{area:"Digital Onboarding",currentScore:3.8,targetScore:4.3,impact:"Medium"},{area:"Policy Documentation",currentScore:4,targetScore:4.4,impact:"Low"}].map((e,t)=>(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"font-medium text-gray-900",children:e.area}),(0,r.jsxs)(A.C,{variant:"High"===e.impact?"destructive":"Medium"===e.impact?"default":"secondary",children:[e.impact," Impact"]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Current:"}),(0,r.jsxs)("span",{className:"font-medium",children:[e.currentScore,"/5.0"]}),(0,r.jsx)("span",{className:"text-gray-400",children:"→"}),(0,r.jsx)("span",{className:"text-gray-600",children:"Target:"}),(0,r.jsxs)("span",{className:"font-medium text-green-600",children:[e.targetScore,"/5.0"]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"h-2 rounded-full bg-gradient-to-r from-red-400 to-yellow-400",style:{width:"".concat(e.currentScore/5*100,"%")}})})]},t))})]})]})]})}var t3=s(78116),t5=s(85811);function t6(e){let{valueUnit:t,currentFilters:s,onPlayFullView:a}=e,l=e=>"Crore"===t?"₹".concat((e/1e7).toFixed(2)):"Lakh"===t?"₹".concat((e/1e5).toFixed(2)):"Thousands"===t?"₹".concat((e/1e3).toFixed(2)):"₹".concat(e.toLocaleString("en-IN")),n="#3B82F6",i="#10B981",o="#F59E0B",c="#8B5CF6",d=[{product:"Motor Insurance",currentCustomers:6800,totalCustomers:8e3,penetration:85,crossSellPotential:1200,averageValue:45e3,priority:"Medium",color:n},{product:"Health Insurance",currentCustomers:5200,totalCustomers:8e3,penetration:65,crossSellPotential:2800,averageValue:28e3,priority:"High",color:i},{product:"Life Insurance",currentCustomers:3600,totalCustomers:8e3,penetration:45,crossSellPotential:4400,averageValue:95e3,priority:"High",color:o},{product:"Property Insurance",currentCustomers:2400,totalCustomers:8e3,penetration:30,crossSellPotential:5600,averageValue:125e3,priority:"Very High",color:c},{product:"Travel Insurance",currentCustomers:1600,totalCustomers:8e3,penetration:20,crossSellPotential:6400,averageValue:8500,priority:"Medium",color:"#EF4444"},{product:"Marine Insurance",currentCustomers:800,totalCustomers:8e3,penetration:10,crossSellPotential:7200,averageValue:18e4,priority:"Low",color:"#06B6D4"}],u=[{segment:"High Value (1 Product)",customers:280,currentSpend:84e6,potentialSpend:168e6,upliftPotential:100,probability:75,timeframe:"3-6 months",products:["Health","Property","Life"],color:i},{segment:"Mid Value (1-2 Products)",customers:1200,currentSpend:72e6,potentialSpend:144e6,upliftPotential:100,probability:60,timeframe:"6-12 months",products:["Motor","Travel","Health"],color:n},{segment:"Standard (1 Product)",customers:2400,currentSpend:66e6,potentialSpend:99e6,upliftPotential:50,probability:45,timeframe:"12-18 months",products:["Health","Travel"],color:o},{segment:"Basic (Single Product)",customers:1800,currentSpend:324e5,potentialSpend:486e5,upliftPotential:50,probability:25,timeframe:"18+ months",products:["Travel","Health"],color:c}],m=[{opportunity:"Property Insurance to Motor Customers",targetCustomers:4200,conversionRate:15.2,expectedCustomers:638,revenuePerCustomer:125e3,totalOpportunity:7975e4,priority:"Very High",effort:"Medium",roi:850},{opportunity:"Health Insurance to All Segments",targetCustomers:2800,conversionRate:22.5,expectedCustomers:630,revenuePerCustomer:28e3,totalOpportunity:1764e4,priority:"High",effort:"Low",roi:780},{opportunity:"Life Insurance Cross-sell",targetCustomers:4400,conversionRate:8.7,expectedCustomers:383,revenuePerCustomer:95e3,totalOpportunity:36385e3,priority:"High",effort:"High",roi:420},{opportunity:"Travel Insurance Volume Play",targetCustomers:6400,conversionRate:18.3,expectedCustomers:1171,revenuePerCustomer:8500,totalOpportunity:9953500,priority:"Medium",effort:"Low",roi:650},{opportunity:"Marine Insurance Premium Segment",targetCustomers:450,conversionRate:35,expectedCustomers:158,revenuePerCustomer:18e4,totalOpportunity:2844e4,priority:"Medium",effort:"High",roi:380}],x=158e6,h=48.3,p=75,g=2980,v=67,j=[{name:"Premium Property Protection",target:"High-value motor customers without property coverage",customers:320,investment:12e5,expectedReturn:15e6,duration:"6 months",channels:["Phone","Email","In-person"],priority:"Immediate"},{name:"Health First Initiative",target:"All customers without health insurance",customers:2800,investment:8e5,expectedReturn:85e5,duration:"12 months",channels:["Digital","WhatsApp","Email"],priority:"High"},{name:"Life Milestone Moments",target:"Customers aged 25-45 without life coverage",customers:1800,investment:15e5,expectedReturn:12e6,duration:"18 months",channels:["Advisory","Webinars","Personal meetings"],priority:"Medium"}];return(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"grid grid-cols-4 lg:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)(V.Z,{className:"w-4 h-4 text-green-600"}),(0,r.jsx)("span",{className:"text-sm font-medium text-green-900",children:"Revenue Opportunity"})]}),(0,r.jsx)("div",{className:"text-2xl font-semibold text-green-600",children:l(x)}),(0,r.jsx)("div",{className:"text-xs text-green-700 mt-1",children:"Cross-sell potential"})]}),(0,r.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)(U.Z,{className:"w-4 h-4 text-blue-600"}),(0,r.jsx)("span",{className:"text-sm font-medium text-blue-900",children:"Target Customers"})]}),(0,r.jsx)("div",{className:"text-2xl font-semibold text-blue-600",children:g.toLocaleString()}),(0,r.jsx)("div",{className:"text-xs text-blue-700 mt-1",children:"Expected conversions"})]}),(0,r.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-200",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)(P.Z,{className:"w-4 h-4 text-purple-600"}),(0,r.jsx)("span",{className:"text-sm font-medium text-purple-900",children:"Revenue Uplift"})]}),(0,r.jsxs)("div",{className:"text-2xl font-semibold text-purple-600",children:[v,"%"]}),(0,r.jsx)("div",{className:"text-xs text-purple-700 mt-1",children:"Per customer average"})]}),(0,r.jsxs)("div",{className:"bg-amber-50 p-4 rounded-lg border border-amber-200",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)(O.Z,{className:"w-4 h-4 text-amber-600"}),(0,r.jsx)("span",{className:"text-sm font-medium text-amber-900",children:"Penetration Gap"})]}),(0,r.jsxs)("div",{className:"text-2xl font-semibold text-amber-600",children:[(p-h).toFixed(1),"%"]}),(0,r.jsxs)("div",{className:"text-xs text-amber-700 mt-1",children:["To target ",p,"%"]})]})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Cross-Sell / Upsell Potential Analysis"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Product penetration insights with revenue growth opportunities and targeted campaign strategies"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(P.Z,{className:"w-5 h-5 text-green-600"}),(0,r.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[l(x)," Opportunity"]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(O.Z,{className:"w-5 h-5 text-blue-600"}),(0,r.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[h,"% Avg Penetration"]})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6",children:[(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,r.jsx)(Layers,{className:"h-5 w-5 text-green-600"})}),(0,r.jsx)("h4",{className:"text-lg font-medium text-gray-900",children:"Product Penetration & Cross-Sell Potential"})]}),(0,r.jsx)(H.h,{width:"100%",height:300,children:(0,r.jsxs)(q.v,{data:d,margin:{top:20,right:30,left:20,bottom:5},children:[(0,r.jsx)(Y.q,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),(0,r.jsx)(J.K,{dataKey:"product",angle:-45,textAnchor:"end",height:80,fontSize:11}),(0,r.jsx)(X.B,{}),(0,r.jsx)(Q.u,{content:e=>{let{active:t,payload:s,label:a}=e;if(t&&s&&s.length){let e=s[0].payload;return(0,r.jsxs)("div",{className:"bg-white p-4 border border-gray-200 rounded-lg shadow-lg",children:[(0,r.jsx)("p",{className:"font-medium text-gray-900 mb-2",children:a}),(0,r.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Current Customers:"}),(0,r.jsx)("span",{className:"font-medium",children:e.currentCustomers.toLocaleString()})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Penetration:"}),(0,r.jsxs)("span",{className:"font-medium",children:[e.penetration,"%"]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Cross-sell Potential:"}),(0,r.jsx)("span",{className:"font-medium text-green-600",children:e.crossSellPotential.toLocaleString()})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Avg Value:"}),(0,r.jsx)("span",{className:"font-medium",children:l(e.averageValue)})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Priority:"}),(0,r.jsx)("span",{className:"font-medium px-2 py-1 rounded-full text-xs ".concat("Very High"===e.priority?"bg-red-100 text-red-700":"High"===e.priority?"bg-orange-100 text-orange-700":"Medium"===e.priority?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"),children:e.priority})]})]})]})}return null}}),(0,r.jsx)(ee.$,{dataKey:"penetration",fill:n,radius:[4,4,0,0]})]})})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-2 bg-red-100 rounded-lg",children:(0,r.jsx)(O.Z,{className:"h-5 w-5 text-red-600"})}),(0,r.jsx)("h4",{className:"text-lg font-medium text-gray-900",children:"Revenue Opportunities by Priority"})]}),(0,r.jsx)(H.h,{width:"100%",height:300,children:(0,r.jsxs)(t3.G,{data:m,margin:{top:20,right:20,bottom:20,left:20},children:[(0,r.jsx)(Y.q,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),(0,r.jsx)(J.K,{type:"number",dataKey:"expectedCustomers",name:"Expected Customers",domain:[0,"dataMax + 100"]}),(0,r.jsx)(X.B,{type:"number",dataKey:"totalOpportunity",name:"Revenue Opportunity",tickFormatter:e=>l(e)}),(0,r.jsx)(Q.u,{content:e=>{let{active:t,payload:s}=e;if(t&&s&&s.length){let e=s[0].payload;return(0,r.jsxs)("div",{className:"bg-white p-4 border border-gray-200 rounded-lg shadow-lg min-w-64",children:[(0,r.jsx)("p",{className:"font-medium text-gray-900 mb-2",children:e.opportunity}),(0,r.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Target Customers:"}),(0,r.jsx)("span",{className:"font-medium",children:e.targetCustomers.toLocaleString()})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Conversion Rate:"}),(0,r.jsxs)("span",{className:"font-medium",children:[e.conversionRate,"%"]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Expected Customers:"}),(0,r.jsx)("span",{className:"font-medium",children:e.expectedCustomers})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Revenue Opportunity:"}),(0,r.jsx)("span",{className:"font-medium text-green-600",children:l(e.totalOpportunity)})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"ROI:"}),(0,r.jsxs)("span",{className:"font-medium text-blue-600",children:[e.roi,"%"]})]})]})]})}return null}}),(0,r.jsx)(t5.b,{dataKey:"totalOpportunity",fill:i,name:"Revenue Opportunity"})]})})]})]})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,r.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Customer Segment Cross-Sell Opportunities"}),(0,r.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-4 gap-4",children:u.map((e,t)=>(0,r.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg hover:shadow-md transition-shadow",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),(0,r.jsx)("h5",{className:"font-medium text-gray-900",children:e.segment})]}),(0,r.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Customers:"}),(0,r.jsx)("span",{className:"font-medium",children:e.customers.toLocaleString()})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Current Spend:"}),(0,r.jsx)("span",{className:"font-medium",children:l(e.currentSpend)})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Potential Spend:"}),(0,r.jsx)("span",{className:"font-medium text-green-600",children:l(e.potentialSpend)})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Uplift Potential:"}),(0,r.jsxs)("span",{className:"font-medium text-blue-600",children:[e.upliftPotential,"%"]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Success Probability:"}),(0,r.jsxs)("span",{className:"font-medium",children:[e.probability,"%"]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Timeframe:"}),(0,r.jsx)("span",{className:"font-medium text-purple-600",children:e.timeframe})]}),(0,r.jsxs)("div",{className:"pt-2 border-t border-gray-100",children:[(0,r.jsx)("span",{className:"text-gray-600 text-xs",children:"Target Products:"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:e.products.map((e,t)=>(0,r.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full",children:e},t))})]})]})]},t))})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,r.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Recommended Cross-Sell Campaigns"}),(0,r.jsx)("div",{className:"space-y-4",children:j.map((e,t)=>(0,r.jsxs)("div",{className:"p-4 border border-gray-100 rounded-lg bg-gray-50",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h5",{className:"font-medium text-gray-900",children:e.name}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.target})]}),(0,r.jsx)(A.C,{variant:"Immediate"===e.priority?"destructive":"High"===e.priority?"default":"secondary",children:e.priority})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-6 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Target Customers"}),(0,r.jsx)("div",{className:"font-medium text-gray-900",children:e.customers.toLocaleString()})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Investment"}),(0,r.jsx)("div",{className:"font-medium text-red-600",children:l(e.investment)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Expected Return"}),(0,r.jsx)("div",{className:"font-medium text-green-600",children:l(e.expectedReturn)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-600",children:"ROI"}),(0,r.jsxs)("div",{className:"font-medium text-blue-600",children:[((e.expectedReturn/e.investment-1)*100).toFixed(0),"%"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Duration"}),(0,r.jsx)("div",{className:"font-medium text-purple-600",children:e.duration})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Channels"}),(0,r.jsxs)("div",{className:"font-medium text-gray-900",children:[e.channels.slice(0,2).join(", "),e.channels.length>2&&" +".concat(e.channels.length-2)]})]})]})]},t))})]})]})}function t7(){let{selectedReportType:e}=(0,l.C)(e=>e.filter);return(0,r.jsx)("div",{className:"w-full",children:(()=>{switch(e){case"Revenue by Products":return(0,r.jsx)(ey,{});case"Revenue by Insurers":return(0,r.jsx)(eS,{});case"Revenue by LOB":return(0,r.jsx)(eD,{});case"Revenue by Vertical":return(0,r.jsx)(eE,{});case"Revenue by Policy Type":return(0,r.jsx)(eq,{});case"Cross-Sell Penetration":return(0,r.jsx)(e4,{});case"Revenue vs Expenses":return(0,r.jsx)(ti,{});case"Retention - By Insurer":return(0,r.jsx)(tN,{});case"Retention - Broker":return(0,r.jsx)(tT,{});case"Duration of Relationship":return(0,r.jsx)(tU,{});case"Number of Products Purchased":return(0,r.jsx)(tq,{});case"Premium Contribution by Customer":return(0,r.jsx)(tJ,{});case"Customer Satisfaction / NPS":return(0,r.jsx)(t4,{});case"Cross-Sell / Upsell Potential":return(0,r.jsx)(t6,{});default:return(0,r.jsx)("div",{className:"flex items-center justify-center h-64 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-gray-400 text-lg mb-2",children:"\uD83D\uDCC8"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"Select a Report Type"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Choose a report type from the filter above to view analytics"})]})})}})()})}},79055:function(e,t,s){s.d(t,{C:function(){return o}});var r=s(57437);s(2265);var a=s(71538),l=s(13027),n=s(13320);let i=(0,l.j)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:s,asChild:l=!1,...o}=e,c=l?a.g7:"span";return(0,r.jsx)(c,{"data-slot":"badge",className:(0,n.cn)(i({variant:s}),t),...o})}},89733:function(e,t,s){s.d(t,{z:function(){return c}});var r=s(57437),a=s(2265),l=s(71538),n=s(13027),i=s(13320);let o=(0,n.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-gray-100 hover:text-gray-900 transition-colors duration-200",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:s,variant:a,size:n,asChild:c=!1,...d}=e,u=c?l.g7:"button";return(0,r.jsx)(u,{"data-slot":"button",className:(0,i.cn)(o({variant:a,size:n,className:s})),ref:t,...d})});c.displayName="Button"},48185:function(e,t,s){s.d(t,{Ol:function(){return n},SZ:function(){return o},Zb:function(){return l},aY:function(){return c},ll:function(){return i}});var r=s(57437);s(2265);var a=s(13320);function l(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",t),...s})}function n(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function i(e){let{className:t,...s}=e;return(0,r.jsx)("h4",{"data-slot":"card-title",className:(0,a.cn)("leading-none",t),...s})}function o(e){let{className:t,...s}=e;return(0,r.jsx)("p",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground",t),...s})}function c(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6 [&:last-child]:pb-6",t),...s})}},2128:function(e,t,s){s.d(t,{Bw:function(){return m},Ph:function(){return c},Ql:function(){return x},i4:function(){return u},ki:function(){return d}});var r=s(57437);s(2265);var a=s(613),l=s(42421),n=s(22468),i=s(14392),o=s(13320);function c(e){let{...t}=e;return(0,r.jsx)(a.fC,{"data-slot":"select",...t})}function d(e){let{...t}=e;return(0,r.jsx)(a.B4,{"data-slot":"select-value",...t})}function u(e){let{className:t,size:s="default",children:n,...i}=e;return(0,r.jsxs)(a.xz,{"data-slot":"select-trigger","data-size":s,className:(0,o.cn)("h-9 bg-blue-50 border-blue-200 text-sm transition-all duration-200 w-full flex items-center justify-between gap-2 rounded-md border px-3 py-2 whitespace-nowrap outline-none  disabled:cursor-not-allowed disabled:opacity-50 data-[placeholder]:text-muted-foreground [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg]:size-4",t),...i,children:[n,(0,r.jsx)(a.JO,{asChild:!0,children:(0,r.jsx)(l.Z,{className:"size-4 opacity-50"})})]})}function m(e){let{className:t,children:s,position:l="popper",...n}=e;return(0,r.jsx)(a.h_,{children:(0,r.jsxs)(a.VY,{"data-slot":"select-content",className:(0,o.cn)("bg-white text-black data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[12rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-lg border shadow-md","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:l,...n,children:[(0,r.jsx)(h,{}),(0,r.jsx)(a.l_,{className:(0,o.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),(0,r.jsx)(p,{})]})})}function x(e){let{className:t,children:s,...l}=e;return(0,r.jsxs)(a.ck,{"data-slot":"select-item",className:(0,o.cn)("hover:bg-gray-400 hover:text-black focus:bg-gray-200 focus:text-black focus:border-none relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm text-black outline-none select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...l,children:[(0,r.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,r.jsx)(a.wU,{children:(0,r.jsx)(n.Z,{className:"size-4"})})}),(0,r.jsx)(a.eT,{children:s})]})}function h(e){let{className:t,...s}=e;return(0,r.jsx)(a.u_,{"data-slot":"select-scroll-up-button",className:(0,o.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,r.jsx)(i.Z,{className:"size-4"})})}function p(e){let{className:t,...s}=e;return(0,r.jsx)(a.$G,{"data-slot":"select-scroll-down-button",className:(0,o.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,r.jsx)(l.Z,{className:"size-4"})})}},13320:function(e,t,s){s.d(t,{cn:function(){return l}});var r=s(44839),a=s(96164);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.W)(t))}},10751:function(e,t,s){s.d(t,{C:function(){return l},T:function(){return a}});var r=s(11444);let a=()=>(0,r.I0)(),l=r.v9}}]);